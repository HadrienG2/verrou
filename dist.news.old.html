<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>3.&nbsp;OLDER NEWS</title>
<link rel="stylesheet" type="text/css" href="vg_basic.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.78.1">
<link rel="home" href="index.html" title="Valgrind Documentation">
<link rel="up" href="dist.html" title="Valgrind Distribution Documents">
<link rel="prev" href="dist.news.html" title="2.&nbsp;NEWS">
<link rel="next" href="dist.readme.html" title="4.&nbsp;README">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div><table class="nav" width="100%" cellspacing="3" cellpadding="3" border="0" summary="Navigation header"><tr>
<td width="22px" align="center" valign="middle"><a accesskey="p" href="dist.news.html"><img src="images/prev.png" width="18" height="21" border="0" alt="Prev"></a></td>
<td width="25px" align="center" valign="middle"><a accesskey="u" href="dist.html"><img src="images/up.png" width="21" height="18" border="0" alt="Up"></a></td>
<td width="31px" align="center" valign="middle"><a accesskey="h" href="index.html"><img src="images/home.png" width="27" height="20" border="0" alt="Up"></a></td>
<th align="center" valign="middle">Valgrind Distribution Documents</th>
<td width="22px" align="center" valign="middle"><a accesskey="n" href="dist.readme.html"><img src="images/next.png" width="18" height="21" border="0" alt="Next"></a></td>
</tr></table></div>
<div class="chapter">
<div class="titlepage"><div><div><h1 class="title">
<a name="dist.news.old"></a>3.&nbsp;OLDER NEWS</h1></div></div></div>
<div class="literallayout"><p><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Release&nbsp;3.3.1&nbsp;(4&nbsp;June&nbsp;2008)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.3.1&nbsp;fixes&nbsp;a&nbsp;bunch&nbsp;of&nbsp;bugs&nbsp;in&nbsp;3.3.0,&nbsp;adds&nbsp;support&nbsp;for&nbsp;glibc-2.8&nbsp;based<br>
systems&nbsp;(openSUSE&nbsp;11,&nbsp;Fedora&nbsp;Core&nbsp;9),&nbsp;improves&nbsp;the&nbsp;existing&nbsp;glibc-2.7<br>
support,&nbsp;and&nbsp;adds&nbsp;support&nbsp;for&nbsp;the&nbsp;SSSE3&nbsp;(Core&nbsp;2)&nbsp;instruction&nbsp;set.<br>
<br>
3.3.1&nbsp;will&nbsp;likely&nbsp;be&nbsp;the&nbsp;last&nbsp;release&nbsp;that&nbsp;supports&nbsp;some&nbsp;very&nbsp;old<br>
systems.&nbsp;&nbsp;In&nbsp;particular,&nbsp;the&nbsp;next&nbsp;major&nbsp;release,&nbsp;3.4.0,&nbsp;will&nbsp;drop<br>
support&nbsp;for&nbsp;the&nbsp;old&nbsp;LinuxThreads&nbsp;threading&nbsp;library,&nbsp;and&nbsp;for&nbsp;gcc<br>
versions&nbsp;prior&nbsp;to&nbsp;3.0.<br>
<br>
The&nbsp;fixed&nbsp;bugs&nbsp;are&nbsp;as&nbsp;follows.&nbsp;&nbsp;Note&nbsp;that&nbsp;"n-i-bz"&nbsp;stands&nbsp;for&nbsp;"not&nbsp;in<br>
bugzilla"&nbsp;--&nbsp;that&nbsp;is,&nbsp;a&nbsp;bug&nbsp;that&nbsp;was&nbsp;reported&nbsp;to&nbsp;us&nbsp;but&nbsp;never&nbsp;got&nbsp;a<br>
bugzilla&nbsp;entry.&nbsp;&nbsp;We&nbsp;encourage&nbsp;you&nbsp;to&nbsp;file&nbsp;bugs&nbsp;in&nbsp;bugzilla<br>
(http://bugs.kde.org/enter_valgrind_bug.cgi)&nbsp;rather&nbsp;than&nbsp;mailing&nbsp;the<br>
developers&nbsp;(or&nbsp;mailing&nbsp;lists)&nbsp;directly&nbsp;--&nbsp;bugs&nbsp;that&nbsp;are&nbsp;not&nbsp;entered<br>
into&nbsp;bugzilla&nbsp;tend&nbsp;to&nbsp;get&nbsp;forgotten&nbsp;about&nbsp;or&nbsp;ignored.<br>
<br>
n-i-bz&nbsp;&nbsp;Massif&nbsp;segfaults&nbsp;at&nbsp;exit<br>
n-i-bz&nbsp;&nbsp;Memcheck&nbsp;asserts&nbsp;on&nbsp;Altivec&nbsp;code<br>
n-i-bz&nbsp;&nbsp;fix&nbsp;sizeof&nbsp;bug&nbsp;in&nbsp;Helgrind<br>
n-i-bz&nbsp;&nbsp;check&nbsp;fd&nbsp;on&nbsp;sys_llseek<br>
n-i-bz&nbsp;&nbsp;update&nbsp;syscall&nbsp;lists&nbsp;to&nbsp;kernel&nbsp;2.6.23.1<br>
n-i-bz&nbsp;&nbsp;support&nbsp;sys_sync_file_range<br>
n-i-bz&nbsp;&nbsp;handle&nbsp;sys_sysinfo,&nbsp;sys_getresuid,&nbsp;sys_getresgid&nbsp;on&nbsp;ppc64-linux<br>
n-i-bz&nbsp;&nbsp;intercept&nbsp;memcpy&nbsp;in&nbsp;64-bit&nbsp;ld.so's<br>
n-i-bz&nbsp;&nbsp;Fix&nbsp;wrappers&nbsp;for&nbsp;sys_{futimesat,utimensat}<br>
n-i-bz&nbsp;&nbsp;Minor&nbsp;false-error&nbsp;avoidance&nbsp;fixes&nbsp;for&nbsp;Memcheck<br>
n-i-bz&nbsp;&nbsp;libmpiwrap.c:&nbsp;add&nbsp;a&nbsp;wrapper&nbsp;for&nbsp;MPI_Waitany<br>
n-i-bz&nbsp;&nbsp;helgrind&nbsp;support&nbsp;for&nbsp;glibc-2.8<br>
n-i-bz&nbsp;&nbsp;partial&nbsp;fix&nbsp;for&nbsp;mc_leakcheck.c:698&nbsp;assert:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'lc_shadows[i]-&gt;data&nbsp;+&nbsp;lc_shadows[i]&nbsp;...<br>
n-i-bz&nbsp;&nbsp;Massif/Cachegrind&nbsp;output&nbsp;corruption&nbsp;when&nbsp;programs&nbsp;fork<br>
n-i-bz&nbsp;&nbsp;register&nbsp;allocator&nbsp;fix:&nbsp;handle&nbsp;spill&nbsp;stores&nbsp;correctly<br>
n-i-bz&nbsp;&nbsp;add&nbsp;support&nbsp;for&nbsp;PA6T&nbsp;PowerPC&nbsp;CPUs<br>
126389&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF&nbsp;0xAE&nbsp;(FXRSTOR)<br>
158525&nbsp;&nbsp;==126389<br>
152818&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF3&nbsp;0xAC&nbsp;(repz&nbsp;lodsb)&nbsp;<br>
153196&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF2&nbsp;0xA6&nbsp;(repnz&nbsp;cmpsb)&nbsp;<br>
155011&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xCF&nbsp;(iret)<br>
155091&nbsp;&nbsp;Warning&nbsp;[...]&nbsp;unhandled&nbsp;DW_OP_&nbsp;opcode&nbsp;0x23<br>
156960&nbsp;&nbsp;==155901<br>
155528&nbsp;&nbsp;support&nbsp;Core2/SSSE3&nbsp;insns&nbsp;on&nbsp;x86/amd64<br>
155929&nbsp;&nbsp;ms_print&nbsp;fails&nbsp;on&nbsp;massif&nbsp;outputs&nbsp;containing&nbsp;long&nbsp;lines<br>
157665&nbsp;&nbsp;valgrind&nbsp;fails&nbsp;on&nbsp;shmdt(0)&nbsp;after&nbsp;shmat&nbsp;to&nbsp;0<br>
157748&nbsp;&nbsp;support&nbsp;x86&nbsp;PUSHFW/POPFW<br>
158212&nbsp;&nbsp;helgrind:&nbsp;handle&nbsp;pthread_rwlock_try{rd,wr}lock.<br>
158425&nbsp;&nbsp;sys_poll&nbsp;incorrectly&nbsp;emulated&nbsp;when&nbsp;RES==0<br>
158744&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0xF0&nbsp;0x41&nbsp;0xF&nbsp;0xC0&nbsp;(xaddb)<br>
160907&nbsp;&nbsp;Support&nbsp;for&nbsp;a&nbsp;couple&nbsp;of&nbsp;recent&nbsp;Linux&nbsp;syscalls<br>
161285&nbsp;&nbsp;Patch&nbsp;--&nbsp;support&nbsp;for&nbsp;eventfd()&nbsp;syscall<br>
161378&nbsp;&nbsp;illegal&nbsp;opcode&nbsp;in&nbsp;debug&nbsp;libm&nbsp;(FUCOMPP)<br>
160136&nbsp;&nbsp;==161378<br>
161487&nbsp;&nbsp;number&nbsp;of&nbsp;suppressions&nbsp;files&nbsp;is&nbsp;limited&nbsp;to&nbsp;10<br>
162386&nbsp;&nbsp;ms_print&nbsp;typo&nbsp;in&nbsp;milliseconds&nbsp;time&nbsp;unit&nbsp;for&nbsp;massif<br>
161036&nbsp;&nbsp;exp-drd:&nbsp;client&nbsp;allocated&nbsp;memory&nbsp;was&nbsp;never&nbsp;freed<br>
162663&nbsp;&nbsp;signalfd_wrapper&nbsp;fails&nbsp;on&nbsp;64bit&nbsp;linux<br>
<br>
(3.3.1.RC1:&nbsp;&nbsp;2&nbsp;June&nbsp;2008,&nbsp;vex&nbsp;r1854,&nbsp;valgrind&nbsp;r8169).<br>
(3.3.1:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;4&nbsp;June&nbsp;2008,&nbsp;vex&nbsp;r1854,&nbsp;valgrind&nbsp;r8180).<br>
<br>
<br>
<br>
Release&nbsp;3.3.0&nbsp;(7&nbsp;December&nbsp;2007)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.3.0&nbsp;is&nbsp;a&nbsp;feature&nbsp;release&nbsp;with&nbsp;many&nbsp;significant&nbsp;improvements&nbsp;and&nbsp;the<br>
usual&nbsp;collection&nbsp;of&nbsp;bug&nbsp;fixes.&nbsp;&nbsp;This&nbsp;release&nbsp;supports&nbsp;X86/Linux,<br>
AMD64/Linux,&nbsp;PPC32/Linux&nbsp;and&nbsp;PPC64/Linux.&nbsp;&nbsp;Support&nbsp;for&nbsp;recent&nbsp;distros<br>
(using&nbsp;gcc&nbsp;4.3,&nbsp;glibc&nbsp;2.6&nbsp;and&nbsp;2.7)&nbsp;has&nbsp;been&nbsp;added.<br>
<br>
The&nbsp;main&nbsp;excitement&nbsp;in&nbsp;3.3.0&nbsp;is&nbsp;new&nbsp;and&nbsp;improved&nbsp;tools.&nbsp;&nbsp;Helgrind<br>
works&nbsp;again,&nbsp;Massif&nbsp;has&nbsp;been&nbsp;completely&nbsp;overhauled&nbsp;and&nbsp;much&nbsp;improved,<br>
Cachegrind&nbsp;now&nbsp;does&nbsp;branch-misprediction&nbsp;profiling,&nbsp;and&nbsp;a&nbsp;new&nbsp;category<br>
of&nbsp;experimental&nbsp;tools&nbsp;has&nbsp;been&nbsp;created,&nbsp;containing&nbsp;two&nbsp;new&nbsp;tools:<br>
Omega&nbsp;and&nbsp;DRD.&nbsp;&nbsp;There&nbsp;are&nbsp;many&nbsp;other&nbsp;smaller&nbsp;improvements.&nbsp;&nbsp;In&nbsp;detail:<br>
<br>
-&nbsp;Helgrind&nbsp;has&nbsp;been&nbsp;completely&nbsp;overhauled&nbsp;and&nbsp;works&nbsp;for&nbsp;the&nbsp;first&nbsp;time<br>
&nbsp;&nbsp;since&nbsp;Valgrind&nbsp;2.2.0.&nbsp;&nbsp;Supported&nbsp;functionality&nbsp;is:&nbsp;detection&nbsp;of<br>
&nbsp;&nbsp;misuses&nbsp;of&nbsp;the&nbsp;POSIX&nbsp;PThreads&nbsp;API,&nbsp;detection&nbsp;of&nbsp;potential&nbsp;deadlocks<br>
&nbsp;&nbsp;resulting&nbsp;from&nbsp;cyclic&nbsp;lock&nbsp;dependencies,&nbsp;and&nbsp;detection&nbsp;of&nbsp;data<br>
&nbsp;&nbsp;races.&nbsp;&nbsp;Compared&nbsp;to&nbsp;the&nbsp;2.2.0&nbsp;Helgrind,&nbsp;the&nbsp;race&nbsp;detection&nbsp;algorithm<br>
&nbsp;&nbsp;has&nbsp;some&nbsp;significant&nbsp;improvements&nbsp;aimed&nbsp;at&nbsp;reducing&nbsp;the&nbsp;false&nbsp;error<br>
&nbsp;&nbsp;rate.&nbsp;&nbsp;Handling&nbsp;of&nbsp;various&nbsp;kinds&nbsp;of&nbsp;corner&nbsp;cases&nbsp;has&nbsp;been&nbsp;improved.<br>
&nbsp;&nbsp;Efforts&nbsp;have&nbsp;been&nbsp;made&nbsp;to&nbsp;make&nbsp;the&nbsp;error&nbsp;messages&nbsp;easier&nbsp;to<br>
&nbsp;&nbsp;understand.&nbsp;&nbsp;Extensive&nbsp;documentation&nbsp;is&nbsp;provided.<br>
<br>
-&nbsp;Massif&nbsp;has&nbsp;been&nbsp;completely&nbsp;overhauled.&nbsp;&nbsp;Instead&nbsp;of&nbsp;measuring<br>
&nbsp;&nbsp;space-time&nbsp;usage&nbsp;--&nbsp;which&nbsp;wasn't&nbsp;always&nbsp;useful&nbsp;and&nbsp;many&nbsp;people&nbsp;found<br>
&nbsp;&nbsp;confusing&nbsp;--&nbsp;it&nbsp;now&nbsp;measures&nbsp;space&nbsp;usage&nbsp;at&nbsp;various&nbsp;points&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;execution,&nbsp;including&nbsp;the&nbsp;point&nbsp;of&nbsp;peak&nbsp;memory&nbsp;allocation.&nbsp;&nbsp;Its<br>
&nbsp;&nbsp;output&nbsp;format&nbsp;has&nbsp;also&nbsp;changed:&nbsp;instead&nbsp;of&nbsp;producing&nbsp;PostScript<br>
&nbsp;&nbsp;graphs&nbsp;and&nbsp;HTML&nbsp;text,&nbsp;it&nbsp;produces&nbsp;a&nbsp;single&nbsp;text&nbsp;output&nbsp;(via&nbsp;the&nbsp;new<br>
&nbsp;&nbsp;'ms_print'&nbsp;script)&nbsp;that&nbsp;contains&nbsp;both&nbsp;a&nbsp;graph&nbsp;and&nbsp;the&nbsp;old&nbsp;textual<br>
&nbsp;&nbsp;information,&nbsp;but&nbsp;in&nbsp;a&nbsp;more&nbsp;compact&nbsp;and&nbsp;readable&nbsp;form.&nbsp;&nbsp;Finally,&nbsp;the<br>
&nbsp;&nbsp;new&nbsp;version&nbsp;should&nbsp;be&nbsp;more&nbsp;reliable&nbsp;than&nbsp;the&nbsp;old&nbsp;one,&nbsp;as&nbsp;it&nbsp;has&nbsp;been<br>
&nbsp;&nbsp;tested&nbsp;more&nbsp;thoroughly.<br>
<br>
-&nbsp;Cachegrind&nbsp;has&nbsp;been&nbsp;extended&nbsp;to&nbsp;do&nbsp;branch-misprediction&nbsp;profiling.<br>
&nbsp;&nbsp;Both&nbsp;conditional&nbsp;and&nbsp;indirect&nbsp;branches&nbsp;are&nbsp;profiled.&nbsp;&nbsp;The&nbsp;default<br>
&nbsp;&nbsp;behaviour&nbsp;of&nbsp;Cachegrind&nbsp;is&nbsp;unchanged.&nbsp;&nbsp;To&nbsp;use&nbsp;the&nbsp;new&nbsp;functionality,<br>
&nbsp;&nbsp;give&nbsp;the&nbsp;option&nbsp;--branch-sim=yes.<br>
<br>
-&nbsp;A&nbsp;new&nbsp;category&nbsp;of&nbsp;"experimental&nbsp;tools"&nbsp;has&nbsp;been&nbsp;created.&nbsp;&nbsp;Such&nbsp;tools<br>
&nbsp;&nbsp;may&nbsp;not&nbsp;work&nbsp;as&nbsp;well&nbsp;as&nbsp;the&nbsp;standard&nbsp;tools,&nbsp;but&nbsp;are&nbsp;included&nbsp;because<br>
&nbsp;&nbsp;some&nbsp;people&nbsp;will&nbsp;find&nbsp;them&nbsp;useful,&nbsp;and&nbsp;because&nbsp;exposure&nbsp;to&nbsp;a&nbsp;wider<br>
&nbsp;&nbsp;user&nbsp;group&nbsp;provides&nbsp;tool&nbsp;authors&nbsp;with&nbsp;more&nbsp;end-user&nbsp;feedback.&nbsp;&nbsp;These<br>
&nbsp;&nbsp;tools&nbsp;have&nbsp;a&nbsp;"exp-"&nbsp;prefix&nbsp;attached&nbsp;to&nbsp;their&nbsp;names&nbsp;to&nbsp;indicate&nbsp;their<br>
&nbsp;&nbsp;experimental&nbsp;nature.&nbsp;&nbsp;Currently&nbsp;there&nbsp;are&nbsp;two&nbsp;experimental&nbsp;tools:<br>
<br>
&nbsp;&nbsp;*&nbsp;exp-Omega:&nbsp;an&nbsp;instantaneous&nbsp;leak&nbsp;detector.&nbsp;&nbsp;See<br>
&nbsp;&nbsp;&nbsp;&nbsp;exp-omega/docs/omega_introduction.txt.<br>
<br>
&nbsp;&nbsp;*&nbsp;exp-DRD:&nbsp;a&nbsp;data&nbsp;race&nbsp;detector&nbsp;based&nbsp;on&nbsp;the&nbsp;happens-before<br>
&nbsp;&nbsp;&nbsp;&nbsp;relation.&nbsp;&nbsp;See&nbsp;exp-drd/docs/README.txt.<br>
<br>
-&nbsp;Scalability&nbsp;improvements&nbsp;for&nbsp;very&nbsp;large&nbsp;programs,&nbsp;particularly&nbsp;those<br>
&nbsp;&nbsp;which&nbsp;have&nbsp;a&nbsp;million&nbsp;or&nbsp;more&nbsp;malloc'd&nbsp;blocks&nbsp;in&nbsp;use&nbsp;at&nbsp;once.&nbsp;&nbsp;These<br>
&nbsp;&nbsp;improvements&nbsp;mostly&nbsp;affect&nbsp;Memcheck.&nbsp;&nbsp;Memcheck&nbsp;is&nbsp;also&nbsp;up&nbsp;to&nbsp;10%<br>
&nbsp;&nbsp;faster&nbsp;for&nbsp;all&nbsp;programs,&nbsp;with&nbsp;x86-linux&nbsp;seeing&nbsp;the&nbsp;largest<br>
&nbsp;&nbsp;improvement.<br>
<br>
-&nbsp;Works&nbsp;well&nbsp;on&nbsp;the&nbsp;latest&nbsp;Linux&nbsp;distros.&nbsp;&nbsp;Has&nbsp;been&nbsp;tested&nbsp;on&nbsp;Fedora<br>
&nbsp;&nbsp;Core&nbsp;8&nbsp;(x86,&nbsp;amd64,&nbsp;ppc32,&nbsp;ppc64)&nbsp;and&nbsp;openSUSE&nbsp;10.3.&nbsp;&nbsp;glibc&nbsp;2.6&nbsp;and<br>
&nbsp;&nbsp;2.7&nbsp;are&nbsp;supported.&nbsp;&nbsp;gcc-4.3&nbsp;(in&nbsp;its&nbsp;current&nbsp;pre-release&nbsp;state)&nbsp;is<br>
&nbsp;&nbsp;supported.&nbsp;&nbsp;At&nbsp;the&nbsp;same&nbsp;time,&nbsp;3.3.0&nbsp;retains&nbsp;support&nbsp;for&nbsp;older<br>
&nbsp;&nbsp;distros.<br>
<br>
-&nbsp;The&nbsp;documentation&nbsp;has&nbsp;been&nbsp;modestly&nbsp;reorganised&nbsp;with&nbsp;the&nbsp;aim&nbsp;of<br>
&nbsp;&nbsp;making&nbsp;it&nbsp;easier&nbsp;to&nbsp;find&nbsp;information&nbsp;on&nbsp;common-usage&nbsp;scenarios.<br>
&nbsp;&nbsp;Some&nbsp;advanced&nbsp;material&nbsp;has&nbsp;been&nbsp;moved&nbsp;into&nbsp;a&nbsp;new&nbsp;chapter&nbsp;in&nbsp;the&nbsp;main<br>
&nbsp;&nbsp;manual,&nbsp;so&nbsp;as&nbsp;to&nbsp;unclutter&nbsp;the&nbsp;main&nbsp;flow,&nbsp;and&nbsp;other&nbsp;tidying&nbsp;up&nbsp;has<br>
&nbsp;&nbsp;been&nbsp;done.<br>
<br>
-&nbsp;There&nbsp;is&nbsp;experimental&nbsp;support&nbsp;for&nbsp;AIX&nbsp;5.3,&nbsp;both&nbsp;32-bit&nbsp;and&nbsp;64-bit<br>
&nbsp;&nbsp;processes.&nbsp;&nbsp;You&nbsp;need&nbsp;to&nbsp;be&nbsp;running&nbsp;a&nbsp;64-bit&nbsp;kernel&nbsp;to&nbsp;use&nbsp;Valgrind<br>
&nbsp;&nbsp;on&nbsp;a&nbsp;64-bit&nbsp;executable.<br>
<br>
-&nbsp;There&nbsp;have&nbsp;been&nbsp;some&nbsp;changes&nbsp;to&nbsp;command&nbsp;line&nbsp;options,&nbsp;which&nbsp;may<br>
&nbsp;&nbsp;affect&nbsp;you:<br>
<br>
&nbsp;&nbsp;*&nbsp;--log-file-exactly&nbsp;and&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;--log-file-qualifier&nbsp;options&nbsp;have&nbsp;been&nbsp;removed.<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;make&nbsp;up&nbsp;for&nbsp;this&nbsp;--log-file&nbsp;option&nbsp;has&nbsp;been&nbsp;made&nbsp;more&nbsp;powerful.<br>
&nbsp;&nbsp;&nbsp;&nbsp;It&nbsp;now&nbsp;accepts&nbsp;a&nbsp;%p&nbsp;format&nbsp;specifier,&nbsp;which&nbsp;is&nbsp;replaced&nbsp;with&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;process&nbsp;ID,&nbsp;and&nbsp;a&nbsp;%q{FOO}&nbsp;format&nbsp;specifier,&nbsp;which&nbsp;is&nbsp;replaced&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;contents&nbsp;of&nbsp;the&nbsp;environment&nbsp;variable&nbsp;FOO.<br>
<br>
&nbsp;&nbsp;*&nbsp;--child-silent-after-fork=yes|no&nbsp;[no]<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;Causes&nbsp;Valgrind&nbsp;to&nbsp;not&nbsp;show&nbsp;any&nbsp;debugging&nbsp;or&nbsp;logging&nbsp;output&nbsp;for<br>
&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;child&nbsp;process&nbsp;resulting&nbsp;from&nbsp;a&nbsp;fork()&nbsp;call.&nbsp;&nbsp;This&nbsp;can&nbsp;make&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;output&nbsp;less&nbsp;confusing&nbsp;(although&nbsp;more&nbsp;misleading)&nbsp;when&nbsp;dealing&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;processes&nbsp;that&nbsp;create&nbsp;children.<br>
<br>
&nbsp;&nbsp;*&nbsp;--cachegrind-out-file,&nbsp;--callgrind-out-file&nbsp;and&nbsp;--massif-out-file<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;These&nbsp;control&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;output&nbsp;files&nbsp;produced&nbsp;by<br>
&nbsp;&nbsp;&nbsp;&nbsp;Cachegrind,&nbsp;Callgrind&nbsp;and&nbsp;Massif.&nbsp;&nbsp;They&nbsp;accept&nbsp;the&nbsp;same&nbsp;%p&nbsp;and&nbsp;%q<br>
&nbsp;&nbsp;&nbsp;&nbsp;format&nbsp;specifiers&nbsp;that&nbsp;--log-file&nbsp;accepts.&nbsp;&nbsp;--callgrind-out-file<br>
&nbsp;&nbsp;&nbsp;&nbsp;replaces&nbsp;Callgrind's&nbsp;old&nbsp;--base&nbsp;option.<br>
<br>
&nbsp;&nbsp;*&nbsp;Cachegrind's&nbsp;'cg_annotate'&nbsp;script&nbsp;no&nbsp;longer&nbsp;uses&nbsp;the&nbsp;--&lt;pid&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;option&nbsp;to&nbsp;specify&nbsp;the&nbsp;output&nbsp;file.&nbsp;&nbsp;Instead,&nbsp;the&nbsp;first&nbsp;non-option<br>
&nbsp;&nbsp;&nbsp;&nbsp;argument&nbsp;is&nbsp;taken&nbsp;to&nbsp;be&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;output&nbsp;file,&nbsp;and&nbsp;any<br>
&nbsp;&nbsp;&nbsp;&nbsp;subsequent&nbsp;non-option&nbsp;arguments&nbsp;are&nbsp;taken&nbsp;to&nbsp;be&nbsp;the&nbsp;names&nbsp;of<br>
&nbsp;&nbsp;&nbsp;&nbsp;source&nbsp;files&nbsp;to&nbsp;be&nbsp;annotated.<br>
<br>
&nbsp;&nbsp;*&nbsp;Cachegrind&nbsp;and&nbsp;Callgrind&nbsp;now&nbsp;use&nbsp;directory&nbsp;names&nbsp;where&nbsp;possible&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;their&nbsp;output&nbsp;files.&nbsp;&nbsp;This&nbsp;means&nbsp;that&nbsp;the&nbsp;-I&nbsp;option&nbsp;to<br>
&nbsp;&nbsp;&nbsp;&nbsp;'cg_annotate'&nbsp;and&nbsp;'callgrind_annotate'&nbsp;should&nbsp;not&nbsp;be&nbsp;needed&nbsp;in<br>
&nbsp;&nbsp;&nbsp;&nbsp;most&nbsp;cases.&nbsp;&nbsp;It&nbsp;also&nbsp;means&nbsp;they&nbsp;can&nbsp;correctly&nbsp;handle&nbsp;the&nbsp;case<br>
&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;two&nbsp;source&nbsp;files&nbsp;in&nbsp;different&nbsp;directories&nbsp;have&nbsp;the&nbsp;same<br>
&nbsp;&nbsp;&nbsp;&nbsp;name.<br>
<br>
-&nbsp;Memcheck&nbsp;offers&nbsp;a&nbsp;new&nbsp;suppression&nbsp;kind:&nbsp;"Jump".&nbsp;&nbsp;This&nbsp;is&nbsp;for<br>
&nbsp;&nbsp;suppressing&nbsp;jump-to-invalid-address&nbsp;errors.&nbsp;&nbsp;Previously&nbsp;you&nbsp;had&nbsp;to<br>
&nbsp;&nbsp;use&nbsp;an&nbsp;"Addr1"&nbsp;suppression,&nbsp;which&nbsp;didn't&nbsp;make&nbsp;much&nbsp;sense.<br>
<br>
-&nbsp;Memcheck&nbsp;has&nbsp;new&nbsp;flags&nbsp;--malloc-fill=&lt;hexnum&gt;&nbsp;and<br>
&nbsp;&nbsp;--free-fill=&lt;hexnum&gt;&nbsp;which&nbsp;free&nbsp;malloc'd&nbsp;/&nbsp;free'd&nbsp;areas&nbsp;with&nbsp;the<br>
&nbsp;&nbsp;specified&nbsp;byte.&nbsp;&nbsp;This&nbsp;can&nbsp;help&nbsp;shake&nbsp;out&nbsp;obscure&nbsp;memory&nbsp;corruption<br>
&nbsp;&nbsp;problems.&nbsp;&nbsp;The&nbsp;definedness&nbsp;and&nbsp;addressability&nbsp;of&nbsp;these&nbsp;areas&nbsp;is<br>
&nbsp;&nbsp;unchanged&nbsp;--&nbsp;only&nbsp;the&nbsp;contents&nbsp;are&nbsp;affected.<br>
<br>
-&nbsp;The&nbsp;behaviour&nbsp;of&nbsp;Memcheck's&nbsp;client&nbsp;requests&nbsp;VALGRIND_GET_VBITS&nbsp;and<br>
&nbsp;&nbsp;VALGRIND_SET_VBITS&nbsp;have&nbsp;changed&nbsp;slightly.&nbsp;&nbsp;They&nbsp;no&nbsp;longer&nbsp;issue<br>
&nbsp;&nbsp;addressability&nbsp;errors&nbsp;--&nbsp;if&nbsp;either&nbsp;array&nbsp;is&nbsp;partially&nbsp;unaddressable,<br>
&nbsp;&nbsp;they&nbsp;just&nbsp;return&nbsp;3&nbsp;(as&nbsp;before).&nbsp;&nbsp;Also,&nbsp;SET_VBITS&nbsp;doesn't&nbsp;report<br>
&nbsp;&nbsp;definedness&nbsp;errors&nbsp;if&nbsp;any&nbsp;of&nbsp;the&nbsp;V&nbsp;bits&nbsp;are&nbsp;undefined.<br>
<br>
-&nbsp;The&nbsp;following&nbsp;Memcheck&nbsp;client&nbsp;requests&nbsp;have&nbsp;been&nbsp;removed:<br>
&nbsp;&nbsp;&nbsp;&nbsp;VALGRIND_MAKE_NOACCESS<br>
&nbsp;&nbsp;&nbsp;&nbsp;VALGRIND_MAKE_WRITABLE<br>
&nbsp;&nbsp;&nbsp;&nbsp;VALGRIND_MAKE_READABLE<br>
&nbsp;&nbsp;&nbsp;&nbsp;VALGRIND_CHECK_WRITABLE<br>
&nbsp;&nbsp;&nbsp;&nbsp;VALGRIND_CHECK_READABLE<br>
&nbsp;&nbsp;&nbsp;&nbsp;VALGRIND_CHECK_DEFINED<br>
&nbsp;&nbsp;They&nbsp;were&nbsp;deprecated&nbsp;in&nbsp;3.2.0,&nbsp;when&nbsp;equivalent&nbsp;but&nbsp;better-named&nbsp;client<br>
&nbsp;&nbsp;requests&nbsp;were&nbsp;added.&nbsp;&nbsp;See&nbsp;the&nbsp;3.2.0&nbsp;release&nbsp;notes&nbsp;for&nbsp;more&nbsp;details.<br>
<br>
-&nbsp;The&nbsp;behaviour&nbsp;of&nbsp;the&nbsp;tool&nbsp;Lackey&nbsp;has&nbsp;changed&nbsp;slightly.&nbsp;&nbsp;First,&nbsp;the&nbsp;output<br>
&nbsp;&nbsp;from&nbsp;--trace-mem&nbsp;has&nbsp;been&nbsp;made&nbsp;more&nbsp;compact,&nbsp;to&nbsp;reduce&nbsp;the&nbsp;size&nbsp;of&nbsp;the<br>
&nbsp;&nbsp;traces.&nbsp;&nbsp;Second,&nbsp;a&nbsp;new&nbsp;option&nbsp;--trace-superblocks&nbsp;has&nbsp;been&nbsp;added,&nbsp;which<br>
&nbsp;&nbsp;shows&nbsp;the&nbsp;addresses&nbsp;of&nbsp;superblocks&nbsp;(code&nbsp;blocks)&nbsp;as&nbsp;they&nbsp;are&nbsp;executed.<br>
<br>
-&nbsp;The&nbsp;following&nbsp;bugs&nbsp;have&nbsp;been&nbsp;fixed.&nbsp;&nbsp;Note&nbsp;that&nbsp;"n-i-bz"&nbsp;stands&nbsp;for<br>
&nbsp;&nbsp;"not&nbsp;in&nbsp;bugzilla"&nbsp;--&nbsp;that&nbsp;is,&nbsp;a&nbsp;bug&nbsp;that&nbsp;was&nbsp;reported&nbsp;to&nbsp;us&nbsp;but<br>
&nbsp;&nbsp;never&nbsp;got&nbsp;a&nbsp;bugzilla&nbsp;entry.&nbsp;&nbsp;We&nbsp;encourage&nbsp;you&nbsp;to&nbsp;file&nbsp;bugs&nbsp;in<br>
&nbsp;&nbsp;bugzilla&nbsp;(http://bugs.kde.org/enter_valgrind_bug.cgi)&nbsp;rather&nbsp;than<br>
&nbsp;&nbsp;mailing&nbsp;the&nbsp;developers&nbsp;(or&nbsp;mailing&nbsp;lists)&nbsp;directly.<br>
<br>
&nbsp;&nbsp;n-i-bz&nbsp;&nbsp;x86_linux_REDIR_FOR_index()&nbsp;broken<br>
&nbsp;&nbsp;n-i-bz&nbsp;&nbsp;guest-amd64/toIR.c:2512&nbsp;(dis_op2_E_G):&nbsp;Assertion&nbsp;`0'&nbsp;failed.<br>
&nbsp;&nbsp;n-i-bz&nbsp;&nbsp;Support&nbsp;x86&nbsp;INT&nbsp;insn&nbsp;(INT&nbsp;(0xCD)&nbsp;0x40&nbsp;-&nbsp;0x43)<br>
&nbsp;&nbsp;n-i-bz&nbsp;&nbsp;Add&nbsp;sys_utimensat&nbsp;system&nbsp;call&nbsp;for&nbsp;Linux&nbsp;x86&nbsp;platform<br>
&nbsp;&nbsp;&nbsp;79844&nbsp;&nbsp;Helgrind&nbsp;complains&nbsp;about&nbsp;race&nbsp;condition&nbsp;which&nbsp;does&nbsp;not&nbsp;exist<br>
&nbsp;&nbsp;&nbsp;82871&nbsp;&nbsp;Massif&nbsp;output&nbsp;function&nbsp;names&nbsp;too&nbsp;short<br>
&nbsp;&nbsp;&nbsp;89061&nbsp;&nbsp;Massif:&nbsp;ms_main.c:485&nbsp;(get_XCon):&nbsp;Assertion&nbsp;`xpt-&gt;max_chi...'<br>
&nbsp;&nbsp;&nbsp;92615&nbsp;&nbsp;Write&nbsp;output&nbsp;from&nbsp;Massif&nbsp;at&nbsp;crash<br>
&nbsp;&nbsp;&nbsp;95483&nbsp;&nbsp;massif&nbsp;feature&nbsp;request:&nbsp;include&nbsp;peak&nbsp;allocation&nbsp;in&nbsp;report<br>
&nbsp;&nbsp;112163&nbsp;&nbsp;MASSIF&nbsp;crashed&nbsp;with&nbsp;signal&nbsp;7&nbsp;(SIGBUS)&nbsp;after&nbsp;running&nbsp;2&nbsp;days<br>
&nbsp;&nbsp;119404&nbsp;&nbsp;problems&nbsp;running&nbsp;setuid&nbsp;executables&nbsp;(partial&nbsp;fix)<br>
&nbsp;&nbsp;121629&nbsp;&nbsp;add&nbsp;instruction-counting&nbsp;mode&nbsp;for&nbsp;timing<br>
&nbsp;&nbsp;127371&nbsp;&nbsp;java&nbsp;vm&nbsp;giving&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0x26&nbsp;0x2E&nbsp;0x64&nbsp;0x65<br>
&nbsp;&nbsp;129937&nbsp;&nbsp;==150380<br>
&nbsp;&nbsp;129576&nbsp;&nbsp;Massif&nbsp;loses&nbsp;track&nbsp;of&nbsp;memory,&nbsp;incorrect&nbsp;graphs<br>
&nbsp;&nbsp;132132&nbsp;&nbsp;massif&nbsp;--format=html&nbsp;output&nbsp;does&nbsp;not&nbsp;do&nbsp;html&nbsp;entity&nbsp;escaping<br>
&nbsp;&nbsp;132950&nbsp;&nbsp;Heap&nbsp;alloc/usage&nbsp;summary<br>
&nbsp;&nbsp;133962&nbsp;&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0xF2&nbsp;0x4C&nbsp;0xF&nbsp;0x10<br>
&nbsp;&nbsp;134990&nbsp;&nbsp;use&nbsp;-fno-stack-protector&nbsp;if&nbsp;possible<br>
&nbsp;&nbsp;136382&nbsp;&nbsp;==134990<br>
&nbsp;&nbsp;137396&nbsp;&nbsp;I&nbsp;would&nbsp;really&nbsp;like&nbsp;helgrind&nbsp;to&nbsp;work&nbsp;again...<br>
&nbsp;&nbsp;137714&nbsp;&nbsp;x86/amd64-&gt;IR:&nbsp;0x66&nbsp;0xF&nbsp;0xF7&nbsp;0xC6&nbsp;(maskmovq,&nbsp;maskmovdq)<br>
&nbsp;&nbsp;141631&nbsp;&nbsp;Massif:&nbsp;percentages&nbsp;don't&nbsp;add&nbsp;up&nbsp;correctly<br>
&nbsp;&nbsp;142706&nbsp;&nbsp;massif&nbsp;numbers&nbsp;don't&nbsp;seem&nbsp;to&nbsp;add&nbsp;up<br>
&nbsp;&nbsp;143062&nbsp;&nbsp;massif&nbsp;crashes&nbsp;on&nbsp;app&nbsp;exit&nbsp;with&nbsp;signal&nbsp;8&nbsp;SIGFPE<br>
&nbsp;&nbsp;144453&nbsp;&nbsp;(get_XCon):&nbsp;Assertion&nbsp;'xpt-&gt;max_children&nbsp;!=&nbsp;0'&nbsp;failed.<br>
&nbsp;&nbsp;145559&nbsp;&nbsp;valgrind&nbsp;aborts&nbsp;when&nbsp;malloc_stats&nbsp;is&nbsp;called<br>
&nbsp;&nbsp;145609&nbsp;&nbsp;valgrind&nbsp;aborts&nbsp;all&nbsp;runs&nbsp;with&nbsp;'repeated&nbsp;section!'<br>
&nbsp;&nbsp;145622&nbsp;&nbsp;--db-attach&nbsp;broken&nbsp;again&nbsp;on&nbsp;x86-64<br>
&nbsp;&nbsp;145837&nbsp;&nbsp;==149519<br>
&nbsp;&nbsp;145887&nbsp;&nbsp;PPC32:&nbsp;getitimer()&nbsp;system&nbsp;call&nbsp;is&nbsp;not&nbsp;supported<br>
&nbsp;&nbsp;146252&nbsp;&nbsp;==150678<br>
&nbsp;&nbsp;146456&nbsp;&nbsp;(update_XCon):&nbsp;Assertion&nbsp;'xpt-&gt;curr_space&nbsp;&gt;=&nbsp;-space_delta'...<br>
&nbsp;&nbsp;146701&nbsp;&nbsp;==134990<br>
&nbsp;&nbsp;146781&nbsp;&nbsp;Adding&nbsp;support&nbsp;for&nbsp;private&nbsp;futexes<br>
&nbsp;&nbsp;147325&nbsp;&nbsp;valgrind&nbsp;internal&nbsp;error&nbsp;on&nbsp;syscall&nbsp;(SYS_io_destroy,&nbsp;0)<br>
&nbsp;&nbsp;147498&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xF0&nbsp;0xF&nbsp;0xB0&nbsp;0xF&nbsp;(lock&nbsp;cmpxchg&nbsp;%cl,(%rdi))<br>
&nbsp;&nbsp;147545&nbsp;&nbsp;Memcheck:&nbsp;mc_main.c:817&nbsp;(get_sec_vbits8):&nbsp;Assertion&nbsp;'n'&nbsp;failed.<br>
&nbsp;&nbsp;147628&nbsp;&nbsp;SALC&nbsp;opcode&nbsp;0xd6&nbsp;unimplemented<br>
&nbsp;&nbsp;147825&nbsp;&nbsp;crash&nbsp;on&nbsp;amd64-linux&nbsp;with&nbsp;gcc&nbsp;4.2&nbsp;and&nbsp;glibc&nbsp;2.6&nbsp;(CFI)<br>
&nbsp;&nbsp;148174&nbsp;&nbsp;Incorrect&nbsp;type&nbsp;of&nbsp;freed_list_volume&nbsp;causes&nbsp;assertion&nbsp;[...]<br>
&nbsp;&nbsp;148447&nbsp;&nbsp;x86_64&nbsp;:&nbsp;new&nbsp;NOP&nbsp;codes:&nbsp;66&nbsp;66&nbsp;66&nbsp;66&nbsp;2e&nbsp;0f&nbsp;1f<br>
&nbsp;&nbsp;149182&nbsp;&nbsp;PPC&nbsp;Trap&nbsp;instructions&nbsp;not&nbsp;implemented&nbsp;in&nbsp;valgrind<br>
&nbsp;&nbsp;149504&nbsp;&nbsp;Assertion&nbsp;hit&nbsp;on&nbsp;alloc_xpt-&gt;curr_space&nbsp;&gt;=&nbsp;-space_delta<br>
&nbsp;&nbsp;149519&nbsp;&nbsp;ppc32:&nbsp;V&nbsp;aborts&nbsp;with&nbsp;SIGSEGV&nbsp;on&nbsp;execution&nbsp;of&nbsp;a&nbsp;signal&nbsp;handler<br>
&nbsp;&nbsp;149892&nbsp;&nbsp;==137714<br>
&nbsp;&nbsp;150044&nbsp;&nbsp;SEGV&nbsp;during&nbsp;stack&nbsp;deregister<br>
&nbsp;&nbsp;150380&nbsp;&nbsp;dwarf/gcc&nbsp;interoperation&nbsp;(dwarf3&nbsp;read&nbsp;problems)<br>
&nbsp;&nbsp;150408&nbsp;&nbsp;==148447<br>
&nbsp;&nbsp;150678&nbsp;&nbsp;guest-amd64/toIR.c:3741&nbsp;(dis_Grp5):&nbsp;Assertion&nbsp;`sz&nbsp;==&nbsp;4'&nbsp;failed<br>
&nbsp;&nbsp;151209&nbsp;&nbsp;V&nbsp;unable&nbsp;to&nbsp;execute&nbsp;programs&nbsp;for&nbsp;users&nbsp;with&nbsp;UID&nbsp;&gt;&nbsp;2^16<br>
&nbsp;&nbsp;151938&nbsp;&nbsp;help&nbsp;on&nbsp;--db-command=&nbsp;misleading<br>
&nbsp;&nbsp;152022&nbsp;&nbsp;subw&nbsp;$0x28,&nbsp;%%sp&nbsp;causes&nbsp;assertion&nbsp;failure&nbsp;in&nbsp;memcheck<br>
&nbsp;&nbsp;152357&nbsp;&nbsp;inb&nbsp;and&nbsp;outb&nbsp;not&nbsp;recognized&nbsp;in&nbsp;64-bit&nbsp;mode<br>
&nbsp;&nbsp;152501&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0x27&nbsp;0x66&nbsp;0x89&nbsp;0x45&nbsp;(daa)&nbsp;<br>
&nbsp;&nbsp;152818&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF3&nbsp;0xAC&nbsp;0xFC&nbsp;0x9C&nbsp;(rep&nbsp;lodsb)<br>
<br>
Developer-visible&nbsp;changes:<br>
<br>
-&nbsp;The&nbsp;names&nbsp;of&nbsp;some&nbsp;functions&nbsp;and&nbsp;types&nbsp;within&nbsp;the&nbsp;Vex&nbsp;IR&nbsp;have<br>
&nbsp;&nbsp;changed.&nbsp;&nbsp;Run&nbsp;'svn&nbsp;log&nbsp;-r1689&nbsp;VEX/pub/libvex_ir.h'&nbsp;for&nbsp;full&nbsp;details.<br>
&nbsp;&nbsp;Any&nbsp;existing&nbsp;standalone&nbsp;tools&nbsp;will&nbsp;have&nbsp;to&nbsp;be&nbsp;updated&nbsp;to&nbsp;reflect<br>
&nbsp;&nbsp;these&nbsp;changes.&nbsp;&nbsp;The&nbsp;new&nbsp;names&nbsp;should&nbsp;be&nbsp;clearer.&nbsp;&nbsp;The&nbsp;file<br>
&nbsp;&nbsp;VEX/pub/libvex_ir.h&nbsp;is&nbsp;also&nbsp;much&nbsp;better&nbsp;commented.<br>
<br>
-&nbsp;A&nbsp;number&nbsp;of&nbsp;new&nbsp;debugging&nbsp;command&nbsp;line&nbsp;options&nbsp;have&nbsp;been&nbsp;added.<br>
&nbsp;&nbsp;These&nbsp;are&nbsp;mostly&nbsp;of&nbsp;use&nbsp;for&nbsp;debugging&nbsp;the&nbsp;symbol&nbsp;table&nbsp;and&nbsp;line<br>
&nbsp;&nbsp;number&nbsp;readers:<br>
<br>
&nbsp;&nbsp;--trace-symtab-patt=&lt;patt&gt;&nbsp;limit&nbsp;debuginfo&nbsp;tracing&nbsp;to&nbsp;obj&nbsp;name&nbsp;&lt;patt&gt;<br>
&nbsp;&nbsp;--trace-cfi=no|yes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show&nbsp;call-frame-info&nbsp;details?&nbsp;[no]<br>
&nbsp;&nbsp;--debug-dump=syms&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mimic&nbsp;/usr/bin/readelf&nbsp;--syms<br>
&nbsp;&nbsp;--debug-dump=line&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mimic&nbsp;/usr/bin/readelf&nbsp;--debug-dump=line<br>
&nbsp;&nbsp;--debug-dump=frames&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mimic&nbsp;/usr/bin/readelf&nbsp;--debug-dump=frames<br>
&nbsp;&nbsp;--sym-offsets=yes|no&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;show&nbsp;syms&nbsp;in&nbsp;form&nbsp;'name+offset'&nbsp;?&nbsp;[no]<br>
<br>
-&nbsp;Internally,&nbsp;the&nbsp;code&nbsp;base&nbsp;has&nbsp;been&nbsp;further&nbsp;factorised&nbsp;and<br>
&nbsp;&nbsp;abstractified,&nbsp;particularly&nbsp;with&nbsp;respect&nbsp;to&nbsp;support&nbsp;for&nbsp;non-Linux<br>
&nbsp;&nbsp;OSs.<br>
<br>
(3.3.0.RC1:&nbsp;&nbsp;2&nbsp;Dec&nbsp;2007,&nbsp;vex&nbsp;r1803,&nbsp;valgrind&nbsp;r7268).<br>
(3.3.0.RC2:&nbsp;&nbsp;5&nbsp;Dec&nbsp;2007,&nbsp;vex&nbsp;r1804,&nbsp;valgrind&nbsp;r7282).<br>
(3.3.0.RC3:&nbsp;&nbsp;9&nbsp;Dec&nbsp;2007,&nbsp;vex&nbsp;r1804,&nbsp;valgrind&nbsp;r7288).<br>
(3.3.0:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;10&nbsp;Dec&nbsp;2007,&nbsp;vex&nbsp;r1804,&nbsp;valgrind&nbsp;r7290).<br>
<br>
<br>
<br>
Release&nbsp;3.2.3&nbsp;(29&nbsp;Jan&nbsp;2007)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
Unfortunately&nbsp;3.2.2&nbsp;introduced&nbsp;a&nbsp;regression&nbsp;which&nbsp;can&nbsp;cause&nbsp;an<br>
assertion&nbsp;failure&nbsp;("vex:&nbsp;the&nbsp;`impossible'&nbsp;happened:&nbsp;eqIRConst")&nbsp;when<br>
running&nbsp;obscure&nbsp;pieces&nbsp;of&nbsp;SSE&nbsp;code.&nbsp;&nbsp;3.2.3&nbsp;fixes&nbsp;this&nbsp;and&nbsp;adds&nbsp;one<br>
more&nbsp;glibc-2.5&nbsp;intercept.&nbsp;&nbsp;In&nbsp;all&nbsp;other&nbsp;respects&nbsp;it&nbsp;is&nbsp;identical&nbsp;to<br>
3.2.2.&nbsp;&nbsp;Please&nbsp;do&nbsp;not&nbsp;use&nbsp;(or&nbsp;package)&nbsp;3.2.2;&nbsp;instead&nbsp;use&nbsp;3.2.3.<br>
<br>
n-i-bz&nbsp;&nbsp;&nbsp;vex:&nbsp;the&nbsp;`impossible'&nbsp;happened:&nbsp;eqIRConst<br>
n-i-bz&nbsp;&nbsp;&nbsp;Add&nbsp;an&nbsp;intercept&nbsp;for&nbsp;glibc-2.5&nbsp;__stpcpy_chk<br>
<br>
(3.2.3:&nbsp;29&nbsp;Jan&nbsp;2007,&nbsp;vex&nbsp;r1732,&nbsp;valgrind&nbsp;r6560).<br>
<br>
<br>
Release&nbsp;3.2.2&nbsp;(22&nbsp;Jan&nbsp;2007)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.2.2&nbsp;fixes&nbsp;a&nbsp;bunch&nbsp;of&nbsp;bugs&nbsp;in&nbsp;3.2.1,&nbsp;adds&nbsp;support&nbsp;for&nbsp;glibc-2.5&nbsp;based<br>
systems&nbsp;(openSUSE&nbsp;10.2,&nbsp;Fedora&nbsp;Core&nbsp;6),&nbsp;improves&nbsp;support&nbsp;for&nbsp;icc-9.X<br>
compiled&nbsp;code,&nbsp;and&nbsp;brings&nbsp;modest&nbsp;performance&nbsp;improvements&nbsp;in&nbsp;some<br>
areas,&nbsp;including&nbsp;amd64&nbsp;floating&nbsp;point,&nbsp;powerpc&nbsp;support,&nbsp;and&nbsp;startup<br>
responsiveness&nbsp;on&nbsp;all&nbsp;targets.<br>
<br>
The&nbsp;fixed&nbsp;bugs&nbsp;are&nbsp;as&nbsp;follows.&nbsp;&nbsp;Note&nbsp;that&nbsp;"n-i-bz"&nbsp;stands&nbsp;for&nbsp;"not&nbsp;in<br>
bugzilla"&nbsp;--&nbsp;that&nbsp;is,&nbsp;a&nbsp;bug&nbsp;that&nbsp;was&nbsp;reported&nbsp;to&nbsp;us&nbsp;but&nbsp;never&nbsp;got&nbsp;a<br>
bugzilla&nbsp;entry.&nbsp;&nbsp;We&nbsp;encourage&nbsp;you&nbsp;to&nbsp;file&nbsp;bugs&nbsp;in&nbsp;bugzilla<br>
(http://bugs.kde.org/enter_valgrind_bug.cgi)&nbsp;rather&nbsp;than&nbsp;mailing&nbsp;the<br>
developers&nbsp;(or&nbsp;mailing&nbsp;lists)&nbsp;directly.<br>
<br>
129390&nbsp;&nbsp;&nbsp;ppc?-&gt;IR:&nbsp;some&nbsp;kind&nbsp;of&nbsp;VMX&nbsp;prefetch&nbsp;(dstt)<br>
129968&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xF&nbsp;0xAE&nbsp;0x0&nbsp;(fxsave)<br>
134319&nbsp;&nbsp;&nbsp;==129968<br>
133054&nbsp;&nbsp;&nbsp;'make&nbsp;install'&nbsp;fails&nbsp;with&nbsp;syntax&nbsp;errors<br>
118903&nbsp;&nbsp;&nbsp;==133054<br>
132998&nbsp;&nbsp;&nbsp;startup&nbsp;fails&nbsp;in&nbsp;when&nbsp;running&nbsp;on&nbsp;UML<br>
134207&nbsp;&nbsp;&nbsp;pkg-config&nbsp;output&nbsp;contains&nbsp;@VG_PLATFORM@<br>
134727&nbsp;&nbsp;&nbsp;valgrind&nbsp;exits&nbsp;with&nbsp;"Value&nbsp;too&nbsp;large&nbsp;for&nbsp;defined&nbsp;data&nbsp;type"<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32/64:&nbsp;support&nbsp;mcrfs<br>
n-i-bz&nbsp;&nbsp;&nbsp;Cachegrind/Callgrind:&nbsp;Update&nbsp;cache&nbsp;parameter&nbsp;detection<br>
135012&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;0xD7&nbsp;0x8A&nbsp;0xE0&nbsp;0xD0&nbsp;(xlat)<br>
125959&nbsp;&nbsp;&nbsp;==135012<br>
126147&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;0xF2&nbsp;0xA5&nbsp;0xF&nbsp;0x77&nbsp;(repne&nbsp;movsw)<br>
136650&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xC2&nbsp;0x8&nbsp;0x0<br>
135421&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;unhandled&nbsp;Grp5(R)&nbsp;case&nbsp;6<br>
n-i-bz&nbsp;&nbsp;&nbsp;Improved&nbsp;documentation&nbsp;of&nbsp;the&nbsp;IR&nbsp;intermediate&nbsp;representation<br>
n-i-bz&nbsp;&nbsp;&nbsp;jcxz&nbsp;(x86)&nbsp;(users&nbsp;list,&nbsp;8&nbsp;Nov)<br>
n-i-bz&nbsp;&nbsp;&nbsp;ExeContext&nbsp;hashing&nbsp;fix<br>
n-i-bz&nbsp;&nbsp;&nbsp;fix&nbsp;CFI&nbsp;reading&nbsp;failures&nbsp;("Dwarf&nbsp;CFI&nbsp;0:24&nbsp;0:32&nbsp;0:48&nbsp;0:7")<br>
n-i-bz&nbsp;&nbsp;&nbsp;fix&nbsp;Cachegrind/Callgrind&nbsp;simulation&nbsp;bug<br>
n-i-bz&nbsp;&nbsp;&nbsp;libmpiwrap.c:&nbsp;fix&nbsp;handling&nbsp;of&nbsp;MPI_LONG_DOUBLE<br>
n-i-bz&nbsp;&nbsp;&nbsp;make&nbsp;User&nbsp;errors&nbsp;suppressible<br>
136844&nbsp;&nbsp;&nbsp;corrupted&nbsp;malloc&nbsp;line&nbsp;when&nbsp;using&nbsp;--gen-suppressions=yes<br>
138507&nbsp;&nbsp;&nbsp;==136844<br>
n-i-bz&nbsp;&nbsp;&nbsp;Speed&nbsp;up&nbsp;the&nbsp;JIT's&nbsp;register&nbsp;allocator<br>
n-i-bz&nbsp;&nbsp;&nbsp;Fix&nbsp;confusing&nbsp;leak-checker&nbsp;flag&nbsp;hints<br>
n-i-bz&nbsp;&nbsp;&nbsp;Support&nbsp;recent&nbsp;autoswamp&nbsp;versions<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32/64&nbsp;dispatcher&nbsp;speedups<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc64&nbsp;front&nbsp;end&nbsp;rld/rlw&nbsp;improvements<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc64&nbsp;back&nbsp;end&nbsp;imm64&nbsp;improvements<br>
136300&nbsp;&nbsp;&nbsp;support&nbsp;64K&nbsp;pages&nbsp;on&nbsp;ppc64-linux<br>
139124&nbsp;&nbsp;&nbsp;==&nbsp;136300<br>
n-i-bz&nbsp;&nbsp;&nbsp;fix&nbsp;ppc&nbsp;insn&nbsp;set&nbsp;tests&nbsp;for&nbsp;gcc&nbsp;&gt;=&nbsp;4.1<br>
137493&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;recent&nbsp;binutils&nbsp;no-ops<br>
137714&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;0x66&nbsp;0xF&nbsp;0xF7&nbsp;0xC6&nbsp;(maskmovdqu)<br>
138424&nbsp;&nbsp;&nbsp;"failed&nbsp;in&nbsp;UME&nbsp;with&nbsp;error&nbsp;22"&nbsp;(produce&nbsp;a&nbsp;better&nbsp;error&nbsp;msg)<br>
138856&nbsp;&nbsp;&nbsp;==138424<br>
138627&nbsp;&nbsp;&nbsp;Enhancement&nbsp;support&nbsp;for&nbsp;prctl&nbsp;ioctls<br>
138896&nbsp;&nbsp;&nbsp;Add&nbsp;support&nbsp;for&nbsp;usb&nbsp;ioctls<br>
136059&nbsp;&nbsp;&nbsp;==138896<br>
139050&nbsp;&nbsp;&nbsp;ppc32-&gt;IR:&nbsp;mfspr&nbsp;268/269&nbsp;instructions&nbsp;not&nbsp;handled<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32-&gt;IR:&nbsp;lvxl/stvxl<br>
n-i-bz&nbsp;&nbsp;&nbsp;glibc-2.5&nbsp;support<br>
n-i-bz&nbsp;&nbsp;&nbsp;memcheck:&nbsp;provide&nbsp;replacement&nbsp;for&nbsp;mempcpy<br>
n-i-bz&nbsp;&nbsp;&nbsp;memcheck:&nbsp;replace&nbsp;bcmp&nbsp;in&nbsp;ld.so<br>
n-i-bz&nbsp;&nbsp;&nbsp;Use&nbsp;'ifndef'&nbsp;in&nbsp;VEX's&nbsp;Makefile&nbsp;correctly<br>
n-i-bz&nbsp;&nbsp;&nbsp;Suppressions&nbsp;for&nbsp;MVL&nbsp;4.0.1&nbsp;on&nbsp;ppc32-linux<br>
n-i-bz&nbsp;&nbsp;&nbsp;libmpiwrap.c:&nbsp;Fixes&nbsp;for&nbsp;MPICH<br>
n-i-bz&nbsp;&nbsp;&nbsp;More&nbsp;robust&nbsp;handling&nbsp;of&nbsp;hinted&nbsp;client&nbsp;mmaps<br>
139776&nbsp;&nbsp;&nbsp;Invalid&nbsp;read&nbsp;in&nbsp;unaligned&nbsp;memcpy&nbsp;with&nbsp;Intel&nbsp;compiler&nbsp;v9<br>
n-i-bz&nbsp;&nbsp;&nbsp;Generate&nbsp;valid&nbsp;XML&nbsp;even&nbsp;for&nbsp;very&nbsp;long&nbsp;fn&nbsp;names<br>
n-i-bz&nbsp;&nbsp;&nbsp;Don't&nbsp;prompt&nbsp;about&nbsp;suppressions&nbsp;for&nbsp;unshown&nbsp;reachable&nbsp;leaks<br>
139910&nbsp;&nbsp;&nbsp;amd64&nbsp;rcl&nbsp;is&nbsp;not&nbsp;supported<br>
n-i-bz&nbsp;&nbsp;&nbsp;DWARF&nbsp;CFI&nbsp;reader:&nbsp;handle&nbsp;DW_CFA_undefined<br>
n-i-bz&nbsp;&nbsp;&nbsp;DWARF&nbsp;CFI&nbsp;reader:&nbsp;handle&nbsp;icc9&nbsp;generated&nbsp;CFI&nbsp;info&nbsp;better<br>
n-i-bz&nbsp;&nbsp;&nbsp;fix&nbsp;false&nbsp;uninit-value&nbsp;errs&nbsp;in&nbsp;icc9&nbsp;generated&nbsp;FP&nbsp;code<br>
n-i-bz&nbsp;&nbsp;&nbsp;reduce&nbsp;extraneous&nbsp;frames&nbsp;in&nbsp;libmpiwrap.c<br>
n-i-bz&nbsp;&nbsp;&nbsp;support&nbsp;pselect6&nbsp;on&nbsp;amd64-linux<br>
<br>
(3.2.2:&nbsp;22&nbsp;Jan&nbsp;2007,&nbsp;vex&nbsp;r1729,&nbsp;valgrind&nbsp;r6545).<br>
<br>
<br>
Release&nbsp;3.2.1&nbsp;(16&nbsp;Sept&nbsp;2006)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.2.1&nbsp;adds&nbsp;x86/amd64&nbsp;support&nbsp;for&nbsp;all&nbsp;SSE3&nbsp;instructions&nbsp;except&nbsp;monitor<br>
and&nbsp;mwait,&nbsp;further&nbsp;reduces&nbsp;memcheck's&nbsp;false&nbsp;error&nbsp;rate&nbsp;on&nbsp;all<br>
platforms,&nbsp;adds&nbsp;support&nbsp;for&nbsp;recent&nbsp;binutils&nbsp;(in&nbsp;OpenSUSE&nbsp;10.2&nbsp;and<br>
Fedora&nbsp;Rawhide)&nbsp;and&nbsp;fixes&nbsp;a&nbsp;bunch&nbsp;of&nbsp;bugs&nbsp;in&nbsp;3.2.0.&nbsp;&nbsp;Some&nbsp;of&nbsp;the&nbsp;fixed<br>
bugs&nbsp;were&nbsp;causing&nbsp;large&nbsp;programs&nbsp;to&nbsp;segfault&nbsp;with&nbsp;--tool=callgrind&nbsp;and<br>
--tool=cachegrind,&nbsp;so&nbsp;an&nbsp;upgrade&nbsp;is&nbsp;recommended.<br>
<br>
In&nbsp;view&nbsp;of&nbsp;the&nbsp;fact&nbsp;that&nbsp;any&nbsp;3.3.0&nbsp;release&nbsp;is&nbsp;unlikely&nbsp;to&nbsp;happen&nbsp;until<br>
well&nbsp;into&nbsp;1Q07,&nbsp;we&nbsp;intend&nbsp;to&nbsp;keep&nbsp;the&nbsp;3.2.X&nbsp;line&nbsp;alive&nbsp;for&nbsp;a&nbsp;while<br>
yet,&nbsp;and&nbsp;so&nbsp;we&nbsp;tentatively&nbsp;plan&nbsp;a&nbsp;3.2.2&nbsp;release&nbsp;sometime&nbsp;in&nbsp;December<br>
06.<br>
<br>
The&nbsp;fixed&nbsp;bugs&nbsp;are&nbsp;as&nbsp;follows.&nbsp;&nbsp;Note&nbsp;that&nbsp;"n-i-bz"&nbsp;stands&nbsp;for&nbsp;"not&nbsp;in<br>
bugzilla"&nbsp;--&nbsp;that&nbsp;is,&nbsp;a&nbsp;bug&nbsp;that&nbsp;was&nbsp;reported&nbsp;to&nbsp;us&nbsp;but&nbsp;never&nbsp;got&nbsp;a<br>
bugzilla&nbsp;entry.<br>
<br>
n-i-bz&nbsp;&nbsp;&nbsp;Expanding&nbsp;brk()&nbsp;into&nbsp;last&nbsp;available&nbsp;page&nbsp;asserts<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc64-linux&nbsp;stack&nbsp;RZ&nbsp;fast-case&nbsp;snafu<br>
n-i-bz&nbsp;&nbsp;&nbsp;'c'&nbsp;in&nbsp;--gen-supps=yes&nbsp;doesn't&nbsp;work<br>
n-i-bz&nbsp;&nbsp;&nbsp;VG_N_SEGMENTS&nbsp;too&nbsp;low&nbsp;(users,&nbsp;28&nbsp;June)<br>
n-i-bz&nbsp;&nbsp;&nbsp;VG_N_SEGNAMES&nbsp;too&nbsp;low&nbsp;(Stu&nbsp;Robinson)<br>
106852&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;fisttp&nbsp;(SSE3)<br>
117172&nbsp;&nbsp;&nbsp;FUTEX_WAKE&nbsp;does&nbsp;not&nbsp;use&nbsp;uaddr2<br>
124039&nbsp;&nbsp;&nbsp;Lacks&nbsp;support&nbsp;for&nbsp;VKI_[GP]IO_UNIMAP*<br>
127521&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xF0&nbsp;0x48&nbsp;0xF&nbsp;0xC7&nbsp;(cmpxchg8b)<br>
128917&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0x66&nbsp;0xF&nbsp;0xF6&nbsp;0xC4&nbsp;(psadbw,SSE2)<br>
129246&nbsp;&nbsp;&nbsp;JJ:&nbsp;ppc32/ppc64&nbsp;syscalls,&nbsp;w/&nbsp;patch<br>
129358&nbsp;&nbsp;&nbsp;x86-&gt;IR:&nbsp;fisttpl&nbsp;(SSE3)<br>
129866&nbsp;&nbsp;&nbsp;cachegrind/callgrind&nbsp;causes&nbsp;executable&nbsp;to&nbsp;die<br>
130020&nbsp;&nbsp;&nbsp;Can't&nbsp;stat&nbsp;.so/.exe&nbsp;error&nbsp;while&nbsp;reading&nbsp;symbols<br>
130388&nbsp;&nbsp;&nbsp;Valgrind&nbsp;aborts&nbsp;when&nbsp;process&nbsp;calls&nbsp;malloc_trim()<br>
130638&nbsp;&nbsp;&nbsp;PATCH:&nbsp;ppc32&nbsp;missing&nbsp;system&nbsp;calls<br>
130785&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;unhandled&nbsp;instruction&nbsp;"pushfq"<br>
131481:&nbsp;&nbsp;(HINT_NOP)&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF&nbsp;0x1F&nbsp;0x0&nbsp;0xF<br>
131298&nbsp;&nbsp;&nbsp;==131481<br>
132146&nbsp;&nbsp;&nbsp;Programs&nbsp;with&nbsp;long&nbsp;sequences&nbsp;of&nbsp;bswap[l,q]s<br>
132918&nbsp;&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0xD9&nbsp;0xF8&nbsp;(fprem)<br>
132813&nbsp;&nbsp;&nbsp;Assertion&nbsp;at&nbsp;priv/guest-x86/toIR.c:652&nbsp;fails<br>
133051&nbsp;&nbsp;&nbsp;'cfsi-&gt;len&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;cfsi-&gt;len&nbsp;&lt;&nbsp;2000000'&nbsp;failed<br>
132722&nbsp;&nbsp;&nbsp;valgrind&nbsp;header&nbsp;files&nbsp;are&nbsp;not&nbsp;standard&nbsp;C<br>
n-i-bz&nbsp;&nbsp;&nbsp;Livelocks&nbsp;entire&nbsp;machine&nbsp;(users&nbsp;list,&nbsp;Timothy&nbsp;Terriberry)<br>
n-i-bz&nbsp;&nbsp;&nbsp;Alex&nbsp;Bennee&nbsp;mmap&nbsp;problem&nbsp;(9&nbsp;Aug)<br>
n-i-bz&nbsp;&nbsp;&nbsp;BartV:&nbsp;Don't&nbsp;print&nbsp;more&nbsp;lines&nbsp;of&nbsp;a&nbsp;stack-trace&nbsp;than&nbsp;were&nbsp;obtained.<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32&nbsp;SuSE&nbsp;10.1&nbsp;redir<br>
n-i-bz&nbsp;&nbsp;&nbsp;amd64&nbsp;padding&nbsp;suppressions<br>
n-i-bz&nbsp;&nbsp;&nbsp;amd64&nbsp;insn&nbsp;printing&nbsp;fix.<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc&nbsp;cmp&nbsp;reg,reg&nbsp;fix<br>
n-i-bz&nbsp;&nbsp;&nbsp;x86/amd64&nbsp;iropt&nbsp;e/rflag&nbsp;reduction&nbsp;rules<br>
n-i-bz&nbsp;&nbsp;&nbsp;SuSE&nbsp;10.1&nbsp;(ppc32)&nbsp;minor&nbsp;fixes<br>
133678&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0x48&nbsp;0xF&nbsp;0xC5&nbsp;0xC0&nbsp;(pextrw?)<br>
133694&nbsp;&nbsp;&nbsp;aspacem&nbsp;assertion:&nbsp;aspacem_minAddr&nbsp;&lt;=&nbsp;holeStart<br>
n-i-bz&nbsp;&nbsp;&nbsp;callgrind:&nbsp;fix&nbsp;warning&nbsp;about&nbsp;malformed&nbsp;creator&nbsp;line&nbsp;<br>
n-i-bz&nbsp;&nbsp;&nbsp;callgrind:&nbsp;fix&nbsp;annotate&nbsp;script&nbsp;for&nbsp;data&nbsp;produced&nbsp;with&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--dump-instr=yes<br>
n-i-bz&nbsp;&nbsp;&nbsp;callgrind:&nbsp;fix&nbsp;failed&nbsp;assertion&nbsp;when&nbsp;toggling&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instrumentation&nbsp;mode<br>
n-i-bz&nbsp;&nbsp;&nbsp;callgrind:&nbsp;fix&nbsp;annotate&nbsp;script&nbsp;fix&nbsp;warnings&nbsp;with<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--collect-jumps=yes<br>
n-i-bz&nbsp;&nbsp;&nbsp;docs&nbsp;path&nbsp;hardwired&nbsp;(Dennis&nbsp;Lubert)<br>
<br>
The&nbsp;following&nbsp;bugs&nbsp;were&nbsp;not&nbsp;fixed,&nbsp;due&nbsp;primarily&nbsp;to&nbsp;lack&nbsp;of&nbsp;developer<br>
time,&nbsp;and&nbsp;also&nbsp;because&nbsp;bug&nbsp;reporters&nbsp;did&nbsp;not&nbsp;answer&nbsp;requests&nbsp;for<br>
feedback&nbsp;in&nbsp;time&nbsp;for&nbsp;the&nbsp;release:<br>
<br>
129390&nbsp;&nbsp;&nbsp;ppc?-&gt;IR:&nbsp;some&nbsp;kind&nbsp;of&nbsp;VMX&nbsp;prefetch&nbsp;(dstt)<br>
129968&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xF&nbsp;0xAE&nbsp;0x0&nbsp;(fxsave)<br>
133054&nbsp;&nbsp;&nbsp;'make&nbsp;install'&nbsp;fails&nbsp;with&nbsp;syntax&nbsp;errors<br>
n-i-bz&nbsp;&nbsp;&nbsp;Signal&nbsp;race&nbsp;condition&nbsp;(users&nbsp;list,&nbsp;13&nbsp;June,&nbsp;Johannes&nbsp;Berg)<br>
n-i-bz&nbsp;&nbsp;&nbsp;Unrecognised&nbsp;instruction&nbsp;at&nbsp;address&nbsp;0x70198EC2&nbsp;(users&nbsp;list,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;19&nbsp;July,&nbsp;Bennee)<br>
132998&nbsp;&nbsp;&nbsp;startup&nbsp;fails&nbsp;in&nbsp;when&nbsp;running&nbsp;on&nbsp;UML<br>
<br>
The&nbsp;following&nbsp;bug&nbsp;was&nbsp;tentatively&nbsp;fixed&nbsp;on&nbsp;the&nbsp;mainline&nbsp;but&nbsp;the&nbsp;fix<br>
was&nbsp;considered&nbsp;too&nbsp;risky&nbsp;to&nbsp;push&nbsp;into&nbsp;3.2.X:<br>
<br>
133154&nbsp;&nbsp;&nbsp;crash&nbsp;when&nbsp;using&nbsp;client&nbsp;requests&nbsp;to&nbsp;register/deregister&nbsp;stack<br>
<br>
(3.2.1:&nbsp;16&nbsp;Sept&nbsp;2006,&nbsp;vex&nbsp;r1658,&nbsp;valgrind&nbsp;r6070).<br>
<br>
<br>
Release&nbsp;3.2.0&nbsp;(7&nbsp;June&nbsp;2006)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.2.0&nbsp;is&nbsp;a&nbsp;feature&nbsp;release&nbsp;with&nbsp;many&nbsp;significant&nbsp;improvements&nbsp;and&nbsp;the<br>
usual&nbsp;collection&nbsp;of&nbsp;bug&nbsp;fixes.&nbsp;&nbsp;This&nbsp;release&nbsp;supports&nbsp;X86/Linux,<br>
AMD64/Linux,&nbsp;PPC32/Linux&nbsp;and&nbsp;PPC64/Linux.<br>
<br>
Performance,&nbsp;especially&nbsp;of&nbsp;Memcheck,&nbsp;is&nbsp;improved,&nbsp;Addrcheck&nbsp;has&nbsp;been<br>
removed,&nbsp;Callgrind&nbsp;has&nbsp;been&nbsp;added,&nbsp;PPC64/Linux&nbsp;support&nbsp;has&nbsp;been&nbsp;added,<br>
Lackey&nbsp;has&nbsp;been&nbsp;improved,&nbsp;and&nbsp;MPI&nbsp;support&nbsp;has&nbsp;been&nbsp;added.&nbsp;&nbsp;In&nbsp;detail:<br>
<br>
-&nbsp;Memcheck&nbsp;has&nbsp;improved&nbsp;speed&nbsp;and&nbsp;reduced&nbsp;memory&nbsp;use.&nbsp;&nbsp;Run&nbsp;times&nbsp;are<br>
&nbsp;&nbsp;typically&nbsp;reduced&nbsp;by&nbsp;15-30%,&nbsp;averaging&nbsp;about&nbsp;24%&nbsp;for&nbsp;SPEC&nbsp;CPU2000.<br>
&nbsp;&nbsp;The&nbsp;other&nbsp;tools&nbsp;have&nbsp;smaller&nbsp;but&nbsp;noticeable&nbsp;speed&nbsp;improvements.&nbsp;&nbsp;We<br>
&nbsp;&nbsp;are&nbsp;interested&nbsp;to&nbsp;hear&nbsp;what&nbsp;improvements&nbsp;users&nbsp;get.<br>
<br>
&nbsp;&nbsp;Memcheck&nbsp;uses&nbsp;less&nbsp;memory&nbsp;due&nbsp;to&nbsp;the&nbsp;introduction&nbsp;of&nbsp;a&nbsp;compressed<br>
&nbsp;&nbsp;representation&nbsp;for&nbsp;shadow&nbsp;memory.&nbsp;&nbsp;The&nbsp;space&nbsp;overhead&nbsp;has&nbsp;been<br>
&nbsp;&nbsp;reduced&nbsp;by&nbsp;a&nbsp;factor&nbsp;of&nbsp;up&nbsp;to&nbsp;four,&nbsp;depending&nbsp;on&nbsp;program&nbsp;behaviour.<br>
&nbsp;&nbsp;This&nbsp;means&nbsp;you&nbsp;should&nbsp;be&nbsp;able&nbsp;to&nbsp;run&nbsp;programs&nbsp;that&nbsp;use&nbsp;more&nbsp;memory<br>
&nbsp;&nbsp;than&nbsp;before&nbsp;without&nbsp;hitting&nbsp;problems.<br>
<br>
-&nbsp;Addrcheck&nbsp;has&nbsp;been&nbsp;removed.&nbsp;&nbsp;It&nbsp;has&nbsp;not&nbsp;worked&nbsp;since&nbsp;version&nbsp;2.4.0,<br>
&nbsp;&nbsp;and&nbsp;the&nbsp;speed&nbsp;and&nbsp;memory&nbsp;improvements&nbsp;to&nbsp;Memcheck&nbsp;make&nbsp;it&nbsp;redundant.<br>
&nbsp;&nbsp;If&nbsp;you&nbsp;liked&nbsp;using&nbsp;Addrcheck&nbsp;because&nbsp;it&nbsp;didn't&nbsp;give&nbsp;undefined&nbsp;value<br>
&nbsp;&nbsp;errors,&nbsp;you&nbsp;can&nbsp;use&nbsp;the&nbsp;new&nbsp;Memcheck&nbsp;option&nbsp;--undef-value-errors=no<br>
&nbsp;&nbsp;to&nbsp;get&nbsp;the&nbsp;same&nbsp;behaviour.<br>
<br>
-&nbsp;The&nbsp;number&nbsp;of&nbsp;undefined-value&nbsp;errors&nbsp;incorrectly&nbsp;reported&nbsp;by<br>
&nbsp;&nbsp;Memcheck&nbsp;has&nbsp;been&nbsp;reduced&nbsp;(such&nbsp;false&nbsp;reports&nbsp;were&nbsp;already&nbsp;very<br>
&nbsp;&nbsp;rare).&nbsp;&nbsp;In&nbsp;particular,&nbsp;efforts&nbsp;have&nbsp;been&nbsp;made&nbsp;to&nbsp;ensure&nbsp;Memcheck<br>
&nbsp;&nbsp;works&nbsp;really&nbsp;well&nbsp;with&nbsp;gcc&nbsp;4.0/4.1-generated&nbsp;code&nbsp;on&nbsp;X86/Linux&nbsp;and<br>
&nbsp;&nbsp;AMD64/Linux.<br>
<br>
-&nbsp;Josef&nbsp;Weidendorfer's&nbsp;popular&nbsp;Callgrind&nbsp;tool&nbsp;has&nbsp;been&nbsp;added.&nbsp;&nbsp;Folding<br>
&nbsp;&nbsp;it&nbsp;in&nbsp;was&nbsp;a&nbsp;logical&nbsp;step&nbsp;given&nbsp;its&nbsp;popularity&nbsp;and&nbsp;usefulness,&nbsp;and<br>
&nbsp;&nbsp;makes&nbsp;it&nbsp;easier&nbsp;for&nbsp;us&nbsp;to&nbsp;ensure&nbsp;it&nbsp;works&nbsp;"out&nbsp;of&nbsp;the&nbsp;box"&nbsp;on&nbsp;all<br>
&nbsp;&nbsp;supported&nbsp;targets.&nbsp;&nbsp;The&nbsp;associated&nbsp;KDE&nbsp;KCachegrind&nbsp;GUI&nbsp;remains&nbsp;a<br>
&nbsp;&nbsp;separate&nbsp;project.<br>
<br>
-&nbsp;A&nbsp;new&nbsp;release&nbsp;of&nbsp;the&nbsp;Valkyrie&nbsp;GUI&nbsp;for&nbsp;Memcheck,&nbsp;version&nbsp;1.2.0,<br>
&nbsp;&nbsp;accompanies&nbsp;this&nbsp;release.&nbsp;&nbsp;Improvements&nbsp;over&nbsp;previous&nbsp;releases<br>
&nbsp;&nbsp;include&nbsp;improved&nbsp;robustness,&nbsp;many&nbsp;refinements&nbsp;to&nbsp;the&nbsp;user&nbsp;interface,<br>
&nbsp;&nbsp;and&nbsp;use&nbsp;of&nbsp;a&nbsp;standard&nbsp;autoconf/automake&nbsp;build&nbsp;system.&nbsp;&nbsp;You&nbsp;can&nbsp;get<br>
&nbsp;&nbsp;it&nbsp;from&nbsp;http://www.valgrind.org/downloads/guis.html.<br>
<br>
-&nbsp;Valgrind&nbsp;now&nbsp;works&nbsp;on&nbsp;PPC64/Linux.&nbsp;&nbsp;As&nbsp;with&nbsp;the&nbsp;AMD64/Linux&nbsp;port,<br>
&nbsp;&nbsp;this&nbsp;supports&nbsp;programs&nbsp;using&nbsp;to&nbsp;32G&nbsp;of&nbsp;address&nbsp;space.&nbsp;&nbsp;On&nbsp;64-bit<br>
&nbsp;&nbsp;capable&nbsp;PPC64/Linux&nbsp;setups,&nbsp;you&nbsp;get&nbsp;a&nbsp;dual&nbsp;architecture&nbsp;build&nbsp;so<br>
&nbsp;&nbsp;that&nbsp;both&nbsp;32-bit&nbsp;and&nbsp;64-bit&nbsp;executables&nbsp;can&nbsp;be&nbsp;run.&nbsp;&nbsp;Linux&nbsp;on&nbsp;POWER5<br>
&nbsp;&nbsp;is&nbsp;supported,&nbsp;and&nbsp;POWER4&nbsp;is&nbsp;also&nbsp;believed&nbsp;to&nbsp;work.&nbsp;&nbsp;Both&nbsp;32-bit&nbsp;and<br>
&nbsp;&nbsp;64-bit&nbsp;DWARF2&nbsp;is&nbsp;supported.&nbsp;&nbsp;This&nbsp;port&nbsp;is&nbsp;known&nbsp;to&nbsp;work&nbsp;well&nbsp;with<br>
&nbsp;&nbsp;both&nbsp;gcc-compiled&nbsp;and&nbsp;xlc/xlf-compiled&nbsp;code.<br>
<br>
-&nbsp;Floating&nbsp;point&nbsp;accuracy&nbsp;has&nbsp;been&nbsp;improved&nbsp;for&nbsp;PPC32/Linux.<br>
&nbsp;&nbsp;Specifically,&nbsp;the&nbsp;floating&nbsp;point&nbsp;rounding&nbsp;mode&nbsp;is&nbsp;observed&nbsp;on&nbsp;all&nbsp;FP<br>
&nbsp;&nbsp;arithmetic&nbsp;operations,&nbsp;and&nbsp;multiply-accumulate&nbsp;instructions&nbsp;are<br>
&nbsp;&nbsp;preserved&nbsp;by&nbsp;the&nbsp;compilation&nbsp;pipeline.&nbsp;&nbsp;This&nbsp;means&nbsp;you&nbsp;should&nbsp;get&nbsp;FP<br>
&nbsp;&nbsp;results&nbsp;which&nbsp;are&nbsp;bit-for-bit&nbsp;identical&nbsp;to&nbsp;a&nbsp;native&nbsp;run.&nbsp;&nbsp;These<br>
&nbsp;&nbsp;improvements&nbsp;are&nbsp;also&nbsp;present&nbsp;in&nbsp;the&nbsp;PPC64/Linux&nbsp;port.<br>
<br>
-&nbsp;Lackey,&nbsp;the&nbsp;example&nbsp;tool,&nbsp;has&nbsp;been&nbsp;improved:<br>
<br>
&nbsp;&nbsp;*&nbsp;It&nbsp;has&nbsp;a&nbsp;new&nbsp;option&nbsp;--detailed-counts&nbsp;(off&nbsp;by&nbsp;default)&nbsp;which<br>
&nbsp;&nbsp;&nbsp;&nbsp;causes&nbsp;it&nbsp;to&nbsp;print&nbsp;out&nbsp;a&nbsp;count&nbsp;of&nbsp;loads,&nbsp;stores&nbsp;and&nbsp;ALU&nbsp;operations<br>
&nbsp;&nbsp;&nbsp;&nbsp;done,&nbsp;and&nbsp;their&nbsp;sizes.<br>
<br>
&nbsp;&nbsp;*&nbsp;It&nbsp;has&nbsp;a&nbsp;new&nbsp;option&nbsp;--trace-mem&nbsp;(off&nbsp;by&nbsp;default)&nbsp;which&nbsp;causes&nbsp;it<br>
&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;print&nbsp;out&nbsp;a&nbsp;trace&nbsp;of&nbsp;all&nbsp;memory&nbsp;accesses&nbsp;performed&nbsp;by&nbsp;a<br>
&nbsp;&nbsp;&nbsp;&nbsp;program.&nbsp;&nbsp;It's&nbsp;a&nbsp;good&nbsp;starting&nbsp;point&nbsp;for&nbsp;building&nbsp;Valgrind&nbsp;tools<br>
&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;need&nbsp;to&nbsp;track&nbsp;memory&nbsp;accesses.&nbsp;&nbsp;Read&nbsp;the&nbsp;comments&nbsp;at&nbsp;the&nbsp;top<br>
&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;file&nbsp;lackey/lk_main.c&nbsp;for&nbsp;details.<br>
<br>
&nbsp;&nbsp;*&nbsp;The&nbsp;original&nbsp;instrumentation&nbsp;(counting&nbsp;numbers&nbsp;of&nbsp;instructions,<br>
&nbsp;&nbsp;&nbsp;&nbsp;jumps,&nbsp;etc)&nbsp;is&nbsp;now&nbsp;controlled&nbsp;by&nbsp;a&nbsp;new&nbsp;option&nbsp;--basic-counts.&nbsp;&nbsp;It<br>
&nbsp;&nbsp;&nbsp;&nbsp;is&nbsp;on&nbsp;by&nbsp;default.<br>
<br>
-&nbsp;MPI&nbsp;support:&nbsp;partial&nbsp;support&nbsp;for&nbsp;debugging&nbsp;distributed&nbsp;applications<br>
&nbsp;&nbsp;using&nbsp;the&nbsp;MPI&nbsp;library&nbsp;specification&nbsp;has&nbsp;been&nbsp;added.&nbsp;&nbsp;Valgrind&nbsp;is<br>
&nbsp;&nbsp;aware&nbsp;of&nbsp;the&nbsp;memory&nbsp;state&nbsp;changes&nbsp;caused&nbsp;by&nbsp;a&nbsp;subset&nbsp;of&nbsp;the&nbsp;MPI<br>
&nbsp;&nbsp;functions,&nbsp;and&nbsp;will&nbsp;carefully&nbsp;check&nbsp;data&nbsp;passed&nbsp;to&nbsp;the&nbsp;(P)MPI_<br>
&nbsp;&nbsp;interface.<br>
<br>
-&nbsp;A&nbsp;new&nbsp;flag,&nbsp;--error-exitcode=,&nbsp;has&nbsp;been&nbsp;added.&nbsp;&nbsp;This&nbsp;allows&nbsp;changing<br>
&nbsp;&nbsp;the&nbsp;exit&nbsp;code&nbsp;in&nbsp;runs&nbsp;where&nbsp;Valgrind&nbsp;reported&nbsp;errors,&nbsp;which&nbsp;is<br>
&nbsp;&nbsp;useful&nbsp;when&nbsp;using&nbsp;Valgrind&nbsp;as&nbsp;part&nbsp;of&nbsp;an&nbsp;automated&nbsp;test&nbsp;suite.<br>
<br>
-&nbsp;Various&nbsp;segfaults&nbsp;when&nbsp;reading&nbsp;old-style&nbsp;"stabs"&nbsp;debug&nbsp;information<br>
&nbsp;&nbsp;have&nbsp;been&nbsp;fixed.<br>
<br>
-&nbsp;A&nbsp;simple&nbsp;performance&nbsp;evaluation&nbsp;suite&nbsp;has&nbsp;been&nbsp;added.&nbsp;&nbsp;See<br>
&nbsp;&nbsp;perf/README&nbsp;and&nbsp;README_DEVELOPERS&nbsp;for&nbsp;details.&nbsp;&nbsp;There&nbsp;are<br>
&nbsp;&nbsp;various&nbsp;bells&nbsp;and&nbsp;whistles.<br>
<br>
-&nbsp;New&nbsp;configuration&nbsp;flags:<br>
&nbsp;&nbsp;&nbsp;&nbsp;--enable-only32bit<br>
&nbsp;&nbsp;&nbsp;&nbsp;--enable-only64bit<br>
&nbsp;&nbsp;By&nbsp;default,&nbsp;on&nbsp;64&nbsp;bit&nbsp;platforms&nbsp;(ppc64-linux,&nbsp;amd64-linux)&nbsp;the&nbsp;build<br>
&nbsp;&nbsp;system&nbsp;will&nbsp;attempt&nbsp;to&nbsp;build&nbsp;a&nbsp;Valgrind&nbsp;which&nbsp;supports&nbsp;both&nbsp;32-bit<br>
&nbsp;&nbsp;and&nbsp;64-bit&nbsp;executables.&nbsp;&nbsp;This&nbsp;may&nbsp;not&nbsp;be&nbsp;what&nbsp;you&nbsp;want,&nbsp;and&nbsp;you&nbsp;can<br>
&nbsp;&nbsp;override&nbsp;the&nbsp;default&nbsp;behaviour&nbsp;using&nbsp;these&nbsp;flags.<br>
<br>
Please&nbsp;note&nbsp;that&nbsp;Helgrind&nbsp;is&nbsp;still&nbsp;not&nbsp;working.&nbsp;&nbsp;We&nbsp;have&nbsp;made&nbsp;an<br>
important&nbsp;step&nbsp;towards&nbsp;making&nbsp;it&nbsp;work&nbsp;again,&nbsp;however,&nbsp;with&nbsp;the<br>
addition&nbsp;of&nbsp;function&nbsp;wrapping&nbsp;(see&nbsp;below).<br>
<br>
Other&nbsp;user-visible&nbsp;changes:<br>
<br>
-&nbsp;Valgrind&nbsp;now&nbsp;has&nbsp;the&nbsp;ability&nbsp;to&nbsp;intercept&nbsp;and&nbsp;wrap&nbsp;arbitrary<br>
&nbsp;&nbsp;functions.&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;preliminary&nbsp;step&nbsp;towards&nbsp;making&nbsp;Helgrind&nbsp;work<br>
&nbsp;&nbsp;again,&nbsp;and&nbsp;was&nbsp;required&nbsp;for&nbsp;MPI&nbsp;support.<br>
<br>
-&nbsp;There&nbsp;are&nbsp;some&nbsp;changes&nbsp;to&nbsp;Memcheck's&nbsp;client&nbsp;requests.&nbsp;&nbsp;Some&nbsp;of&nbsp;them<br>
&nbsp;&nbsp;have&nbsp;changed&nbsp;names:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;MAKE_NOACCESS&nbsp;&nbsp;--&gt;&nbsp;MAKE_MEM_NOACCESS<br>
&nbsp;&nbsp;&nbsp;&nbsp;MAKE_WRITABLE&nbsp;&nbsp;--&gt;&nbsp;MAKE_MEM_UNDEFINED<br>
&nbsp;&nbsp;&nbsp;&nbsp;MAKE_READABLE&nbsp;&nbsp;--&gt;&nbsp;MAKE_MEM_DEFINED<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;CHECK_WRITABLE&nbsp;--&gt;&nbsp;CHECK_MEM_IS_ADDRESSABLE<br>
&nbsp;&nbsp;&nbsp;&nbsp;CHECK_READABLE&nbsp;--&gt;&nbsp;CHECK_MEM_IS_DEFINED<br>
&nbsp;&nbsp;&nbsp;&nbsp;CHECK_DEFINED&nbsp;&nbsp;--&gt;&nbsp;CHECK_VALUE_IS_DEFINED<br>
<br>
&nbsp;&nbsp;The&nbsp;reason&nbsp;for&nbsp;the&nbsp;change&nbsp;is&nbsp;that&nbsp;the&nbsp;old&nbsp;names&nbsp;are&nbsp;subtly<br>
&nbsp;&nbsp;misleading.&nbsp;&nbsp;The&nbsp;old&nbsp;names&nbsp;will&nbsp;still&nbsp;work,&nbsp;but&nbsp;they&nbsp;are&nbsp;deprecated<br>
&nbsp;&nbsp;and&nbsp;may&nbsp;be&nbsp;removed&nbsp;in&nbsp;a&nbsp;future&nbsp;release.<br>
<br>
&nbsp;&nbsp;We&nbsp;also&nbsp;added&nbsp;a&nbsp;new&nbsp;client&nbsp;request:<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;MAKE_MEM_DEFINED_IF_ADDRESSABLE(a,&nbsp;len)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<br>
&nbsp;&nbsp;which&nbsp;is&nbsp;like&nbsp;MAKE_MEM_DEFINED&nbsp;but&nbsp;only&nbsp;affects&nbsp;a&nbsp;byte&nbsp;if&nbsp;the&nbsp;byte&nbsp;is<br>
&nbsp;&nbsp;already&nbsp;addressable.<br>
<br>
-&nbsp;The&nbsp;way&nbsp;client&nbsp;requests&nbsp;are&nbsp;encoded&nbsp;in&nbsp;the&nbsp;instruction&nbsp;stream&nbsp;has<br>
&nbsp;&nbsp;changed.&nbsp;&nbsp;Unfortunately,&nbsp;this&nbsp;means&nbsp;3.2.0&nbsp;will&nbsp;not&nbsp;honour&nbsp;client<br>
&nbsp;&nbsp;requests&nbsp;compiled&nbsp;into&nbsp;binaries&nbsp;using&nbsp;headers&nbsp;from&nbsp;earlier&nbsp;versions<br>
&nbsp;&nbsp;of&nbsp;Valgrind.&nbsp;&nbsp;We&nbsp;will&nbsp;try&nbsp;to&nbsp;keep&nbsp;the&nbsp;client&nbsp;request&nbsp;encodings&nbsp;more&nbsp;<br>
&nbsp;&nbsp;stable&nbsp;in&nbsp;future.<br>
<br>
BUGS&nbsp;FIXED:<br>
<br>
108258&nbsp;&nbsp;&nbsp;NPTL&nbsp;pthread&nbsp;cleanup&nbsp;handlers&nbsp;not&nbsp;called&nbsp;<br>
117290&nbsp;&nbsp;&nbsp;valgrind&nbsp;is&nbsp;sigKILL'd&nbsp;on&nbsp;startup<br>
117295&nbsp;&nbsp;&nbsp;==&nbsp;117290<br>
118703&nbsp;&nbsp;&nbsp;m_signals.c:1427&nbsp;Assertion&nbsp;'tst-&gt;status&nbsp;==&nbsp;VgTs_WaitSys'<br>
118466&nbsp;&nbsp;&nbsp;add&nbsp;%reg,&nbsp;%reg&nbsp;generates&nbsp;incorrect&nbsp;validity&nbsp;for&nbsp;bit&nbsp;0<br>
123210&nbsp;&nbsp;&nbsp;New:&nbsp;strlen&nbsp;from&nbsp;ld-linux&nbsp;on&nbsp;amd64<br>
123244&nbsp;&nbsp;&nbsp;DWARF2&nbsp;CFI&nbsp;reader:&nbsp;unhandled&nbsp;CFI&nbsp;instruction&nbsp;0:18<br>
123248&nbsp;&nbsp;&nbsp;syscalls&nbsp;in&nbsp;glibc-2.4:&nbsp;openat,&nbsp;fstatat,&nbsp;symlinkat<br>
123258&nbsp;&nbsp;&nbsp;socketcall.recvmsg(msg.msg_iov[i]&nbsp;points&nbsp;to&nbsp;uninit<br>
123535&nbsp;&nbsp;&nbsp;mremap(new_addr)&nbsp;requires&nbsp;MREMAP_FIXED&nbsp;in&nbsp;4th&nbsp;arg<br>
123836&nbsp;&nbsp;&nbsp;small&nbsp;typo&nbsp;in&nbsp;the&nbsp;doc<br>
124029&nbsp;&nbsp;&nbsp;ppc&nbsp;compile&nbsp;failed:&nbsp;`vor'&nbsp;gcc&nbsp;3.3.5<br>
124222&nbsp;&nbsp;&nbsp;Segfault:&nbsp;@@don't&nbsp;know&nbsp;what&nbsp;type&nbsp;':'&nbsp;is<br>
124475&nbsp;&nbsp;&nbsp;ppc32:&nbsp;crash&nbsp;(syscall?)&nbsp;timer_settime()<br>
124499&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xF&nbsp;0xE&nbsp;0x48&nbsp;0x85&nbsp;(femms)<br>
124528&nbsp;&nbsp;&nbsp;FATAL:&nbsp;aspacem&nbsp;assertion&nbsp;failed:&nbsp;segment_is_sane<br>
124697&nbsp;&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF&nbsp;0x70&nbsp;0xC9&nbsp;0x0&nbsp;(pshufw)<br>
124892&nbsp;&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0xF3&nbsp;0xAE&nbsp;(REPx&nbsp;SCASB)<br>
126216&nbsp;&nbsp;&nbsp;==&nbsp;124892<br>
124808&nbsp;&nbsp;&nbsp;ppc32:&nbsp;sys_sched_getaffinity()&nbsp;not&nbsp;handled<br>
n-i-bz&nbsp;&nbsp;&nbsp;Very&nbsp;long&nbsp;stabs&nbsp;strings&nbsp;crash&nbsp;m_debuginfo<br>
n-i-bz&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0x66&nbsp;0xF&nbsp;0xF5&nbsp;(pmaddwd)<br>
125492&nbsp;&nbsp;&nbsp;ppc32:&nbsp;support&nbsp;a&nbsp;bunch&nbsp;more&nbsp;syscalls<br>
121617&nbsp;&nbsp;&nbsp;ppc32/64:&nbsp;coredumping&nbsp;gives&nbsp;assertion&nbsp;failure<br>
121814&nbsp;&nbsp;&nbsp;Coregrind&nbsp;return&nbsp;error&nbsp;as&nbsp;exitcode&nbsp;patch<br>
126517&nbsp;&nbsp;&nbsp;==&nbsp;121814<br>
125607&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0x66&nbsp;0xF&nbsp;0xA3&nbsp;0x2&nbsp;(btw&nbsp;etc)<br>
125651&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0xF8&nbsp;0x49&nbsp;0xFF&nbsp;0xE3&nbsp;(clc?)<br>
126253&nbsp;&nbsp;&nbsp;x86&nbsp;movx&nbsp;is&nbsp;wrong<br>
126451&nbsp;&nbsp;&nbsp;3.2&nbsp;SVN&nbsp;doesn't&nbsp;work&nbsp;on&nbsp;ppc32&nbsp;CPU's&nbsp;without&nbsp;FPU<br>
126217&nbsp;&nbsp;&nbsp;increase&nbsp;#&nbsp;threads<br>
126243&nbsp;&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;popw&nbsp;mem<br>
126583&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0x48&nbsp;0xF&nbsp;0xA4&nbsp;0xC2&nbsp;(shld&nbsp;$1,%rax,%rdx)<br>
126668&nbsp;&nbsp;&nbsp;amd64-&gt;IR:&nbsp;0x1C&nbsp;0xFF&nbsp;(sbb&nbsp;$0xff,%al)<br>
126696&nbsp;&nbsp;&nbsp;support&nbsp;for&nbsp;CDROMREADRAW&nbsp;ioctl&nbsp;and&nbsp;CDROMREADTOCENTRY&nbsp;fix<br>
126722&nbsp;&nbsp;&nbsp;assertion:&nbsp;segment_is_sane&nbsp;at&nbsp;m_aspacemgr/aspacemgr.c:1624<br>
126938&nbsp;&nbsp;&nbsp;bad&nbsp;checking&nbsp;for&nbsp;syscalls&nbsp;linkat,&nbsp;renameat,&nbsp;symlinkat<br>
<br>
(3.2.0RC1:&nbsp;27&nbsp;May&nbsp;&nbsp;2006,&nbsp;vex&nbsp;r1626,&nbsp;valgrind&nbsp;r5947).<br>
(3.2.0:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;7&nbsp;June&nbsp;2006,&nbsp;vex&nbsp;r1628,&nbsp;valgrind&nbsp;r5957).<br>
<br>
<br>
Release&nbsp;3.1.1&nbsp;(15&nbsp;March&nbsp;2006)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.1.1&nbsp;fixes&nbsp;a&nbsp;bunch&nbsp;of&nbsp;bugs&nbsp;reported&nbsp;in&nbsp;3.1.0.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;new<br>
functionality.&nbsp;&nbsp;The&nbsp;fixed&nbsp;bugs&nbsp;are:<br>
<br>
(note:&nbsp;"n-i-bz"&nbsp;means&nbsp;"not&nbsp;in&nbsp;bugzilla"&nbsp;--&nbsp;this&nbsp;bug&nbsp;does&nbsp;not&nbsp;have<br>
&nbsp;a&nbsp;bugzilla&nbsp;entry).<br>
<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32:&nbsp;fsub&nbsp;3,3,3&nbsp;in&nbsp;dispatcher&nbsp;doesn't&nbsp;clear&nbsp;NaNs<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32:&nbsp;__NR_{set,get}priority<br>
117332&nbsp;&nbsp;&nbsp;x86:&nbsp;missing&nbsp;line&nbsp;info&nbsp;with&nbsp;icc&nbsp;8.1<br>
117366&nbsp;&nbsp;&nbsp;amd64:&nbsp;0xDD&nbsp;0x7C&nbsp;fnstsw<br>
118274&nbsp;&nbsp;&nbsp;==&nbsp;117366<br>
117367&nbsp;&nbsp;&nbsp;amd64:&nbsp;0xD9&nbsp;0xF4&nbsp;fxtract<br>
117369&nbsp;&nbsp;&nbsp;amd64:&nbsp;__NR_getpriority&nbsp;(140)<br>
117419&nbsp;&nbsp;&nbsp;ppc32:&nbsp;lfsu&nbsp;f5,&nbsp;-4(r11)<br>
117419&nbsp;&nbsp;&nbsp;ppc32:&nbsp;fsqrt<br>
117936&nbsp;&nbsp;&nbsp;more&nbsp;stabs&nbsp;problems&nbsp;(segfaults&nbsp;while&nbsp;reading&nbsp;debug&nbsp;info)<br>
119914&nbsp;&nbsp;&nbsp;==&nbsp;117936<br>
120345&nbsp;&nbsp;&nbsp;==&nbsp;117936<br>
118239&nbsp;&nbsp;&nbsp;amd64:&nbsp;0xF&nbsp;0xAE&nbsp;0x3F&nbsp;(clflush)<br>
118939&nbsp;&nbsp;&nbsp;vm86old&nbsp;system&nbsp;call<br>
n-i-bz&nbsp;&nbsp;&nbsp;memcheck/tests/mempool&nbsp;reads&nbsp;freed&nbsp;memory<br>
n-i-bz&nbsp;&nbsp;&nbsp;AshleyP's&nbsp;custom-allocator&nbsp;assertion<br>
n-i-bz&nbsp;&nbsp;&nbsp;Dirk&nbsp;strict-aliasing&nbsp;stuff<br>
n-i-bz&nbsp;&nbsp;&nbsp;More&nbsp;space&nbsp;for&nbsp;debugger&nbsp;cmd&nbsp;line&nbsp;(Dan&nbsp;Thaler)<br>
n-i-bz&nbsp;&nbsp;&nbsp;Clarified&nbsp;leak&nbsp;checker&nbsp;output&nbsp;message<br>
n-i-bz&nbsp;&nbsp;&nbsp;AshleyP's&nbsp;--gen-suppressions&nbsp;output&nbsp;fix<br>
n-i-bz&nbsp;&nbsp;&nbsp;cg_annotate's&nbsp;--sort&nbsp;option&nbsp;broken<br>
n-i-bz&nbsp;&nbsp;&nbsp;OSet&nbsp;64-bit&nbsp;fastcmp&nbsp;bug<br>
n-i-bz&nbsp;&nbsp;&nbsp;VG_(getgroups)&nbsp;fix&nbsp;(Shinichi&nbsp;Noda)<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32:&nbsp;allocate&nbsp;from&nbsp;callee-saved&nbsp;FP/VMX&nbsp;regs<br>
n-i-bz&nbsp;&nbsp;&nbsp;misaligned&nbsp;path&nbsp;word-size&nbsp;bug&nbsp;in&nbsp;mc_main.c<br>
119297&nbsp;&nbsp;&nbsp;Incorrect&nbsp;error&nbsp;message&nbsp;for&nbsp;sse&nbsp;code<br>
120410&nbsp;&nbsp;&nbsp;x86:&nbsp;prefetchw&nbsp;(0xF&nbsp;0xD&nbsp;0x48&nbsp;0x4)<br>
120728&nbsp;&nbsp;&nbsp;TIOCSERGETLSR,&nbsp;TIOCGICOUNT,&nbsp;HDIO_GET_DMA&nbsp;ioctls<br>
120658&nbsp;&nbsp;&nbsp;Build&nbsp;fixes&nbsp;for&nbsp;gcc&nbsp;2.96<br>
120734&nbsp;&nbsp;&nbsp;x86:&nbsp;Support&nbsp;for&nbsp;changing&nbsp;EIP&nbsp;in&nbsp;signal&nbsp;handler<br>
n-i-bz&nbsp;&nbsp;&nbsp;memcheck/tests/zeropage&nbsp;de-looping&nbsp;fix<br>
n-i-bz&nbsp;&nbsp;&nbsp;x86:&nbsp;fxtract&nbsp;doesn't&nbsp;work&nbsp;reliably<br>
121662&nbsp;&nbsp;&nbsp;x86:&nbsp;lock&nbsp;xadd&nbsp;(0xF0&nbsp;0xF&nbsp;0xC0&nbsp;0x2)<br>
121893&nbsp;&nbsp;&nbsp;calloc&nbsp;does&nbsp;not&nbsp;always&nbsp;return&nbsp;zeroed&nbsp;memory<br>
121901&nbsp;&nbsp;&nbsp;no&nbsp;support&nbsp;for&nbsp;syscall&nbsp;tkill<br>
n-i-bz&nbsp;&nbsp;&nbsp;Suppression&nbsp;update&nbsp;for&nbsp;Debian&nbsp;unstable<br>
122067&nbsp;&nbsp;&nbsp;amd64:&nbsp;fcmovnu&nbsp;(0xDB&nbsp;0xD9)<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32:&nbsp;broken&nbsp;signal&nbsp;handling&nbsp;in&nbsp;cpu&nbsp;feature&nbsp;detection<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32:&nbsp;rounding&nbsp;mode&nbsp;problems&nbsp;(improved,&nbsp;partial&nbsp;fix&nbsp;only)<br>
119482&nbsp;&nbsp;&nbsp;ppc32:&nbsp;mtfsb1<br>
n-i-bz&nbsp;&nbsp;&nbsp;ppc32:&nbsp;mtocrf/mfocrf<br>
<br>
(3.1.1:&nbsp;&nbsp;15&nbsp;March&nbsp;2006,&nbsp;vex&nbsp;r1597,&nbsp;valgrind&nbsp;r5771).<br>
<br>
<br>
Release&nbsp;3.1.0&nbsp;(25&nbsp;November&nbsp;2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.1.0&nbsp;is&nbsp;a&nbsp;feature&nbsp;release&nbsp;with&nbsp;a&nbsp;number&nbsp;of&nbsp;significant&nbsp;improvements:<br>
AMD64&nbsp;support&nbsp;is&nbsp;much&nbsp;improved,&nbsp;PPC32&nbsp;support&nbsp;is&nbsp;good&nbsp;enough&nbsp;to&nbsp;be<br>
usable,&nbsp;and&nbsp;the&nbsp;handling&nbsp;of&nbsp;memory&nbsp;management&nbsp;and&nbsp;address&nbsp;space&nbsp;is<br>
much&nbsp;more&nbsp;robust.&nbsp;&nbsp;In&nbsp;detail:<br>
<br>
-&nbsp;AMD64&nbsp;support&nbsp;is&nbsp;much&nbsp;improved.&nbsp;&nbsp;The&nbsp;64-bit&nbsp;vs.&nbsp;32-bit&nbsp;issues&nbsp;in<br>
&nbsp;&nbsp;3.0.X&nbsp;have&nbsp;been&nbsp;resolved,&nbsp;and&nbsp;it&nbsp;should&nbsp;"just&nbsp;work"&nbsp;now&nbsp;in&nbsp;all<br>
&nbsp;&nbsp;cases.&nbsp;&nbsp;On&nbsp;AMD64&nbsp;machines&nbsp;both&nbsp;64-bit&nbsp;and&nbsp;32-bit&nbsp;versions&nbsp;of<br>
&nbsp;&nbsp;Valgrind&nbsp;are&nbsp;built.&nbsp;&nbsp;The&nbsp;right&nbsp;version&nbsp;will&nbsp;be&nbsp;invoked<br>
&nbsp;&nbsp;automatically,&nbsp;even&nbsp;when&nbsp;using&nbsp;--trace-children&nbsp;and&nbsp;mixing&nbsp;execution<br>
&nbsp;&nbsp;between&nbsp;64-bit&nbsp;and&nbsp;32-bit&nbsp;executables.&nbsp;&nbsp;Also,&nbsp;many&nbsp;more&nbsp;instructions<br>
&nbsp;&nbsp;are&nbsp;supported.<br>
<br>
-&nbsp;PPC32&nbsp;support&nbsp;is&nbsp;now&nbsp;good&nbsp;enough&nbsp;to&nbsp;be&nbsp;usable.&nbsp;&nbsp;It&nbsp;should&nbsp;work&nbsp;with<br>
&nbsp;&nbsp;all&nbsp;tools,&nbsp;but&nbsp;please&nbsp;let&nbsp;us&nbsp;know&nbsp;if&nbsp;you&nbsp;have&nbsp;problems.&nbsp;&nbsp;Three<br>
&nbsp;&nbsp;classes&nbsp;of&nbsp;CPUs&nbsp;are&nbsp;supported:&nbsp;integer&nbsp;only&nbsp;(no&nbsp;FP,&nbsp;no&nbsp;Altivec),<br>
&nbsp;&nbsp;which&nbsp;covers&nbsp;embedded&nbsp;PPC&nbsp;uses,&nbsp;integer&nbsp;and&nbsp;FP&nbsp;but&nbsp;no&nbsp;Altivec<br>
&nbsp;&nbsp;(G3-ish),&nbsp;and&nbsp;CPUs&nbsp;capable&nbsp;of&nbsp;Altivec&nbsp;too&nbsp;(G4,&nbsp;G5).<br>
<br>
-&nbsp;Valgrind's&nbsp;address&nbsp;space&nbsp;management&nbsp;has&nbsp;been&nbsp;overhauled.&nbsp;&nbsp;As&nbsp;a<br>
&nbsp;&nbsp;result,&nbsp;Valgrind&nbsp;should&nbsp;be&nbsp;much&nbsp;more&nbsp;robust&nbsp;with&nbsp;programs&nbsp;that&nbsp;use<br>
&nbsp;&nbsp;large&nbsp;amounts&nbsp;of&nbsp;memory.&nbsp;&nbsp;There&nbsp;should&nbsp;be&nbsp;many&nbsp;fewer&nbsp;"memory<br>
&nbsp;&nbsp;exhausted"&nbsp;messages,&nbsp;and&nbsp;debug&nbsp;symbols&nbsp;should&nbsp;be&nbsp;read&nbsp;correctly&nbsp;on<br>
&nbsp;&nbsp;large&nbsp;(eg.&nbsp;300MB+)&nbsp;executables.&nbsp;&nbsp;On&nbsp;32-bit&nbsp;machines&nbsp;the&nbsp;full&nbsp;address<br>
&nbsp;&nbsp;space&nbsp;available&nbsp;to&nbsp;user&nbsp;programs&nbsp;(usually&nbsp;3GB&nbsp;or&nbsp;4GB)&nbsp;can&nbsp;be&nbsp;fully<br>
&nbsp;&nbsp;utilised.&nbsp;&nbsp;On&nbsp;64-bit&nbsp;machines&nbsp;up&nbsp;to&nbsp;32GB&nbsp;of&nbsp;space&nbsp;is&nbsp;usable;&nbsp;when<br>
&nbsp;&nbsp;using&nbsp;Memcheck&nbsp;that&nbsp;means&nbsp;your&nbsp;program&nbsp;can&nbsp;use&nbsp;up&nbsp;to&nbsp;about&nbsp;14GB.<br>
<br>
&nbsp;&nbsp;A&nbsp;side&nbsp;effect&nbsp;of&nbsp;this&nbsp;change&nbsp;is&nbsp;that&nbsp;Valgrind&nbsp;is&nbsp;no&nbsp;longer&nbsp;protected<br>
&nbsp;&nbsp;against&nbsp;wild&nbsp;writes&nbsp;by&nbsp;the&nbsp;client.&nbsp;&nbsp;This&nbsp;feature&nbsp;was&nbsp;nice&nbsp;but&nbsp;relied<br>
&nbsp;&nbsp;on&nbsp;the&nbsp;x86&nbsp;segment&nbsp;registers&nbsp;and&nbsp;so&nbsp;wasn't&nbsp;portable.<br>
<br>
-&nbsp;Most&nbsp;users&nbsp;should&nbsp;not&nbsp;notice,&nbsp;but&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;address&nbsp;space<br>
&nbsp;&nbsp;manager&nbsp;change,&nbsp;the&nbsp;way&nbsp;Valgrind&nbsp;is&nbsp;built&nbsp;has&nbsp;been&nbsp;changed.&nbsp;&nbsp;Each<br>
&nbsp;&nbsp;tool&nbsp;is&nbsp;now&nbsp;built&nbsp;as&nbsp;a&nbsp;statically&nbsp;linked&nbsp;stand-alone&nbsp;executable,<br>
&nbsp;&nbsp;rather&nbsp;than&nbsp;as&nbsp;a&nbsp;shared&nbsp;object&nbsp;that&nbsp;is&nbsp;dynamically&nbsp;linked&nbsp;with&nbsp;the<br>
&nbsp;&nbsp;core.&nbsp;&nbsp;The&nbsp;"valgrind"&nbsp;program&nbsp;invokes&nbsp;the&nbsp;appropriate&nbsp;tool&nbsp;depending<br>
&nbsp;&nbsp;on&nbsp;the&nbsp;--tool&nbsp;option.&nbsp;&nbsp;This&nbsp;slightly&nbsp;increases&nbsp;the&nbsp;amount&nbsp;of&nbsp;disk<br>
&nbsp;&nbsp;space&nbsp;used&nbsp;by&nbsp;Valgrind,&nbsp;but&nbsp;it&nbsp;greatly&nbsp;simplified&nbsp;many&nbsp;things&nbsp;and<br>
&nbsp;&nbsp;removed&nbsp;Valgrind's&nbsp;dependence&nbsp;on&nbsp;glibc.<br>
<br>
Please&nbsp;note&nbsp;that&nbsp;Addrcheck&nbsp;and&nbsp;Helgrind&nbsp;are&nbsp;still&nbsp;not&nbsp;working.&nbsp;&nbsp;Work<br>
is&nbsp;underway&nbsp;to&nbsp;reinstate&nbsp;them&nbsp;(or&nbsp;equivalents).&nbsp;&nbsp;We&nbsp;apologise&nbsp;for&nbsp;the<br>
inconvenience.<br>
<br>
Other&nbsp;user-visible&nbsp;changes:<br>
<br>
-&nbsp;The&nbsp;--weird-hacks&nbsp;option&nbsp;has&nbsp;been&nbsp;renamed&nbsp;--sim-hints.<br>
<br>
-&nbsp;The&nbsp;--time-stamp&nbsp;option&nbsp;no&nbsp;longer&nbsp;gives&nbsp;an&nbsp;absolute&nbsp;date&nbsp;and&nbsp;time.<br>
&nbsp;&nbsp;It&nbsp;now&nbsp;prints&nbsp;the&nbsp;time&nbsp;elapsed&nbsp;since&nbsp;the&nbsp;program&nbsp;began.<br>
<br>
-&nbsp;It&nbsp;should&nbsp;build&nbsp;with&nbsp;gcc-2.96.<br>
<br>
-&nbsp;Valgrind&nbsp;can&nbsp;now&nbsp;run&nbsp;itself&nbsp;(see&nbsp;README_DEVELOPERS&nbsp;for&nbsp;how).<br>
&nbsp;&nbsp;This&nbsp;is&nbsp;not&nbsp;much&nbsp;use&nbsp;to&nbsp;you,&nbsp;but&nbsp;it&nbsp;means&nbsp;the&nbsp;developers&nbsp;can&nbsp;now<br>
&nbsp;&nbsp;profile&nbsp;Valgrind&nbsp;using&nbsp;Cachegrind.&nbsp;&nbsp;As&nbsp;a&nbsp;result&nbsp;a&nbsp;couple&nbsp;of<br>
&nbsp;&nbsp;performance&nbsp;bad&nbsp;cases&nbsp;have&nbsp;been&nbsp;fixed.<br>
<br>
-&nbsp;The&nbsp;XML&nbsp;output&nbsp;format&nbsp;has&nbsp;changed&nbsp;slightly.&nbsp;&nbsp;See<br>
&nbsp;&nbsp;docs/internals/xml-output.txt.<br>
<br>
-&nbsp;Core&nbsp;dumping&nbsp;has&nbsp;been&nbsp;reinstated&nbsp;(it&nbsp;was&nbsp;disabled&nbsp;in&nbsp;3.0.0&nbsp;and&nbsp;3.0.1).<br>
&nbsp;&nbsp;If&nbsp;your&nbsp;program&nbsp;crashes&nbsp;while&nbsp;running&nbsp;under&nbsp;Valgrind,&nbsp;a&nbsp;core&nbsp;file&nbsp;with<br>
&nbsp;&nbsp;the&nbsp;name&nbsp;"vgcore.&lt;pid&gt;"&nbsp;will&nbsp;be&nbsp;created&nbsp;(if&nbsp;your&nbsp;settings&nbsp;allow&nbsp;core<br>
&nbsp;&nbsp;file&nbsp;creation).&nbsp;&nbsp;Note&nbsp;that&nbsp;the&nbsp;floating&nbsp;point&nbsp;information&nbsp;is&nbsp;not&nbsp;all<br>
&nbsp;&nbsp;there.&nbsp;&nbsp;If&nbsp;Valgrind&nbsp;itself&nbsp;crashes,&nbsp;the&nbsp;OS&nbsp;will&nbsp;create&nbsp;a&nbsp;normal&nbsp;core<br>
&nbsp;&nbsp;file.<br>
<br>
The&nbsp;following&nbsp;are&nbsp;some&nbsp;user-visible&nbsp;changes&nbsp;that&nbsp;occurred&nbsp;in&nbsp;earlier<br>
versions&nbsp;that&nbsp;may&nbsp;not&nbsp;have&nbsp;been&nbsp;announced,&nbsp;or&nbsp;were&nbsp;announced&nbsp;but&nbsp;not<br>
widely&nbsp;noticed.&nbsp;&nbsp;So&nbsp;we're&nbsp;mentioning&nbsp;them&nbsp;now.<br>
<br>
-&nbsp;The&nbsp;--tool&nbsp;flag&nbsp;is&nbsp;optional&nbsp;once&nbsp;again;&nbsp;&nbsp;if&nbsp;you&nbsp;omit&nbsp;it,&nbsp;Memcheck<br>
&nbsp;&nbsp;is&nbsp;run&nbsp;by&nbsp;default.<br>
<br>
-&nbsp;The&nbsp;--num-callers&nbsp;flag&nbsp;now&nbsp;has&nbsp;a&nbsp;default&nbsp;value&nbsp;of&nbsp;12.&nbsp;&nbsp;It&nbsp;was<br>
&nbsp;&nbsp;previously&nbsp;4.<br>
<br>
-&nbsp;The&nbsp;--xml=yes&nbsp;flag&nbsp;causes&nbsp;Valgrind's&nbsp;output&nbsp;to&nbsp;be&nbsp;produced&nbsp;in&nbsp;XML<br>
&nbsp;&nbsp;format.&nbsp;&nbsp;This&nbsp;is&nbsp;designed&nbsp;to&nbsp;make&nbsp;it&nbsp;easy&nbsp;for&nbsp;other&nbsp;programs&nbsp;to<br>
&nbsp;&nbsp;consume&nbsp;Valgrind's&nbsp;output.&nbsp;&nbsp;The&nbsp;format&nbsp;is&nbsp;described&nbsp;in&nbsp;the&nbsp;file<br>
&nbsp;&nbsp;docs/internals/xml-format.txt.<br>
<br>
-&nbsp;The&nbsp;--gen-suppressions&nbsp;flag&nbsp;supports&nbsp;an&nbsp;"all"&nbsp;value&nbsp;that&nbsp;causes&nbsp;every<br>
&nbsp;&nbsp;suppression&nbsp;to&nbsp;be&nbsp;printed&nbsp;without&nbsp;asking.<br>
<br>
-&nbsp;The&nbsp;--log-file&nbsp;option&nbsp;no&nbsp;longer&nbsp;puts&nbsp;"pid"&nbsp;in&nbsp;the&nbsp;filename,&nbsp;eg.&nbsp;the<br>
&nbsp;&nbsp;old&nbsp;name&nbsp;"foo.pid12345"&nbsp;is&nbsp;now&nbsp;"foo.12345".<br>
<br>
-&nbsp;There&nbsp;are&nbsp;several&nbsp;graphical&nbsp;front-ends&nbsp;for&nbsp;Valgrind,&nbsp;such&nbsp;as&nbsp;Valkyrie,<br>
&nbsp;&nbsp;Alleyoop&nbsp;and&nbsp;Valgui.&nbsp;&nbsp;See&nbsp;http://www.valgrind.org/downloads/guis.html<br>
&nbsp;&nbsp;for&nbsp;a&nbsp;list.<br>
<br>
BUGS&nbsp;FIXED:<br>
<br>
109861&nbsp;&nbsp;amd64&nbsp;hangs&nbsp;at&nbsp;startup<br>
110301&nbsp;&nbsp;ditto<br>
111554&nbsp;&nbsp;valgrind&nbsp;crashes&nbsp;with&nbsp;Cannot&nbsp;allocate&nbsp;memory<br>
111809&nbsp;&nbsp;Memcheck&nbsp;tool&nbsp;doesn't&nbsp;start&nbsp;java<br>
111901&nbsp;&nbsp;cross-platform&nbsp;run&nbsp;of&nbsp;cachegrind&nbsp;fails&nbsp;on&nbsp;opteron<br>
113468&nbsp;&nbsp;(vgPlain_mprotect_range):&nbsp;Assertion&nbsp;'r&nbsp;!=&nbsp;-1'&nbsp;failed.<br>
&nbsp;92071&nbsp;&nbsp;Reading&nbsp;debugging&nbsp;info&nbsp;uses&nbsp;too&nbsp;much&nbsp;memory<br>
109744&nbsp;&nbsp;memcheck&nbsp;loses&nbsp;track&nbsp;of&nbsp;mmap&nbsp;from&nbsp;direct&nbsp;ld-linux.so.2<br>
110183&nbsp;&nbsp;tail&nbsp;of&nbsp;page&nbsp;with&nbsp;_end<br>
&nbsp;82301&nbsp;&nbsp;FV&nbsp;memory&nbsp;layout&nbsp;too&nbsp;rigid<br>
&nbsp;98278&nbsp;&nbsp;Infinite&nbsp;recursion&nbsp;possible&nbsp;when&nbsp;allocating&nbsp;memory<br>
108994&nbsp;&nbsp;Valgrind&nbsp;runs&nbsp;out&nbsp;of&nbsp;memory&nbsp;due&nbsp;to&nbsp;133x&nbsp;overhead<br>
115643&nbsp;&nbsp;valgrind&nbsp;cannot&nbsp;allocate&nbsp;memory<br>
105974&nbsp;&nbsp;vg_hashtable.c&nbsp;static&nbsp;hash&nbsp;table<br>
109323&nbsp;&nbsp;ppc32:&nbsp;dispatch.S&nbsp;uses&nbsp;Altivec&nbsp;insn,&nbsp;which&nbsp;doesn't&nbsp;work&nbsp;on&nbsp;POWER.&nbsp;<br>
109345&nbsp;&nbsp;ptrace_setregs&nbsp;not&nbsp;yet&nbsp;implemented&nbsp;for&nbsp;ppc<br>
110831&nbsp;&nbsp;Would&nbsp;like&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;run&nbsp;against&nbsp;both&nbsp;32&nbsp;and&nbsp;64&nbsp;bit&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binaries&nbsp;on&nbsp;AMD64<br>
110829&nbsp;&nbsp;==&nbsp;110831<br>
111781&nbsp;&nbsp;compile&nbsp;of&nbsp;valgrind-3.0.0&nbsp;fails&nbsp;on&nbsp;my&nbsp;linux&nbsp;(gcc&nbsp;2.X&nbsp;prob)<br>
112670&nbsp;&nbsp;Cachegrind:&nbsp;cg_main.c:486&nbsp;(handleOneStatement&nbsp;...<br>
112941&nbsp;&nbsp;vex&nbsp;x86:&nbsp;0xD9&nbsp;0xF4&nbsp;(fxtract)<br>
110201&nbsp;&nbsp;==&nbsp;112941<br>
113015&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0xE3&nbsp;0x14&nbsp;0x48&nbsp;0x83&nbsp;(jrcxz)<br>
113126&nbsp;&nbsp;Crash&nbsp;with&nbsp;binaries&nbsp;built&nbsp;with&nbsp;-gstabs+/-ggdb<br>
104065&nbsp;&nbsp;==&nbsp;113126<br>
115741&nbsp;&nbsp;==&nbsp;113126<br>
113403&nbsp;&nbsp;Partial&nbsp;SSE3&nbsp;support&nbsp;on&nbsp;x86<br>
113541&nbsp;&nbsp;vex:&nbsp;Grp5(x86)&nbsp;(alt&nbsp;encoding&nbsp;inc/dec)&nbsp;case&nbsp;1<br>
113642&nbsp;&nbsp;valgrind&nbsp;crashes&nbsp;when&nbsp;trying&nbsp;to&nbsp;read&nbsp;debug&nbsp;information<br>
113810&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;66&nbsp;0F&nbsp;F6&nbsp;(66&nbsp;+&nbsp;PSADBW&nbsp;==&nbsp;SSE&nbsp;PSADBW)<br>
113796&nbsp;&nbsp;read()&nbsp;and&nbsp;write()&nbsp;do&nbsp;not&nbsp;work&nbsp;if&nbsp;buffer&nbsp;is&nbsp;in&nbsp;shared&nbsp;memory<br>
113851&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;(pmaddwd):&nbsp;0x66&nbsp;0xF&nbsp;0xF5&nbsp;0xC7<br>
114366&nbsp;&nbsp;vex&nbsp;amd64&nbsp;cannnot&nbsp;handle&nbsp;__asm__(&nbsp;"fninit"&nbsp;)<br>
114412&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0xF&nbsp;0xAD&nbsp;0xC2&nbsp;0xD3&nbsp;(128-bit&nbsp;shift,&nbsp;shrdq?)<br>
114455&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0xF&nbsp;0xAC&nbsp;0xD0&nbsp;0x1&nbsp;(also&nbsp;shrdq)<br>
115590:&nbsp;amd64-&gt;IR:&nbsp;0x67&nbsp;0xE3&nbsp;0x9&nbsp;0xEB&nbsp;(address&nbsp;size&nbsp;override)<br>
115953&nbsp;&nbsp;valgrind&nbsp;svn&nbsp;r5042&nbsp;does&nbsp;not&nbsp;build&nbsp;with&nbsp;parallel&nbsp;make&nbsp;(-j3)<br>
116057&nbsp;&nbsp;maximum&nbsp;instruction&nbsp;size&nbsp;-&nbsp;VG_MAX_INSTR_SZB&nbsp;too&nbsp;small?<br>
116483&nbsp;&nbsp;shmat&nbsp;failes&nbsp;with&nbsp;invalid&nbsp;argument<br>
102202&nbsp;&nbsp;valgrind&nbsp;crashes&nbsp;when&nbsp;realloc'ing&nbsp;until&nbsp;out&nbsp;of&nbsp;memory<br>
109487&nbsp;&nbsp;==&nbsp;102202<br>
110536&nbsp;&nbsp;==&nbsp;102202<br>
112687&nbsp;&nbsp;==&nbsp;102202<br>
111724&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0x41&nbsp;0xF&nbsp;0xAB&nbsp;(more&nbsp;BT{,S,R,C}&nbsp;fun&nbsp;n&nbsp;games)<br>
111748&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;0xDD&nbsp;0xE2&nbsp;(fucom)<br>
111785&nbsp;&nbsp;make&nbsp;fails&nbsp;if&nbsp;CC&nbsp;contains&nbsp;spaces<br>
111829&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;sbb&nbsp;AL,&nbsp;Ib<br>
111851&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;0x9F&nbsp;0x89&nbsp;(lahf/sahf)<br>
112031&nbsp;&nbsp;iopl&nbsp;on&nbsp;AMD64&nbsp;and&nbsp;README_MISSING_SYSCALL_OR_IOCTL&nbsp;update<br>
112152&nbsp;&nbsp;code&nbsp;generation&nbsp;for&nbsp;Xin_MFence&nbsp;on&nbsp;x86&nbsp;with&nbsp;SSE0&nbsp;subarch<br>
112167&nbsp;&nbsp;==&nbsp;112152<br>
112789&nbsp;&nbsp;==&nbsp;112152<br>
112199&nbsp;&nbsp;naked&nbsp;ar&nbsp;tool&nbsp;is&nbsp;used&nbsp;in&nbsp;vex&nbsp;makefile<br>
112501&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;movq&nbsp;(0xF&nbsp;0x7F&nbsp;0xC1&nbsp;0xF)&nbsp;(mmx&nbsp;MOVQ)<br>
113583&nbsp;&nbsp;==&nbsp;112501<br>
112538&nbsp;&nbsp;memalign&nbsp;crash<br>
113190&nbsp;&nbsp;Broken&nbsp;links&nbsp;in&nbsp;docs/html/<br>
113230&nbsp;&nbsp;Valgrind&nbsp;sys_pipe&nbsp;on&nbsp;x86-64&nbsp;wrongly&nbsp;thinks&nbsp;file&nbsp;descriptors<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;should&nbsp;be&nbsp;64bit<br>
113996&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;fucomp&nbsp;(0xDD&nbsp;0xE9)<br>
114196&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;out&nbsp;%eax,(%dx)&nbsp;(0xEF&nbsp;0xC9&nbsp;0xC3&nbsp;0x90)<br>
114289&nbsp;&nbsp;Memcheck&nbsp;fails&nbsp;to&nbsp;intercept&nbsp;malloc&nbsp;when&nbsp;used&nbsp;in&nbsp;an&nbsp;uclibc&nbsp;environment<br>
114756&nbsp;&nbsp;mbind&nbsp;syscall&nbsp;support<br>
114757&nbsp;&nbsp;Valgrind&nbsp;dies&nbsp;with&nbsp;assertion:&nbsp;Assertion&nbsp;'noLargerThan&nbsp;&gt;&nbsp;0'&nbsp;failed<br>
114563&nbsp;&nbsp;stack&nbsp;tracking&nbsp;module&nbsp;not&nbsp;informed&nbsp;when&nbsp;valgrind&nbsp;switches&nbsp;threads<br>
114564&nbsp;&nbsp;clone()&nbsp;and&nbsp;stacks<br>
114565&nbsp;&nbsp;==&nbsp;114564<br>
115496&nbsp;&nbsp;glibc&nbsp;crashes&nbsp;trying&nbsp;to&nbsp;use&nbsp;sysinfo&nbsp;page<br>
116200&nbsp;&nbsp;enable&nbsp;fsetxattr,&nbsp;fgetxattr,&nbsp;and&nbsp;fremovexattr&nbsp;for&nbsp;amd64<br>
<br>
(3.1.0RC1:&nbsp;20&nbsp;November&nbsp;2005,&nbsp;vex&nbsp;r1466,&nbsp;valgrind&nbsp;r5224).<br>
(3.1.0:&nbsp;&nbsp;&nbsp;&nbsp;26&nbsp;November&nbsp;2005,&nbsp;vex&nbsp;r1471,&nbsp;valgrind&nbsp;r5235).<br>
<br>
<br>
Release&nbsp;3.0.1&nbsp;(29&nbsp;August&nbsp;2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.0.1&nbsp;fixes&nbsp;a&nbsp;bunch&nbsp;of&nbsp;bugs&nbsp;reported&nbsp;in&nbsp;3.0.0.&nbsp;&nbsp;There&nbsp;is&nbsp;no&nbsp;new<br>
functionality.&nbsp;&nbsp;Some&nbsp;of&nbsp;the&nbsp;fixed&nbsp;bugs&nbsp;are&nbsp;critical,&nbsp;so&nbsp;if&nbsp;you<br>
use/distribute&nbsp;3.0.0,&nbsp;an&nbsp;upgrade&nbsp;to&nbsp;3.0.1&nbsp;is&nbsp;recommended.&nbsp;&nbsp;The&nbsp;fixed<br>
bugs&nbsp;are:<br>
<br>
(note:&nbsp;"n-i-bz"&nbsp;means&nbsp;"not&nbsp;in&nbsp;bugzilla"&nbsp;--&nbsp;this&nbsp;bug&nbsp;does&nbsp;not&nbsp;have<br>
&nbsp;a&nbsp;bugzilla&nbsp;entry).<br>
<br>
109313&nbsp;&nbsp;(==&nbsp;110505)&nbsp;x86&nbsp;cmpxchg8b<br>
n-i-bz&nbsp;&nbsp;x86:&nbsp;track&nbsp;but&nbsp;ignore&nbsp;changes&nbsp;to&nbsp;%eflags.AC&nbsp;(alignment&nbsp;check)<br>
110102&nbsp;&nbsp;dis_op2_E_G(amd64)<br>
110202&nbsp;&nbsp;x86&nbsp;sys_waitpid(#286)<br>
110203&nbsp;&nbsp;clock_getres(,0)<br>
110208&nbsp;&nbsp;execve&nbsp;fail&nbsp;wrong&nbsp;retval<br>
110274&nbsp;&nbsp;SSE1&nbsp;now&nbsp;mandatory&nbsp;for&nbsp;x86<br>
110388&nbsp;&nbsp;amd64&nbsp;0xDD&nbsp;0xD1<br>
110464&nbsp;&nbsp;amd64&nbsp;0xDC&nbsp;0x1D&nbsp;FCOMP<br>
110478&nbsp;&nbsp;amd64&nbsp;0xF&nbsp;0xD&nbsp;PREFETCH<br>
n-i-bz&nbsp;&nbsp;XML&nbsp;&lt;unique&gt;&nbsp;printing&nbsp;wrong<br>
n-i-bz&nbsp;&nbsp;Dirk&nbsp;r4359&nbsp;(amd64&nbsp;syscalls&nbsp;from&nbsp;trunk)<br>
110591&nbsp;&nbsp;amd64&nbsp;and&nbsp;x86:&nbsp;rdtsc&nbsp;not&nbsp;implemented&nbsp;properly<br>
n-i-bz&nbsp;&nbsp;Nick&nbsp;r4384&nbsp;(stub&nbsp;implementations&nbsp;of&nbsp;Addrcheck&nbsp;and&nbsp;Helgrind)<br>
110652&nbsp;&nbsp;AMD64&nbsp;valgrind&nbsp;crashes&nbsp;on&nbsp;cwtd&nbsp;instruction<br>
110653&nbsp;&nbsp;AMD64&nbsp;valgrind&nbsp;crashes&nbsp;on&nbsp;sarb&nbsp;$0x4,foo(%rip)&nbsp;instruction<br>
110656&nbsp;&nbsp;PATH=/usr/bin::/bin&nbsp;valgrind&nbsp;foobar&nbsp;stats&nbsp;./fooba<br>
110657&nbsp;&nbsp;Small&nbsp;test&nbsp;fixes<br>
110671&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0xF3&nbsp;0xC3&nbsp;(rep&nbsp;ret)<br>
n-i-bz&nbsp;&nbsp;Nick&nbsp;(Cachegrind&nbsp;should&nbsp;not&nbsp;assert&nbsp;when&nbsp;it&nbsp;encounters&nbsp;a&nbsp;client<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request.)<br>
110685&nbsp;&nbsp;amd64-&gt;IR:&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0xE1&nbsp;0x56&nbsp;(loope&nbsp;Jb)<br>
110830&nbsp;&nbsp;configuring&nbsp;with&nbsp;--host&nbsp;fails&nbsp;to&nbsp;build&nbsp;32&nbsp;bit&nbsp;on&nbsp;64&nbsp;bit&nbsp;target<br>
110875&nbsp;&nbsp;Assertion&nbsp;when&nbsp;execve&nbsp;fails<br>
n-i-bz&nbsp;&nbsp;Updates&nbsp;to&nbsp;Memcheck&nbsp;manual<br>
n-i-bz&nbsp;&nbsp;Fixed&nbsp;broken&nbsp;malloc_usable_size()<br>
110898&nbsp;&nbsp;opteron&nbsp;instructions&nbsp;missing:&nbsp;btq&nbsp;btsq&nbsp;btrq&nbsp;bsfq<br>
110954&nbsp;&nbsp;x86-&gt;IR:&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0xE2&nbsp;0xF6&nbsp;(loop&nbsp;Jb)<br>
n-i-bz&nbsp;&nbsp;Make&nbsp;suppressions&nbsp;work&nbsp;for&nbsp;"???"&nbsp;lines&nbsp;in&nbsp;stacktraces.<br>
111006&nbsp;&nbsp;bogus&nbsp;warnings&nbsp;from&nbsp;linuxthreads<br>
111092&nbsp;&nbsp;x86:&nbsp;dis_Grp2(Reg):&nbsp;unhandled&nbsp;case(x86)&nbsp;<br>
111231&nbsp;&nbsp;sctp_getladdrs()&nbsp;and&nbsp;sctp_getpaddrs()&nbsp;returns&nbsp;uninitialized<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memory<br>
111102&nbsp;&nbsp;(comment&nbsp;#4)&nbsp;&nbsp;&nbsp;Fixed&nbsp;64-bit&nbsp;unclean&nbsp;"silly&nbsp;arg"&nbsp;message<br>
n-i-bz&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0x14&nbsp;0x0<br>
n-i-bz&nbsp;&nbsp;minor&nbsp;umount/fcntl&nbsp;wrapper&nbsp;fixes<br>
111090&nbsp;&nbsp;Internal&nbsp;Error&nbsp;running&nbsp;Massif<br>
101204&nbsp;&nbsp;noisy&nbsp;warning<br>
111513&nbsp;&nbsp;Illegal&nbsp;opcode&nbsp;for&nbsp;SSE&nbsp;instruction&nbsp;(x86&nbsp;movups)<br>
111555&nbsp;&nbsp;VEX/Makefile:&nbsp;CC&nbsp;is&nbsp;set&nbsp;to&nbsp;gcc<br>
n-i-bz&nbsp;&nbsp;Fix&nbsp;XML&nbsp;bugs&nbsp;in&nbsp;FAQ<br>
<br>
(3.0.1:&nbsp;29&nbsp;August&nbsp;05,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vex/branches/VEX_3_0_BRANCH&nbsp;r1367,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valgrind/branches/VALGRIND_3_0_BRANCH&nbsp;r4574).<br>
<br>
<br>
<br>
Release&nbsp;3.0.0&nbsp;(3&nbsp;August&nbsp;2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
3.0.0&nbsp;is&nbsp;a&nbsp;major&nbsp;overhaul&nbsp;of&nbsp;Valgrind.&nbsp;&nbsp;The&nbsp;most&nbsp;significant&nbsp;user<br>
visible&nbsp;change&nbsp;is&nbsp;that&nbsp;Valgrind&nbsp;now&nbsp;supports&nbsp;architectures&nbsp;other&nbsp;than<br>
x86.&nbsp;&nbsp;The&nbsp;new&nbsp;architectures&nbsp;it&nbsp;supports&nbsp;are&nbsp;AMD64&nbsp;and&nbsp;PPC32,&nbsp;and&nbsp;the<br>
infrastructure&nbsp;is&nbsp;present&nbsp;for&nbsp;other&nbsp;architectures&nbsp;to&nbsp;be&nbsp;added&nbsp;later.<br>
<br>
AMD64&nbsp;support&nbsp;works&nbsp;well,&nbsp;but&nbsp;has&nbsp;some&nbsp;shortcomings:<br>
<br>
-&nbsp;It&nbsp;generally&nbsp;won't&nbsp;be&nbsp;as&nbsp;solid&nbsp;as&nbsp;the&nbsp;x86&nbsp;version.&nbsp;&nbsp;For&nbsp;example,<br>
&nbsp;&nbsp;support&nbsp;for&nbsp;more&nbsp;obscure&nbsp;instructions&nbsp;and&nbsp;system&nbsp;calls&nbsp;may&nbsp;be&nbsp;missing.<br>
&nbsp;&nbsp;We&nbsp;will&nbsp;fix&nbsp;these&nbsp;as&nbsp;they&nbsp;arise.<br>
<br>
-&nbsp;Address&nbsp;space&nbsp;may&nbsp;be&nbsp;limited;&nbsp;see&nbsp;the&nbsp;point&nbsp;about<br>
&nbsp;&nbsp;position-independent&nbsp;executables&nbsp;below.<br>
<br>
-&nbsp;If&nbsp;Valgrind&nbsp;is&nbsp;built&nbsp;on&nbsp;an&nbsp;AMD64&nbsp;machine,&nbsp;it&nbsp;will&nbsp;only&nbsp;run&nbsp;64-bit<br>
&nbsp;&nbsp;executables.&nbsp;&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;run&nbsp;32-bit&nbsp;x86&nbsp;executables&nbsp;under&nbsp;Valgrind<br>
&nbsp;&nbsp;on&nbsp;an&nbsp;AMD64,&nbsp;you&nbsp;will&nbsp;need&nbsp;to&nbsp;build&nbsp;Valgrind&nbsp;on&nbsp;an&nbsp;x86&nbsp;machine&nbsp;and<br>
&nbsp;&nbsp;copy&nbsp;it&nbsp;to&nbsp;the&nbsp;AMD64&nbsp;machine.&nbsp;&nbsp;And&nbsp;it&nbsp;probably&nbsp;won't&nbsp;work&nbsp;if&nbsp;you&nbsp;do<br>
&nbsp;&nbsp;something&nbsp;tricky&nbsp;like&nbsp;exec'ing&nbsp;a&nbsp;32-bit&nbsp;program&nbsp;from&nbsp;a&nbsp;64-bit&nbsp;program<br>
&nbsp;&nbsp;while&nbsp;using&nbsp;--trace-children=yes.&nbsp;&nbsp;We&nbsp;hope&nbsp;to&nbsp;improve&nbsp;this&nbsp;situation<br>
&nbsp;&nbsp;in&nbsp;the&nbsp;future.<br>
<br>
The&nbsp;PPC32&nbsp;support&nbsp;is&nbsp;very&nbsp;basic.&nbsp;&nbsp;It&nbsp;may&nbsp;not&nbsp;work&nbsp;reliably&nbsp;even&nbsp;for<br>
small&nbsp;programs,&nbsp;but&nbsp;it's&nbsp;a&nbsp;start.&nbsp;&nbsp;Many&nbsp;thanks&nbsp;to&nbsp;Paul&nbsp;Mackerras&nbsp;for<br>
his&nbsp;great&nbsp;work&nbsp;that&nbsp;enabled&nbsp;this&nbsp;support.&nbsp;&nbsp;We&nbsp;are&nbsp;working&nbsp;to&nbsp;make<br>
PPC32&nbsp;usable&nbsp;as&nbsp;soon&nbsp;as&nbsp;possible.<br>
<br>
Other&nbsp;user-visible&nbsp;changes:<br>
<br>
-&nbsp;Valgrind&nbsp;is&nbsp;no&nbsp;longer&nbsp;built&nbsp;by&nbsp;default&nbsp;as&nbsp;a&nbsp;position-independent<br>
&nbsp;&nbsp;executable&nbsp;(PIE),&nbsp;as&nbsp;this&nbsp;caused&nbsp;too&nbsp;many&nbsp;problems.<br>
<br>
&nbsp;&nbsp;Without&nbsp;PIE&nbsp;enabled,&nbsp;AMD64&nbsp;programs&nbsp;will&nbsp;only&nbsp;be&nbsp;able&nbsp;to&nbsp;access&nbsp;2GB&nbsp;of<br>
&nbsp;&nbsp;address&nbsp;space.&nbsp;&nbsp;We&nbsp;will&nbsp;fix&nbsp;this&nbsp;eventually,&nbsp;but&nbsp;not&nbsp;for&nbsp;the&nbsp;moment.<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;Use&nbsp;--enable-pie&nbsp;at&nbsp;configure-time&nbsp;to&nbsp;turn&nbsp;this&nbsp;on.<br>
<br>
-&nbsp;Support&nbsp;for&nbsp;programs&nbsp;that&nbsp;use&nbsp;stack-switching&nbsp;has&nbsp;been&nbsp;improved.&nbsp;&nbsp;Use<br>
&nbsp;&nbsp;the&nbsp;--max-stackframe&nbsp;flag&nbsp;for&nbsp;simple&nbsp;cases,&nbsp;and&nbsp;the<br>
&nbsp;&nbsp;VALGRIND_STACK_REGISTER,&nbsp;VALGRIND_STACK_DEREGISTER&nbsp;and<br>
&nbsp;&nbsp;VALGRIND_STACK_CHANGE&nbsp;client&nbsp;requests&nbsp;for&nbsp;trickier&nbsp;cases.<br>
<br>
-&nbsp;Support&nbsp;for&nbsp;programs&nbsp;that&nbsp;use&nbsp;self-modifying&nbsp;code&nbsp;has&nbsp;been&nbsp;improved,<br>
&nbsp;&nbsp;in&nbsp;particular&nbsp;programs&nbsp;that&nbsp;put&nbsp;temporary&nbsp;code&nbsp;fragments&nbsp;on&nbsp;the&nbsp;stack.<br>
&nbsp;&nbsp;This&nbsp;helps&nbsp;for&nbsp;C&nbsp;programs&nbsp;compiled&nbsp;with&nbsp;GCC&nbsp;that&nbsp;use&nbsp;nested&nbsp;functions,<br>
&nbsp;&nbsp;and&nbsp;also&nbsp;Ada&nbsp;programs.&nbsp;&nbsp;This&nbsp;is&nbsp;controlled&nbsp;with&nbsp;the&nbsp;--smc-check<br>
&nbsp;&nbsp;flag,&nbsp;although&nbsp;the&nbsp;default&nbsp;setting&nbsp;should&nbsp;work&nbsp;in&nbsp;most&nbsp;cases.<br>
<br>
-&nbsp;Output&nbsp;can&nbsp;now&nbsp;be&nbsp;printed&nbsp;in&nbsp;XML&nbsp;format.&nbsp;&nbsp;This&nbsp;should&nbsp;make&nbsp;it&nbsp;easier<br>
&nbsp;&nbsp;for&nbsp;tools&nbsp;such&nbsp;as&nbsp;GUI&nbsp;front-ends&nbsp;and&nbsp;automated&nbsp;error-processing<br>
&nbsp;&nbsp;schemes&nbsp;to&nbsp;use&nbsp;Valgrind&nbsp;output&nbsp;as&nbsp;input.&nbsp;&nbsp;The&nbsp;--xml&nbsp;flag&nbsp;controls&nbsp;this.<br>
&nbsp;&nbsp;As&nbsp;part&nbsp;of&nbsp;this&nbsp;change,&nbsp;ELF&nbsp;directory&nbsp;information&nbsp;is&nbsp;read&nbsp;from&nbsp;executables,<br>
&nbsp;&nbsp;so&nbsp;absolute&nbsp;source&nbsp;file&nbsp;paths&nbsp;are&nbsp;available&nbsp;if&nbsp;needed.<br>
<br>
-&nbsp;Programs&nbsp;that&nbsp;allocate&nbsp;many&nbsp;heap&nbsp;blocks&nbsp;may&nbsp;run&nbsp;faster,&nbsp;due&nbsp;to<br>
&nbsp;&nbsp;improvements&nbsp;in&nbsp;certain&nbsp;data&nbsp;structures.<br>
<br>
-&nbsp;Addrcheck&nbsp;is&nbsp;currently&nbsp;not&nbsp;working.&nbsp;&nbsp;We&nbsp;hope&nbsp;to&nbsp;get&nbsp;it&nbsp;working&nbsp;again<br>
&nbsp;&nbsp;soon.&nbsp;&nbsp;Helgrind&nbsp;is&nbsp;still&nbsp;not&nbsp;working,&nbsp;as&nbsp;was&nbsp;the&nbsp;case&nbsp;for&nbsp;the&nbsp;2.4.0<br>
&nbsp;&nbsp;release.<br>
<br>
-&nbsp;The&nbsp;JITter&nbsp;has&nbsp;been&nbsp;completely&nbsp;rewritten,&nbsp;and&nbsp;is&nbsp;now&nbsp;in&nbsp;a&nbsp;separate<br>
&nbsp;&nbsp;library,&nbsp;called&nbsp;Vex.&nbsp;&nbsp;This&nbsp;enabled&nbsp;a&nbsp;lot&nbsp;of&nbsp;the&nbsp;user-visible&nbsp;changes,<br>
&nbsp;&nbsp;such&nbsp;as&nbsp;new&nbsp;architecture&nbsp;support.&nbsp;&nbsp;The&nbsp;new&nbsp;JIT&nbsp;unfortunately&nbsp;translates<br>
&nbsp;&nbsp;more&nbsp;slowly&nbsp;than&nbsp;the&nbsp;old&nbsp;one,&nbsp;so&nbsp;programs&nbsp;may&nbsp;take&nbsp;longer&nbsp;to&nbsp;start.<br>
&nbsp;&nbsp;We&nbsp;believe&nbsp;the&nbsp;code&nbsp;quality&nbsp;is&nbsp;produces&nbsp;is&nbsp;about&nbsp;the&nbsp;same,&nbsp;so&nbsp;once<br>
&nbsp;&nbsp;started,&nbsp;programs&nbsp;should&nbsp;run&nbsp;at&nbsp;about&nbsp;the&nbsp;same&nbsp;speed.&nbsp;&nbsp;Feedback&nbsp;about<br>
&nbsp;&nbsp;this&nbsp;would&nbsp;be&nbsp;useful.<br>
<br>
&nbsp;&nbsp;On&nbsp;the&nbsp;plus&nbsp;side,&nbsp;Vex&nbsp;and&nbsp;hence&nbsp;Memcheck&nbsp;tracks&nbsp;value&nbsp;flow&nbsp;properly<br>
&nbsp;&nbsp;through&nbsp;floating&nbsp;point&nbsp;and&nbsp;vector&nbsp;registers,&nbsp;something&nbsp;the&nbsp;2.X&nbsp;line<br>
&nbsp;&nbsp;could&nbsp;not&nbsp;do.&nbsp;&nbsp;That&nbsp;means&nbsp;that&nbsp;Memcheck&nbsp;is&nbsp;much&nbsp;more&nbsp;likely&nbsp;to&nbsp;be<br>
&nbsp;&nbsp;usably&nbsp;accurate&nbsp;on&nbsp;vectorised&nbsp;code.<br>
<br>
-&nbsp;There&nbsp;is&nbsp;a&nbsp;subtle&nbsp;change&nbsp;to&nbsp;the&nbsp;way&nbsp;exiting&nbsp;of&nbsp;threaded&nbsp;programs<br>
&nbsp;&nbsp;is&nbsp;handled.&nbsp;&nbsp;In&nbsp;3.0,&nbsp;Valgrind's&nbsp;final&nbsp;diagnostic&nbsp;output&nbsp;(leak&nbsp;check,<br>
&nbsp;&nbsp;etc)&nbsp;is&nbsp;not&nbsp;printed&nbsp;until&nbsp;the&nbsp;last&nbsp;thread&nbsp;exits.&nbsp;&nbsp;If&nbsp;the&nbsp;last&nbsp;thread<br>
&nbsp;&nbsp;to&nbsp;exit&nbsp;was&nbsp;not&nbsp;the&nbsp;original&nbsp;thread&nbsp;which&nbsp;started&nbsp;the&nbsp;program,&nbsp;any<br>
&nbsp;&nbsp;other&nbsp;process&nbsp;wait()-ing&nbsp;on&nbsp;this&nbsp;one&nbsp;to&nbsp;exit&nbsp;may&nbsp;conclude&nbsp;it&nbsp;has<br>
&nbsp;&nbsp;finished&nbsp;before&nbsp;the&nbsp;diagnostic&nbsp;output&nbsp;is&nbsp;printed.&nbsp;&nbsp;This&nbsp;may&nbsp;not&nbsp;be<br>
&nbsp;&nbsp;what&nbsp;you&nbsp;expect.&nbsp;&nbsp;2.X&nbsp;had&nbsp;a&nbsp;different&nbsp;scheme&nbsp;which&nbsp;avoided&nbsp;this<br>
&nbsp;&nbsp;problem,&nbsp;but&nbsp;caused&nbsp;deadlocks&nbsp;under&nbsp;obscure&nbsp;circumstances,&nbsp;so&nbsp;we<br>
&nbsp;&nbsp;are&nbsp;trying&nbsp;something&nbsp;different&nbsp;for&nbsp;3.0.<br>
<br>
-&nbsp;Small&nbsp;changes&nbsp;in&nbsp;control&nbsp;log&nbsp;file&nbsp;naming&nbsp;which&nbsp;make&nbsp;it&nbsp;easier&nbsp;to<br>
&nbsp;&nbsp;use&nbsp;valgrind&nbsp;for&nbsp;debugging&nbsp;MPI-based&nbsp;programs.&nbsp;&nbsp;The&nbsp;relevant<br>
&nbsp;&nbsp;new&nbsp;flags&nbsp;are&nbsp;--log-file-exactly=&nbsp;and&nbsp;--log-file-qualifier=.<br>
<br>
-&nbsp;As&nbsp;part&nbsp;of&nbsp;adding&nbsp;AMD64&nbsp;support,&nbsp;DWARF2&nbsp;CFI-based&nbsp;stack&nbsp;unwinding<br>
&nbsp;&nbsp;support&nbsp;was&nbsp;added.&nbsp;&nbsp;In&nbsp;principle&nbsp;this&nbsp;means&nbsp;Valgrind&nbsp;can&nbsp;produce<br>
&nbsp;&nbsp;meaningful&nbsp;backtraces&nbsp;on&nbsp;x86&nbsp;code&nbsp;compiled&nbsp;with&nbsp;-fomit-frame-pointer<br>
&nbsp;&nbsp;providing&nbsp;you&nbsp;also&nbsp;compile&nbsp;your&nbsp;code&nbsp;with&nbsp;-fasynchronous-unwind-tables.<br>
<br>
-&nbsp;The&nbsp;documentation&nbsp;build&nbsp;system&nbsp;has&nbsp;been&nbsp;completely&nbsp;redone.<br>
&nbsp;&nbsp;The&nbsp;documentation&nbsp;masters&nbsp;are&nbsp;now&nbsp;in&nbsp;XML&nbsp;format,&nbsp;and&nbsp;from&nbsp;that<br>
&nbsp;&nbsp;HTML,&nbsp;PostScript&nbsp;and&nbsp;PDF&nbsp;documentation&nbsp;is&nbsp;generated.&nbsp;&nbsp;As&nbsp;a&nbsp;result<br>
&nbsp;&nbsp;the&nbsp;manual&nbsp;is&nbsp;now&nbsp;available&nbsp;in&nbsp;book&nbsp;form.&nbsp;&nbsp;Note&nbsp;that&nbsp;the<br>
&nbsp;&nbsp;documentation&nbsp;in&nbsp;the&nbsp;source&nbsp;tarballs&nbsp;is&nbsp;pre-built,&nbsp;so&nbsp;you&nbsp;don't&nbsp;need<br>
&nbsp;&nbsp;any&nbsp;XML&nbsp;processing&nbsp;tools&nbsp;to&nbsp;build&nbsp;Valgrind&nbsp;from&nbsp;a&nbsp;tarball.<br>
<br>
Changes&nbsp;that&nbsp;are&nbsp;not&nbsp;user-visible:<br>
<br>
-&nbsp;The&nbsp;code&nbsp;has&nbsp;been&nbsp;massively&nbsp;overhauled&nbsp;in&nbsp;order&nbsp;to&nbsp;modularise&nbsp;it.<br>
&nbsp;&nbsp;As&nbsp;a&nbsp;result&nbsp;we&nbsp;hope&nbsp;it&nbsp;is&nbsp;easier&nbsp;to&nbsp;navigate&nbsp;and&nbsp;understand.<br>
<br>
-&nbsp;Lots&nbsp;of&nbsp;code&nbsp;has&nbsp;been&nbsp;rewritten.<br>
<br>
BUGS&nbsp;FIXED:<br>
<br>
110046&nbsp;&nbsp;sz&nbsp;==&nbsp;4&nbsp;assertion&nbsp;failed&nbsp;<br>
109810&nbsp;&nbsp;vex&nbsp;amd64-&gt;IR:&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0xA3&nbsp;0x4C&nbsp;0x70&nbsp;0xD7<br>
109802&nbsp;&nbsp;Add&nbsp;a&nbsp;plausible_stack_size&nbsp;command-line&nbsp;parameter&nbsp;?<br>
109783&nbsp;&nbsp;unhandled&nbsp;ioctl&nbsp;TIOCMGET&nbsp;(running&nbsp;hw&nbsp;detection&nbsp;tool&nbsp;discover)&nbsp;<br>
109780&nbsp;&nbsp;unhandled&nbsp;ioctl&nbsp;BLKSSZGET&nbsp;(running&nbsp;fdisk&nbsp;-l&nbsp;/dev/hda)<br>
109718&nbsp;&nbsp;vex&nbsp;x86-&gt;IR:&nbsp;unhandled&nbsp;instruction:&nbsp;ffreep&nbsp;<br>
109429&nbsp;&nbsp;AMD64&nbsp;unhandled&nbsp;syscall:&nbsp;127&nbsp;(sigpending)<br>
109401&nbsp;&nbsp;false&nbsp;positive&nbsp;uninit&nbsp;in&nbsp;strchr&nbsp;from&nbsp;ld-linux.so.2<br>
109385&nbsp;&nbsp;"stabs"&nbsp;parse&nbsp;failure&nbsp;<br>
109378&nbsp;&nbsp;amd64:&nbsp;unhandled&nbsp;instruction&nbsp;REP&nbsp;NOP<br>
109376&nbsp;&nbsp;amd64:&nbsp;unhandled&nbsp;instruction&nbsp;LOOP&nbsp;Jb&nbsp;<br>
109363&nbsp;&nbsp;AMD64&nbsp;unhandled&nbsp;instruction&nbsp;bytes&nbsp;<br>
109362&nbsp;&nbsp;AMD64&nbsp;unhandled&nbsp;syscall:&nbsp;24&nbsp;(sched_yield)<br>
109358&nbsp;&nbsp;fork()&nbsp;won't&nbsp;work&nbsp;with&nbsp;valgrind-3.0&nbsp;SVN<br>
109332&nbsp;&nbsp;amd64&nbsp;unhandled&nbsp;instruction:&nbsp;ADC&nbsp;Ev,&nbsp;Gv<br>
109314&nbsp;&nbsp;Bogus&nbsp;memcheck&nbsp;report&nbsp;on&nbsp;amd64<br>
108883&nbsp;&nbsp;Crash;&nbsp;vg_memory.c:905&nbsp;(vgPlain_init_shadow_range):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Assertion&nbsp;`vgPlain_defined_init_shadow_page()'&nbsp;failed.<br>
108349&nbsp;&nbsp;mincore&nbsp;syscall&nbsp;parameter&nbsp;checked&nbsp;incorrectly&nbsp;<br>
108059&nbsp;&nbsp;build&nbsp;infrastructure:&nbsp;small&nbsp;update<br>
107524&nbsp;&nbsp;epoll_ctl&nbsp;event&nbsp;parameter&nbsp;checked&nbsp;on&nbsp;EPOLL_CTL_DEL<br>
107123&nbsp;&nbsp;Vex&nbsp;dies&nbsp;with&nbsp;unhandled&nbsp;instructions:&nbsp;0xD9&nbsp;0x31&nbsp;0xF&nbsp;0xAE<br>
106841&nbsp;&nbsp;auxmap&nbsp;&amp;&nbsp;openGL&nbsp;problems<br>
106713&nbsp;&nbsp;SDL_Init&nbsp;causes&nbsp;valgrind&nbsp;to&nbsp;exit<br>
106352&nbsp;&nbsp;setcontext&nbsp;and&nbsp;makecontext&nbsp;not&nbsp;handled&nbsp;correctly&nbsp;<br>
106293&nbsp;&nbsp;addresses&nbsp;beyond&nbsp;initial&nbsp;client&nbsp;stack&nbsp;allocation&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;checked&nbsp;in&nbsp;VALGRIND_DO_LEAK_CHECK<br>
106283&nbsp;&nbsp;PIE&nbsp;client&nbsp;programs&nbsp;are&nbsp;loaded&nbsp;at&nbsp;address&nbsp;0<br>
105831&nbsp;&nbsp;Assertion&nbsp;`vgPlain_defined_init_shadow_page()'&nbsp;failed.<br>
105039&nbsp;&nbsp;long&nbsp;run-times&nbsp;probably&nbsp;due&nbsp;to&nbsp;memory&nbsp;manager&nbsp;<br>
104797&nbsp;&nbsp;valgrind&nbsp;needs&nbsp;to&nbsp;be&nbsp;aware&nbsp;of&nbsp;BLKGETSIZE64<br>
103594&nbsp;&nbsp;unhandled&nbsp;instruction:&nbsp;FICOM<br>
103320&nbsp;&nbsp;Valgrind&nbsp;2.4.0&nbsp;fails&nbsp;to&nbsp;compile&nbsp;with&nbsp;gcc&nbsp;3.4.3&nbsp;and&nbsp;-O0<br>
103168&nbsp;&nbsp;potentially&nbsp;memory&nbsp;leak&nbsp;in&nbsp;coregrind/ume.c&nbsp;<br>
102039&nbsp;&nbsp;bad&nbsp;permissions&nbsp;for&nbsp;mapped&nbsp;region&nbsp;at&nbsp;address&nbsp;0xB7C73680<br>
101881&nbsp;&nbsp;weird&nbsp;assertion&nbsp;problem<br>
101543&nbsp;&nbsp;Support&nbsp;fadvise64&nbsp;syscalls<br>
75247&nbsp;&nbsp;&nbsp;x86_64/amd64&nbsp;support&nbsp;(the&nbsp;biggest&nbsp;"bug"&nbsp;we&nbsp;have&nbsp;ever&nbsp;fixed)<br>
<br>
(3.0RC1:&nbsp;27&nbsp;July&nbsp;&nbsp;&nbsp;05,&nbsp;vex&nbsp;r1303,&nbsp;valgrind&nbsp;r4283).<br>
(3.0.0:&nbsp;&nbsp;&nbsp;3&nbsp;August&nbsp;05,&nbsp;vex&nbsp;r1313,&nbsp;valgrind&nbsp;r4316).<br>
<br>
<br>
<br>
Stable&nbsp;release&nbsp;2.4.1&nbsp;(1&nbsp;August&nbsp;2005)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
(The&nbsp;notes&nbsp;for&nbsp;this&nbsp;release&nbsp;have&nbsp;been&nbsp;lost.&nbsp;&nbsp;Sorry!&nbsp;&nbsp;It&nbsp;would&nbsp;have<br>
contained&nbsp;various&nbsp;bug&nbsp;fixes&nbsp;but&nbsp;no&nbsp;new&nbsp;features.)<br>
<br>
<br>
<br>
Stable&nbsp;release&nbsp;2.4.0&nbsp;(March&nbsp;2005)&nbsp;--&nbsp;CHANGES&nbsp;RELATIVE&nbsp;TO&nbsp;2.2.0<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.4.0&nbsp;brings&nbsp;many&nbsp;significant&nbsp;changes&nbsp;and&nbsp;bug&nbsp;fixes.&nbsp;&nbsp;The&nbsp;most<br>
significant&nbsp;user-visible&nbsp;change&nbsp;is&nbsp;that&nbsp;we&nbsp;no&nbsp;longer&nbsp;supply&nbsp;our&nbsp;own<br>
pthread&nbsp;implementation.&nbsp;&nbsp;Instead,&nbsp;Valgrind&nbsp;is&nbsp;finally&nbsp;capable&nbsp;of<br>
running&nbsp;the&nbsp;native&nbsp;thread&nbsp;library,&nbsp;either&nbsp;LinuxThreads&nbsp;or&nbsp;NPTL.<br>
<br>
This&nbsp;means&nbsp;our&nbsp;libpthread&nbsp;has&nbsp;gone,&nbsp;along&nbsp;with&nbsp;the&nbsp;bugs&nbsp;associated<br>
with&nbsp;it.&nbsp;&nbsp;Valgrind&nbsp;now&nbsp;supports&nbsp;the&nbsp;kernel's&nbsp;threading&nbsp;syscalls,&nbsp;and<br>
lets&nbsp;you&nbsp;use&nbsp;your&nbsp;standard&nbsp;system&nbsp;libpthread.&nbsp;&nbsp;As&nbsp;a&nbsp;result:<br>
<br>
*&nbsp;There&nbsp;are&nbsp;many&nbsp;fewer&nbsp;system&nbsp;dependencies&nbsp;and&nbsp;strange&nbsp;library-related<br>
&nbsp;&nbsp;bugs.&nbsp;&nbsp;There&nbsp;is&nbsp;a&nbsp;small&nbsp;performance&nbsp;improvement,&nbsp;and&nbsp;a&nbsp;large<br>
&nbsp;&nbsp;stability&nbsp;improvement.<br>
<br>
*&nbsp;On&nbsp;the&nbsp;downside,&nbsp;Valgrind&nbsp;can&nbsp;no&nbsp;longer&nbsp;report&nbsp;misuses&nbsp;of&nbsp;the&nbsp;POSIX<br>
&nbsp;&nbsp;PThreads&nbsp;API.&nbsp;&nbsp;It&nbsp;also&nbsp;means&nbsp;that&nbsp;Helgrind&nbsp;currently&nbsp;does&nbsp;not&nbsp;work.<br>
&nbsp;&nbsp;We&nbsp;hope&nbsp;to&nbsp;fix&nbsp;these&nbsp;problems&nbsp;in&nbsp;a&nbsp;future&nbsp;release.<br>
<br>
Note&nbsp;that&nbsp;running&nbsp;the&nbsp;native&nbsp;thread&nbsp;libraries&nbsp;does&nbsp;not&nbsp;mean&nbsp;Valgrind<br>
is&nbsp;able&nbsp;to&nbsp;provide&nbsp;genuine&nbsp;concurrent&nbsp;execution&nbsp;on&nbsp;SMPs.&nbsp;&nbsp;We&nbsp;still<br>
impose&nbsp;the&nbsp;restriction&nbsp;that&nbsp;only&nbsp;one&nbsp;thread&nbsp;is&nbsp;running&nbsp;at&nbsp;any&nbsp;given<br>
time.<br>
<br>
There&nbsp;are&nbsp;many&nbsp;other&nbsp;significant&nbsp;changes&nbsp;too:<br>
<br>
*&nbsp;Memcheck&nbsp;is&nbsp;(once&nbsp;again)&nbsp;the&nbsp;default&nbsp;tool.<br>
<br>
*&nbsp;The&nbsp;default&nbsp;stack&nbsp;backtrace&nbsp;is&nbsp;now&nbsp;12&nbsp;call&nbsp;frames,&nbsp;rather&nbsp;than&nbsp;4.<br>
<br>
*&nbsp;Suppressions&nbsp;can&nbsp;have&nbsp;up&nbsp;to&nbsp;25&nbsp;call&nbsp;frame&nbsp;matches,&nbsp;rather&nbsp;than&nbsp;4.<br>
<br>
*&nbsp;Memcheck&nbsp;and&nbsp;Addrcheck&nbsp;use&nbsp;less&nbsp;memory.&nbsp;&nbsp;Under&nbsp;some&nbsp;circumstances,<br>
&nbsp;&nbsp;they&nbsp;no&nbsp;longer&nbsp;allocate&nbsp;shadow&nbsp;memory&nbsp;if&nbsp;there&nbsp;are&nbsp;large&nbsp;regions&nbsp;of<br>
&nbsp;&nbsp;memory&nbsp;with&nbsp;the&nbsp;same&nbsp;A/V&nbsp;states&nbsp;-&nbsp;such&nbsp;as&nbsp;an&nbsp;mmaped&nbsp;file.<br>
<br>
*&nbsp;The&nbsp;memory-leak&nbsp;detector&nbsp;in&nbsp;Memcheck&nbsp;and&nbsp;Addrcheck&nbsp;has&nbsp;been<br>
&nbsp;&nbsp;improved.&nbsp;&nbsp;It&nbsp;now&nbsp;reports&nbsp;more&nbsp;types&nbsp;of&nbsp;memory&nbsp;leak,&nbsp;including<br>
&nbsp;&nbsp;leaked&nbsp;cycles.&nbsp;&nbsp;When&nbsp;reporting&nbsp;leaked&nbsp;memory,&nbsp;it&nbsp;can&nbsp;distinguish<br>
&nbsp;&nbsp;between&nbsp;directly&nbsp;leaked&nbsp;memory&nbsp;(memory&nbsp;with&nbsp;no&nbsp;references),&nbsp;and<br>
&nbsp;&nbsp;indirectly&nbsp;leaked&nbsp;memory&nbsp;(memory&nbsp;only&nbsp;referred&nbsp;to&nbsp;by&nbsp;other&nbsp;leaked<br>
&nbsp;&nbsp;memory).<br>
<br>
*&nbsp;Memcheck's&nbsp;confusion&nbsp;over&nbsp;the&nbsp;effect&nbsp;of&nbsp;mprotect()&nbsp;has&nbsp;been&nbsp;fixed:<br>
&nbsp;&nbsp;previously&nbsp;mprotect&nbsp;could&nbsp;erroneously&nbsp;mark&nbsp;undefined&nbsp;data&nbsp;as<br>
&nbsp;&nbsp;defined.<br>
<br>
*&nbsp;Signal&nbsp;handling&nbsp;is&nbsp;much&nbsp;improved&nbsp;and&nbsp;should&nbsp;be&nbsp;very&nbsp;close&nbsp;to&nbsp;what<br>
&nbsp;&nbsp;you&nbsp;get&nbsp;when&nbsp;running&nbsp;natively.&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;One&nbsp;result&nbsp;of&nbsp;this&nbsp;is&nbsp;that&nbsp;Valgrind&nbsp;observes&nbsp;changes&nbsp;to&nbsp;sigcontexts<br>
&nbsp;&nbsp;passed&nbsp;to&nbsp;signal&nbsp;handlers.&nbsp;&nbsp;Such&nbsp;modifications&nbsp;will&nbsp;take&nbsp;effect&nbsp;when<br>
&nbsp;&nbsp;the&nbsp;signal&nbsp;returns.&nbsp;&nbsp;You&nbsp;will&nbsp;need&nbsp;to&nbsp;run&nbsp;with&nbsp;--single-step=yes&nbsp;to<br>
&nbsp;&nbsp;make&nbsp;this&nbsp;useful.<br>
<br>
*&nbsp;Valgrind&nbsp;is&nbsp;built&nbsp;in&nbsp;Position&nbsp;Independent&nbsp;Executable&nbsp;(PIE)&nbsp;format&nbsp;if<br>
&nbsp;&nbsp;your&nbsp;toolchain&nbsp;supports&nbsp;it.&nbsp;&nbsp;This&nbsp;allows&nbsp;it&nbsp;to&nbsp;take&nbsp;advantage&nbsp;of&nbsp;all<br>
&nbsp;&nbsp;the&nbsp;available&nbsp;address&nbsp;space&nbsp;on&nbsp;systems&nbsp;with&nbsp;4Gbyte&nbsp;user&nbsp;address<br>
&nbsp;&nbsp;spaces.<br>
<br>
*&nbsp;Valgrind&nbsp;can&nbsp;now&nbsp;run&nbsp;itself&nbsp;(requires&nbsp;PIE&nbsp;support).<br>
<br>
*&nbsp;Syscall&nbsp;arguments&nbsp;are&nbsp;now&nbsp;checked&nbsp;for&nbsp;validity.&nbsp;&nbsp;Previously&nbsp;all<br>
&nbsp;&nbsp;memory&nbsp;used&nbsp;by&nbsp;syscalls&nbsp;was&nbsp;checked,&nbsp;but&nbsp;now&nbsp;the&nbsp;actual&nbsp;values<br>
&nbsp;&nbsp;passed&nbsp;are&nbsp;also&nbsp;checked.<br>
<br>
*&nbsp;Syscall&nbsp;wrappers&nbsp;are&nbsp;more&nbsp;robust&nbsp;against&nbsp;bad&nbsp;addresses&nbsp;being&nbsp;passed<br>
&nbsp;&nbsp;to&nbsp;syscalls:&nbsp;they&nbsp;will&nbsp;fail&nbsp;with&nbsp;EFAULT&nbsp;rather&nbsp;than&nbsp;killing&nbsp;Valgrind<br>
&nbsp;&nbsp;with&nbsp;SIGSEGV.<br>
<br>
*&nbsp;Because&nbsp;clone()&nbsp;is&nbsp;directly&nbsp;supported,&nbsp;some&nbsp;non-pthread&nbsp;uses&nbsp;of&nbsp;it<br>
&nbsp;&nbsp;will&nbsp;work.&nbsp;&nbsp;Partial&nbsp;sharing&nbsp;(where&nbsp;some&nbsp;resources&nbsp;are&nbsp;shared,&nbsp;and<br>
&nbsp;&nbsp;some&nbsp;are&nbsp;not)&nbsp;is&nbsp;not&nbsp;supported.<br>
<br>
*&nbsp;open()&nbsp;and&nbsp;readlink()&nbsp;on&nbsp;/proc/self/exe&nbsp;are&nbsp;supported.<br>
<br>
BUGS&nbsp;FIXED:<br>
<br>
88520&nbsp;&nbsp;&nbsp;pipe+fork+dup2&nbsp;kills&nbsp;the&nbsp;main&nbsp;program<br>
88604&nbsp;	Valgrind&nbsp;Aborts&nbsp;when&nbsp;using&nbsp;$VALGRIND_OPTS&nbsp;and&nbsp;user&nbsp;progra...<br>
88614&nbsp;	valgrind:&nbsp;vg_libpthread.c:2323&nbsp;(read):&nbsp;Assertion&nbsp;`read_pt...<br>
88703&nbsp;	Stabs&nbsp;parser&nbsp;fails&nbsp;to&nbsp;handle&nbsp;";"<br>
88886&nbsp;	ioctl&nbsp;wrappers&nbsp;for&nbsp;TIOCMBIS&nbsp;and&nbsp;TIOCMBIC<br>
89032&nbsp;	valgrind&nbsp;pthread_cond_timedwait&nbsp;fails<br>
89106&nbsp;	the&nbsp;'impossible'&nbsp;happened<br>
89139&nbsp;	Missing&nbsp;sched_setaffinity&nbsp;&amp;&nbsp;sched_getaffinity<br>
89198&nbsp;	valgrind&nbsp;lacks&nbsp;support&nbsp;for&nbsp;SIOCSPGRP&nbsp;and&nbsp;SIOCGPGRP<br>
89263&nbsp;	Missing&nbsp;ioctl&nbsp;translations&nbsp;for&nbsp;scsi-generic&nbsp;and&nbsp;CD&nbsp;playing<br>
89440&nbsp;	tests/deadlock.c&nbsp;line&nbsp;endings<br>
89481&nbsp;	`impossible'&nbsp;happened:&nbsp;EXEC&nbsp;FAILED<br>
89663&nbsp;	valgrind&nbsp;2.2.0&nbsp;crash&nbsp;on&nbsp;Redhat&nbsp;7.2<br>
89792&nbsp;	Report&nbsp;pthread_mutex_lock()&nbsp;deadlocks&nbsp;instead&nbsp;of&nbsp;returnin...<br>
90111&nbsp;	statvfs64&nbsp;gives&nbsp;invalid&nbsp;error/warning<br>
90128&nbsp;	crash+memory&nbsp;fault&nbsp;with&nbsp;stabs&nbsp;generated&nbsp;by&nbsp;gnat&nbsp;for&nbsp;a&nbsp;run...<br>
90778&nbsp;	VALGRIND_CHECK_DEFINED()&nbsp;not&nbsp;as&nbsp;documented&nbsp;in&nbsp;memcheck.h<br>
90834&nbsp;	cachegrind&nbsp;crashes&nbsp;at&nbsp;end&nbsp;of&nbsp;program&nbsp;without&nbsp;reporting&nbsp;re...<br>
91028&nbsp;	valgrind:&nbsp;vg_memory.c:229&nbsp;(vgPlain_unmap_range):&nbsp;Assertio...<br>
91162&nbsp;	valgrind&nbsp;crash&nbsp;while&nbsp;debugging&nbsp;drivel&nbsp;1.2.1<br>
91199&nbsp;	Unimplemented&nbsp;function<br>
91325&nbsp;	Signal&nbsp;routing&nbsp;does&nbsp;not&nbsp;propagate&nbsp;the&nbsp;siginfo&nbsp;structure<br>
91599&nbsp;	Assertion&nbsp;`cv&nbsp;==&nbsp;((void&nbsp;*)0)'<br>
91604&nbsp;	rw_lookup&nbsp;clears&nbsp;orig&nbsp;and&nbsp;sends&nbsp;the&nbsp;NULL&nbsp;value&nbsp;to&nbsp;rw_new<br>
91821&nbsp;	Small&nbsp;problems&nbsp;building&nbsp;valgrind&nbsp;with&nbsp;$top_builddir&nbsp;ne&nbsp;$t...<br>
91844&nbsp;	signal&nbsp;11&nbsp;(SIGSEGV)&nbsp;at&nbsp;get_tcb&nbsp;(libpthread.c:86)&nbsp;in&nbsp;corec...<br>
92264&nbsp;	UNIMPLEMENTED&nbsp;FUNCTION:&nbsp;pthread_condattr_setpshared<br>
92331&nbsp;	per-target&nbsp;flags&nbsp;necessitate&nbsp;AM_PROG_CC_C_O<br>
92420&nbsp;	valgrind&nbsp;doesn't&nbsp;compile&nbsp;with&nbsp;linux&nbsp;2.6.8.1/9<br>
92513&nbsp;	Valgrind&nbsp;2.2.0&nbsp;generates&nbsp;some&nbsp;warning&nbsp;messages<br>
92528&nbsp;	vg_symtab2.c:170&nbsp;(addLoc):&nbsp;Assertion&nbsp;`loc-&gt;size&nbsp;&gt;&nbsp;0'&nbsp;failed.<br>
93096&nbsp;	unhandled&nbsp;ioctl&nbsp;0x4B3A&nbsp;and&nbsp;0x5601<br>
93117&nbsp;	Tool&nbsp;and&nbsp;core&nbsp;interface&nbsp;versions&nbsp;do&nbsp;not&nbsp;match<br>
93128&nbsp;	Can't&nbsp;run&nbsp;valgrind&nbsp;--tool=memcheck&nbsp;because&nbsp;of&nbsp;unimplement...<br>
93174&nbsp;	Valgrind&nbsp;can&nbsp;crash&nbsp;if&nbsp;passed&nbsp;bad&nbsp;args&nbsp;to&nbsp;certain&nbsp;syscalls<br>
93309&nbsp;	Stack&nbsp;frame&nbsp;in&nbsp;new&nbsp;thread&nbsp;is&nbsp;badly&nbsp;aligned<br>
93328&nbsp;	Wrong&nbsp;types&nbsp;used&nbsp;with&nbsp;sys_sigprocmask()<br>
93763&nbsp;	/usr/include/asm/msr.h&nbsp;is&nbsp;missing<br>
93776&nbsp;	valgrind:&nbsp;vg_memory.c:508&nbsp;(vgPlain_find_map_space):&nbsp;Asser...<br>
93810&nbsp;	fcntl()&nbsp;argument&nbsp;checking&nbsp;a&nbsp;bit&nbsp;too&nbsp;strict<br>
94378&nbsp;	Assertion&nbsp;`tst-&gt;sigqueue_head&nbsp;!=&nbsp;tst-&gt;sigqueue_tail'&nbsp;failed.<br>
94429&nbsp;	valgrind&nbsp;2.2.0&nbsp;segfault&nbsp;with&nbsp;mmap64&nbsp;in&nbsp;glibc&nbsp;2.3.3<br>
94645&nbsp;	Impossible&nbsp;happened:&nbsp;PINSRW&nbsp;mem<br>
94953&nbsp;	valgrind:&nbsp;the&nbsp;`impossible'&nbsp;happened:&nbsp;SIGSEGV<br>
95667&nbsp;	Valgrind&nbsp;does&nbsp;not&nbsp;work&nbsp;with&nbsp;any&nbsp;KDE&nbsp;app<br>
96243&nbsp;	Assertion&nbsp;'res==0'&nbsp;failed<br>
96252&nbsp;	stage2&nbsp;loader&nbsp;of&nbsp;valgrind&nbsp;fails&nbsp;to&nbsp;allocate&nbsp;memory<br>
96520&nbsp;	All&nbsp;programs&nbsp;crashing&nbsp;at&nbsp;_dl_start&nbsp;(in&nbsp;/lib/ld-2.3.3.so)&nbsp;...<br>
96660&nbsp;	ioctl&nbsp;CDROMREADTOCENTRY&nbsp;causes&nbsp;bogus&nbsp;warnings<br>
96747&nbsp;	After&nbsp;looping&nbsp;in&nbsp;a&nbsp;segfault&nbsp;handler,&nbsp;the&nbsp;impossible&nbsp;happens<br>
96923&nbsp;	Zero&nbsp;sized&nbsp;arrays&nbsp;crash&nbsp;valgrind&nbsp;trace&nbsp;back&nbsp;with&nbsp;SIGFPE<br>
96948&nbsp;	valgrind&nbsp;stops&nbsp;with&nbsp;assertion&nbsp;failure&nbsp;regarding&nbsp;mmap2<br>
96966&nbsp;	valgrind&nbsp;fails&nbsp;when&nbsp;application&nbsp;opens&nbsp;more&nbsp;than&nbsp;16&nbsp;sockets<br>
97398&nbsp;	valgrind:&nbsp;vg_libpthread.c:2667&nbsp;Assertion&nbsp;failed<br>
97407&nbsp;	valgrind:&nbsp;vg_mylibc.c:1226&nbsp;(vgPlain_safe_fd):&nbsp;Assertion&nbsp;`...<br>
97427&nbsp;	"Warning:&nbsp;invalid&nbsp;file&nbsp;descriptor&nbsp;-1&nbsp;in&nbsp;syscall&nbsp;close()"&nbsp;...<br>
97785&nbsp;	missing&nbsp;backtrace<br>
97792&nbsp;	build&nbsp;in&nbsp;obj&nbsp;dir&nbsp;fails&nbsp;-&nbsp;autoconf&nbsp;/&nbsp;makefile&nbsp;cleanup<br>
97880&nbsp;	pthread_mutex_lock&nbsp;fails&nbsp;from&nbsp;shared&nbsp;library&nbsp;(special&nbsp;ker...<br>
97975&nbsp;	program&nbsp;aborts&nbsp;without&nbsp;ang&nbsp;VG&nbsp;messages<br>
98129&nbsp;	Failed&nbsp;when&nbsp;open&nbsp;and&nbsp;close&nbsp;file&nbsp;230000&nbsp;times&nbsp;using&nbsp;stdio<br>
98175&nbsp;	Crashes&nbsp;when&nbsp;using&nbsp;valgrind-2.2.0&nbsp;with&nbsp;a&nbsp;program&nbsp;using&nbsp;al...<br>
98288&nbsp;	Massif&nbsp;broken<br>
98303&nbsp;	UNIMPLEMENTED&nbsp;FUNCTION&nbsp;pthread_condattr_setpshared<br>
98630&nbsp;	failed--compilation&nbsp;missing&nbsp;warnings.pm,&nbsp;fails&nbsp;to&nbsp;make&nbsp;he...<br>
98756&nbsp;	Cannot&nbsp;valgrind&nbsp;signal-heavy&nbsp;kdrive&nbsp;X&nbsp;server<br>
98966&nbsp;	valgrinding&nbsp;the&nbsp;JVM&nbsp;fails&nbsp;with&nbsp;a&nbsp;sanity&nbsp;check&nbsp;assertion<br>
99035&nbsp;	Valgrind&nbsp;crashes&nbsp;while&nbsp;profiling<br>
99142&nbsp;	loops&nbsp;with&nbsp;message&nbsp;"Signal&nbsp;11&nbsp;being&nbsp;dropped&nbsp;from&nbsp;thread&nbsp;0...<br>
99195&nbsp;	threaded&nbsp;apps&nbsp;crash&nbsp;on&nbsp;thread&nbsp;start&nbsp;(using&nbsp;QThread::start...<br>
99348&nbsp;	Assertion&nbsp;`vgPlain_lseek(core_fd,&nbsp;0,&nbsp;1)&nbsp;==&nbsp;phdrs[i].p_off...<br>
99568&nbsp;	False&nbsp;negative&nbsp;due&nbsp;to&nbsp;mishandling&nbsp;of&nbsp;mprotect<br>
99738&nbsp;	valgrind&nbsp;memcheck&nbsp;crashes&nbsp;on&nbsp;program&nbsp;that&nbsp;uses&nbsp;sigitimer<br>
99923&nbsp;	0-sized&nbsp;allocations&nbsp;are&nbsp;reported&nbsp;as&nbsp;leaks<br>
99949&nbsp;	program&nbsp;seg&nbsp;faults&nbsp;after&nbsp;exit()<br>
100036&nbsp;	"newSuperblock's&nbsp;request&nbsp;for&nbsp;1048576&nbsp;bytes&nbsp;failed"<br>
100116&nbsp;	valgrind:&nbsp;(pthread_cond_init):&nbsp;Assertion&nbsp;`sizeof(*&nbsp;cond)&nbsp;...<br>
100486&nbsp;	memcheck&nbsp;reports&nbsp;"valgrind:&nbsp;the&nbsp;`impossible'&nbsp;happened:&nbsp;V...<br>
100833&nbsp;	second&nbsp;call&nbsp;to&nbsp;"mremap"&nbsp;fails&nbsp;with&nbsp;EINVAL<br>
101156&nbsp;	(vgPlain_find_map_space):&nbsp;Assertion&nbsp;`(addr&nbsp;&amp;&nbsp;((1&nbsp;&lt;&lt;&nbsp;12)-1...<br>
101173&nbsp;	Assertion&nbsp;`recDepth&nbsp;&gt;=&nbsp;0&nbsp;&amp;&amp;&nbsp;recDepth&nbsp;&lt;&nbsp;500'&nbsp;failed<br>
101291&nbsp;	creating&nbsp;threads&nbsp;in&nbsp;a&nbsp;forked&nbsp;process&nbsp;fails<br>
101313&nbsp;	valgrind&nbsp;causes&nbsp;different&nbsp;behavior&nbsp;when&nbsp;resizing&nbsp;a&nbsp;window...<br>
101423&nbsp;	segfault&nbsp;for&nbsp;c++&nbsp;array&nbsp;of&nbsp;floats<br>
101562&nbsp;	valgrind&nbsp;massif&nbsp;dies&nbsp;on&nbsp;SIGINT&nbsp;even&nbsp;with&nbsp;signal&nbsp;handler&nbsp;r...<br>
<br>
<br>
Stable&nbsp;release&nbsp;2.2.0&nbsp;(31&nbsp;August&nbsp;2004)&nbsp;--&nbsp;CHANGES&nbsp;RELATIVE&nbsp;TO&nbsp;2.0.0<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.2.0&nbsp;brings&nbsp;nine&nbsp;months&nbsp;worth&nbsp;of&nbsp;improvements&nbsp;and&nbsp;bug&nbsp;fixes.&nbsp;&nbsp;We<br>
believe&nbsp;it&nbsp;to&nbsp;be&nbsp;a&nbsp;worthy&nbsp;successor&nbsp;to&nbsp;2.0.0.&nbsp;&nbsp;There&nbsp;are&nbsp;literally<br>
hundreds&nbsp;of&nbsp;bug&nbsp;fixes&nbsp;and&nbsp;minor&nbsp;improvements.&nbsp;&nbsp;There&nbsp;are&nbsp;also&nbsp;some<br>
fairly&nbsp;major&nbsp;user-visible&nbsp;changes:<br>
<br>
*&nbsp;A&nbsp;complete&nbsp;overhaul&nbsp;of&nbsp;handling&nbsp;of&nbsp;system&nbsp;calls&nbsp;and&nbsp;signals,&nbsp;and&nbsp;<br>
&nbsp;&nbsp;their&nbsp;interaction&nbsp;with&nbsp;threads.&nbsp;&nbsp;In&nbsp;general,&nbsp;the&nbsp;accuracy&nbsp;of&nbsp;the&nbsp;<br>
&nbsp;&nbsp;system&nbsp;call,&nbsp;thread&nbsp;and&nbsp;signal&nbsp;simulations&nbsp;is&nbsp;much&nbsp;improved:<br>
<br>
&nbsp;&nbsp;-&nbsp;Blocking&nbsp;system&nbsp;calls&nbsp;behave&nbsp;exactly&nbsp;as&nbsp;they&nbsp;do&nbsp;when&nbsp;running<br>
&nbsp;&nbsp;&nbsp;&nbsp;natively&nbsp;(not&nbsp;on&nbsp;valgrind).&nbsp;&nbsp;That&nbsp;is,&nbsp;if&nbsp;a&nbsp;syscall&nbsp;blocks&nbsp;only&nbsp;the<br>
&nbsp;&nbsp;&nbsp;&nbsp;calling&nbsp;thread&nbsp;when&nbsp;running&nbsp;natively,&nbsp;than&nbsp;it&nbsp;behaves&nbsp;the&nbsp;same&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;valgrind.&nbsp;&nbsp;No&nbsp;more&nbsp;mysterious&nbsp;hangs&nbsp;because&nbsp;V&nbsp;doesn't&nbsp;know&nbsp;that&nbsp;some<br>
&nbsp;&nbsp;&nbsp;&nbsp;syscall&nbsp;or&nbsp;other,&nbsp;should&nbsp;block&nbsp;only&nbsp;the&nbsp;calling&nbsp;thread.<br>
<br>
&nbsp;&nbsp;-&nbsp;Interrupted&nbsp;syscalls&nbsp;should&nbsp;now&nbsp;give&nbsp;more&nbsp;faithful&nbsp;results.<br>
<br>
&nbsp;&nbsp;-&nbsp;Signal&nbsp;contexts&nbsp;in&nbsp;signal&nbsp;handlers&nbsp;are&nbsp;supported.<br>
<br>
*&nbsp;Improvements&nbsp;to&nbsp;NPTL&nbsp;support&nbsp;to&nbsp;the&nbsp;extent&nbsp;that&nbsp;V&nbsp;now&nbsp;works&nbsp;<br>
&nbsp;&nbsp;properly&nbsp;on&nbsp;NPTL-only&nbsp;setups.<br>
<br>
*&nbsp;Greater&nbsp;isolation&nbsp;between&nbsp;Valgrind&nbsp;and&nbsp;the&nbsp;program&nbsp;being&nbsp;run,&nbsp;so<br>
&nbsp;&nbsp;the&nbsp;program&nbsp;is&nbsp;less&nbsp;likely&nbsp;to&nbsp;inadvertently&nbsp;kill&nbsp;Valgrind&nbsp;by<br>
&nbsp;&nbsp;doing&nbsp;wild&nbsp;writes.<br>
<br>
*&nbsp;Massif:&nbsp;a&nbsp;new&nbsp;space&nbsp;profiling&nbsp;tool.&nbsp;&nbsp;Try&nbsp;it!&nbsp;&nbsp;It's&nbsp;cool,&nbsp;and&nbsp;it'll<br>
&nbsp;&nbsp;tell&nbsp;you&nbsp;in&nbsp;detail&nbsp;where&nbsp;and&nbsp;when&nbsp;your&nbsp;C/C++&nbsp;code&nbsp;is&nbsp;allocating&nbsp;heap.<br>
&nbsp;&nbsp;Draws&nbsp;pretty&nbsp;.ps&nbsp;pictures&nbsp;of&nbsp;memory&nbsp;use&nbsp;against&nbsp;time.&nbsp;&nbsp;A&nbsp;potentially<br>
&nbsp;&nbsp;powerful&nbsp;tool&nbsp;for&nbsp;making&nbsp;sense&nbsp;of&nbsp;your&nbsp;program's&nbsp;space&nbsp;use.<br>
<br>
*&nbsp;File&nbsp;descriptor&nbsp;leakage&nbsp;checks.&nbsp;&nbsp;When&nbsp;enabled,&nbsp;Valgrind&nbsp;will&nbsp;print&nbsp;out<br>
&nbsp;&nbsp;a&nbsp;list&nbsp;of&nbsp;open&nbsp;file&nbsp;descriptors&nbsp;on&nbsp;exit.<br>
<br>
*&nbsp;Improved&nbsp;SSE2/SSE3&nbsp;support.<br>
<br>
*&nbsp;Time-stamped&nbsp;output;&nbsp;use&nbsp;--time-stamp=yes<br>
<br>
<br>
<br>
Stable&nbsp;release&nbsp;2.2.0&nbsp;(31&nbsp;August&nbsp;2004)&nbsp;--&nbsp;CHANGES&nbsp;RELATIVE&nbsp;TO&nbsp;2.1.2<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.2.0&nbsp;is&nbsp;not&nbsp;much&nbsp;different&nbsp;from&nbsp;2.1.2,&nbsp;released&nbsp;seven&nbsp;weeks&nbsp;ago.<br>
A&nbsp;number&nbsp;of&nbsp;bugs&nbsp;have&nbsp;been&nbsp;fixed,&nbsp;most&nbsp;notably&nbsp;#85658,&nbsp;which&nbsp;gave<br>
problems&nbsp;for&nbsp;quite&nbsp;a&nbsp;few&nbsp;people.&nbsp;&nbsp;There&nbsp;have&nbsp;been&nbsp;many&nbsp;internal<br>
cleanups,&nbsp;but&nbsp;those&nbsp;are&nbsp;not&nbsp;user&nbsp;visible.<br>
<br>
The&nbsp;following&nbsp;bugs&nbsp;have&nbsp;been&nbsp;fixed&nbsp;since&nbsp;2.1.2:<br>
<br>
85658&nbsp;&nbsp;&nbsp;Assert&nbsp;in&nbsp;coregrind/vg_libpthread.c:2326&nbsp;(open64)&nbsp;!=<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void*)0&nbsp;failed<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;bug&nbsp;was&nbsp;reported&nbsp;multiple&nbsp;times,&nbsp;and&nbsp;so&nbsp;the&nbsp;following<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duplicates&nbsp;of&nbsp;it&nbsp;are&nbsp;also&nbsp;fixed:&nbsp;87620,&nbsp;85796,&nbsp;85935,&nbsp;86065,&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;86919,&nbsp;86988,&nbsp;87917,&nbsp;88156<br>
<br>
80716&nbsp;&nbsp;&nbsp;Semaphore&nbsp;mapping&nbsp;bug&nbsp;caused&nbsp;by&nbsp;unmap&nbsp;(sem_destroy)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Was&nbsp;fixed&nbsp;prior&nbsp;to&nbsp;2.1.2)<br>
<br>
86987&nbsp;&nbsp;&nbsp;semctl&nbsp;and&nbsp;shmctl&nbsp;syscalls&nbsp;family&nbsp;is&nbsp;not&nbsp;handled&nbsp;properly<br>
<br>
86696&nbsp;&nbsp;&nbsp;valgrind&nbsp;2.1.2&nbsp;+&nbsp;RH&nbsp;AS2.1&nbsp;+&nbsp;librt<br>
<br>
86730&nbsp;&nbsp;&nbsp;valgrind&nbsp;locks&nbsp;up&nbsp;at&nbsp;end&nbsp;of&nbsp;run&nbsp;with&nbsp;assertion&nbsp;failure&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;__pthread_unwind<br>
<br>
86641&nbsp;&nbsp;&nbsp;memcheck&nbsp;doesn't&nbsp;work&nbsp;with&nbsp;Mesa&nbsp;OpenGL/ATI&nbsp;on&nbsp;Suse&nbsp;9.1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(also&nbsp;fixes&nbsp;74298,&nbsp;a&nbsp;duplicate&nbsp;of&nbsp;this)<br>
<br>
85947&nbsp;&nbsp;&nbsp;MMX/SSE&nbsp;unhandled&nbsp;instruction&nbsp;'sfence'<br>
<br>
84978&nbsp;&nbsp;&nbsp;Wrong&nbsp;error&nbsp;"Conditional&nbsp;jump&nbsp;or&nbsp;move&nbsp;depends&nbsp;on<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uninitialised&nbsp;value"&nbsp;resulting&nbsp;from&nbsp;"sbbl&nbsp;%reg,&nbsp;%reg"<br>
<br>
86254&nbsp;&nbsp;&nbsp;ssort()&nbsp;fails&nbsp;when&nbsp;signed&nbsp;int&nbsp;return&nbsp;type&nbsp;from&nbsp;comparison&nbsp;is&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;too&nbsp;small&nbsp;to&nbsp;handle&nbsp;result&nbsp;of&nbsp;unsigned&nbsp;int&nbsp;subtraction<br>
<br>
87089&nbsp;&nbsp;&nbsp;memalign(&nbsp;4,&nbsp;xxx)&nbsp;makes&nbsp;valgrind&nbsp;assert<br>
<br>
86407&nbsp;&nbsp;&nbsp;Add&nbsp;support&nbsp;for&nbsp;low-level&nbsp;parallel&nbsp;port&nbsp;driver&nbsp;ioctls.<br>
<br>
70587&nbsp;&nbsp;&nbsp;Add&nbsp;timestamps&nbsp;to&nbsp;Valgrind&nbsp;output?&nbsp;(wishlist)<br>
<br>
84937&nbsp;&nbsp;&nbsp;vg_libpthread.c:2505&nbsp;(se_remap):&nbsp;Assertion&nbsp;`res&nbsp;==&nbsp;0'<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fixed&nbsp;prior&nbsp;to&nbsp;2.1.2)<br>
<br>
86317&nbsp;&nbsp;&nbsp;cannot&nbsp;load&nbsp;libSDL-1.2.so.0&nbsp;using&nbsp;valgrind<br>
<br>
86989&nbsp;&nbsp;&nbsp;memcpy&nbsp;from&nbsp;mac_replace_strmem.c&nbsp;complains&nbsp;about<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uninitialized&nbsp;pointers&nbsp;passed&nbsp;when&nbsp;length&nbsp;to&nbsp;copy&nbsp;is&nbsp;zero<br>
<br>
85811&nbsp;&nbsp;&nbsp;gnu&nbsp;pascal&nbsp;symbol&nbsp;causes&nbsp;segmentation&nbsp;fault;&nbsp;ok&nbsp;in&nbsp;2.0.0<br>
<br>
79138&nbsp;&nbsp;&nbsp;writing&nbsp;to&nbsp;sbrk()'d&nbsp;memory&nbsp;causes&nbsp;segfault<br>
<br>
77369&nbsp;&nbsp;&nbsp;sched&nbsp;deadlock&nbsp;while&nbsp;signal&nbsp;received&nbsp;during&nbsp;pthread_join<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;the&nbsp;joined&nbsp;thread&nbsp;exited<br>
<br>
88115&nbsp;&nbsp;&nbsp;In&nbsp;signal&nbsp;handler&nbsp;for&nbsp;SIGFPE,&nbsp;&nbsp;siginfo-&gt;si_addr&nbsp;is&nbsp;wrong&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;under&nbsp;Valgrind<br>
<br>
78765&nbsp;&nbsp;&nbsp;Massif&nbsp;crashes&nbsp;on&nbsp;app&nbsp;exit&nbsp;if&nbsp;FP&nbsp;exceptions&nbsp;are&nbsp;enabled<br>
<br>
Additionally&nbsp;there&nbsp;are&nbsp;the&nbsp;following&nbsp;changes,&nbsp;which&nbsp;are&nbsp;not&nbsp;<br>
connected&nbsp;to&nbsp;any&nbsp;bug&nbsp;report&nbsp;numbers,&nbsp;AFAICS:<br>
<br>
*&nbsp;Fix&nbsp;scary&nbsp;bug&nbsp;causing&nbsp;mis-identification&nbsp;of&nbsp;SSE&nbsp;stores&nbsp;vs<br>
&nbsp;&nbsp;loads&nbsp;and&nbsp;so&nbsp;causing&nbsp;memcheck&nbsp;to&nbsp;sometimes&nbsp;give&nbsp;nonsense&nbsp;results<br>
&nbsp;&nbsp;on&nbsp;SSE&nbsp;code.<br>
<br>
*&nbsp;Add&nbsp;support&nbsp;for&nbsp;the&nbsp;POSIX&nbsp;message&nbsp;queue&nbsp;system&nbsp;calls.<br>
<br>
*&nbsp;Fix&nbsp;to&nbsp;allow&nbsp;32-bit&nbsp;Valgrind&nbsp;to&nbsp;run&nbsp;on&nbsp;AMD64&nbsp;boxes.&nbsp;&nbsp;Note:&nbsp;this&nbsp;does<br>
&nbsp;&nbsp;NOT&nbsp;allow&nbsp;Valgrind&nbsp;to&nbsp;work&nbsp;with&nbsp;64-bit&nbsp;executables&nbsp;-&nbsp;only&nbsp;with&nbsp;32-bit<br>
&nbsp;&nbsp;executables&nbsp;on&nbsp;an&nbsp;AMD64&nbsp;box.<br>
<br>
*&nbsp;At&nbsp;configure&nbsp;time,&nbsp;only&nbsp;check&nbsp;whether&nbsp;linux/mii.h&nbsp;can&nbsp;be&nbsp;processed&nbsp;<br>
&nbsp;&nbsp;so&nbsp;that&nbsp;we&nbsp;don't&nbsp;generate&nbsp;ugly&nbsp;warnings&nbsp;by&nbsp;trying&nbsp;to&nbsp;compile&nbsp;it.<br>
<br>
*&nbsp;Add&nbsp;support&nbsp;for&nbsp;POSIX&nbsp;clocks&nbsp;and&nbsp;timers.<br>
<br>
<br>
<br>
Developer&nbsp;(cvs&nbsp;head)&nbsp;release&nbsp;2.1.2&nbsp;(18&nbsp;July&nbsp;2004)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.1.2&nbsp;contains&nbsp;four&nbsp;months&nbsp;worth&nbsp;of&nbsp;bug&nbsp;fixes&nbsp;and&nbsp;refinements.<br>
Although&nbsp;officially&nbsp;a&nbsp;developer&nbsp;release,&nbsp;we&nbsp;believe&nbsp;it&nbsp;to&nbsp;be&nbsp;stable<br>
enough&nbsp;for&nbsp;widespread&nbsp;day-to-day&nbsp;use.&nbsp;&nbsp;2.1.2&nbsp;is&nbsp;pretty&nbsp;good,&nbsp;so&nbsp;try&nbsp;it<br>
first,&nbsp;although&nbsp;there&nbsp;is&nbsp;a&nbsp;chance&nbsp;it&nbsp;won't&nbsp;work.&nbsp;&nbsp;If&nbsp;so&nbsp;then&nbsp;try&nbsp;2.0.0<br>
and&nbsp;tell&nbsp;us&nbsp;what&nbsp;went&nbsp;wrong."&nbsp;&nbsp;2.1.2&nbsp;fixes&nbsp;a&nbsp;lot&nbsp;of&nbsp;problems&nbsp;present<br>
in&nbsp;2.0.0&nbsp;and&nbsp;is&nbsp;generally&nbsp;a&nbsp;much&nbsp;better&nbsp;product.<br>
<br>
Relative&nbsp;to&nbsp;2.1.1,&nbsp;a&nbsp;large&nbsp;number&nbsp;of&nbsp;minor&nbsp;problems&nbsp;with&nbsp;2.1.1&nbsp;have<br>
been&nbsp;fixed,&nbsp;and&nbsp;so&nbsp;if&nbsp;you&nbsp;use&nbsp;2.1.1&nbsp;you&nbsp;should&nbsp;try&nbsp;2.1.2.&nbsp;&nbsp;Users&nbsp;of<br>
the&nbsp;last&nbsp;stable&nbsp;release,&nbsp;2.0.0,&nbsp;might&nbsp;also&nbsp;want&nbsp;to&nbsp;try&nbsp;this&nbsp;release.<br>
<br>
The&nbsp;following&nbsp;bugs,&nbsp;and&nbsp;probably&nbsp;many&nbsp;more,&nbsp;have&nbsp;been&nbsp;fixed.&nbsp;&nbsp;These<br>
are&nbsp;listed&nbsp;at&nbsp;http://bugs.kde.org.&nbsp;&nbsp;Reporting&nbsp;a&nbsp;bug&nbsp;for&nbsp;valgrind&nbsp;in<br>
the&nbsp;http://bugs.kde.org&nbsp;is&nbsp;much&nbsp;more&nbsp;likely&nbsp;to&nbsp;get&nbsp;you&nbsp;a&nbsp;fix&nbsp;than<br>
mailing&nbsp;developers&nbsp;directly,&nbsp;so&nbsp;please&nbsp;continue&nbsp;to&nbsp;keep&nbsp;sending&nbsp;bugs<br>
there.<br>
<br>
76869&nbsp;&nbsp;&nbsp;Crashes&nbsp;when&nbsp;running&nbsp;any&nbsp;tool&nbsp;under&nbsp;Fedora&nbsp;Core&nbsp;2&nbsp;test1<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;fixes&nbsp;the&nbsp;problem&nbsp;with&nbsp;returning&nbsp;from&nbsp;a&nbsp;signal&nbsp;handler&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when&nbsp;VDSOs&nbsp;are&nbsp;turned&nbsp;off&nbsp;in&nbsp;FC2.<br>
<br>
69508&nbsp;&nbsp;&nbsp;java&nbsp;1.4.2&nbsp;client&nbsp;fails&nbsp;with&nbsp;erroneous&nbsp;"stack&nbsp;size&nbsp;too&nbsp;small".<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;fix&nbsp;makes&nbsp;more&nbsp;of&nbsp;the&nbsp;pthread&nbsp;stack&nbsp;attribute&nbsp;related&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;functions&nbsp;work&nbsp;properly.&nbsp;&nbsp;Java&nbsp;still&nbsp;doesn't&nbsp;work&nbsp;though.<br>
<br>
71906&nbsp;&nbsp;&nbsp;malloc&nbsp;alignment&nbsp;should&nbsp;be&nbsp;8,&nbsp;not&nbsp;4<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;memory&nbsp;returned&nbsp;by&nbsp;malloc/new&nbsp;etc&nbsp;is&nbsp;now&nbsp;at&nbsp;least<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;8-byte&nbsp;aligned.<br>
<br>
81970&nbsp;&nbsp;&nbsp;vg_alloc_ThreadState:&nbsp;no&nbsp;free&nbsp;slots&nbsp;available<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(closed&nbsp;because&nbsp;the&nbsp;workaround&nbsp;is&nbsp;simple:&nbsp;increase<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VG_N_THREADS,&nbsp;rebuild&nbsp;and&nbsp;try&nbsp;again.)<br>
<br>
78514&nbsp;&nbsp;&nbsp;Conditional&nbsp;jump&nbsp;or&nbsp;move&nbsp;depends&nbsp;on&nbsp;uninitialized&nbsp;value(s)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(a&nbsp;slight&nbsp;mishanding&nbsp;of&nbsp;FP&nbsp;code&nbsp;in&nbsp;memcheck)<br>
<br>
77952&nbsp;&nbsp;&nbsp;pThread&nbsp;Support&nbsp;(crash)&nbsp;(due&nbsp;to&nbsp;initialisation-ordering&nbsp;probs)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(also&nbsp;85118)<br>
<br>
80942&nbsp;&nbsp;&nbsp;Addrcheck&nbsp;wasn't&nbsp;doing&nbsp;overlap&nbsp;checking&nbsp;as&nbsp;it&nbsp;should.<br>
78048&nbsp;&nbsp;&nbsp;return&nbsp;NULL&nbsp;on&nbsp;malloc/new&nbsp;etc&nbsp;failure,&nbsp;instead&nbsp;of&nbsp;asserting<br>
73655&nbsp;&nbsp;&nbsp;operator&nbsp;new()&nbsp;override&nbsp;in&nbsp;user&nbsp;.so&nbsp;files&nbsp;often&nbsp;doesn't&nbsp;get&nbsp;picked&nbsp;up<br>
83060&nbsp;&nbsp;&nbsp;Valgrind&nbsp;does&nbsp;not&nbsp;handle&nbsp;native&nbsp;kernel&nbsp;AIO<br>
69872&nbsp;&nbsp;&nbsp;Create&nbsp;proper&nbsp;coredumps&nbsp;after&nbsp;fatal&nbsp;signals<br>
82026&nbsp;&nbsp;&nbsp;failure&nbsp;with&nbsp;new&nbsp;glibc&nbsp;versions:&nbsp;__libc_*&nbsp;functions&nbsp;are&nbsp;not&nbsp;exported<br>
70344&nbsp;&nbsp;&nbsp;UNIMPLEMENTED&nbsp;FUNCTION:&nbsp;tcdrain&nbsp;<br>
81297&nbsp;&nbsp;&nbsp;Cancellation&nbsp;of&nbsp;pthread_cond_wait&nbsp;does&nbsp;not&nbsp;require&nbsp;mutex<br>
82872&nbsp;&nbsp;&nbsp;Using&nbsp;debug&nbsp;info&nbsp;from&nbsp;additional&nbsp;packages&nbsp;(wishlist)<br>
83025&nbsp;&nbsp;&nbsp;Support&nbsp;for&nbsp;ioctls&nbsp;FIGETBSZ&nbsp;and&nbsp;FIBMAP<br>
83340&nbsp;&nbsp;&nbsp;Support&nbsp;for&nbsp;ioctl&nbsp;HDIO_GET_IDENTITY<br>
79714&nbsp;&nbsp;&nbsp;Support&nbsp;for&nbsp;the&nbsp;semtimedop&nbsp;system&nbsp;call.<br>
77022&nbsp;&nbsp;&nbsp;Support&nbsp;for&nbsp;ioctls&nbsp;FBIOGET_VSCREENINFO&nbsp;and&nbsp;FBIOGET_FSCREENINFO<br>
82098&nbsp;&nbsp;&nbsp;hp2ps&nbsp;ansification&nbsp;(wishlist)<br>
83573&nbsp;&nbsp;&nbsp;Valgrind&nbsp;SIGSEGV&nbsp;on&nbsp;execve<br>
82999&nbsp;&nbsp;&nbsp;show&nbsp;which&nbsp;cmdline&nbsp;option&nbsp;was&nbsp;erroneous&nbsp;(wishlist)<br>
83040&nbsp;&nbsp;&nbsp;make&nbsp;valgrind&nbsp;VPATH&nbsp;and&nbsp;distcheck-clean&nbsp;(wishlist)<br>
83998&nbsp;&nbsp;&nbsp;Assertion&nbsp;`newfd&nbsp;&gt;&nbsp;vgPlain_max_fd'&nbsp;failed&nbsp;(see&nbsp;below)<br>
82722&nbsp;&nbsp;&nbsp;Unchecked&nbsp;mmap&nbsp;in&nbsp;as_pad&nbsp;leads&nbsp;to&nbsp;mysterious&nbsp;failures&nbsp;later<br>
78958&nbsp;&nbsp;&nbsp;memcheck&nbsp;seg&nbsp;faults&nbsp;while&nbsp;running&nbsp;Mozilla&nbsp;<br>
85416&nbsp;&nbsp;&nbsp;Arguments&nbsp;with&nbsp;colon&nbsp;(e.g.&nbsp;--logsocket)&nbsp;ignored<br>
<br>
<br>
Additionally&nbsp;there&nbsp;are&nbsp;the&nbsp;following&nbsp;changes,&nbsp;which&nbsp;are&nbsp;not&nbsp;<br>
connected&nbsp;to&nbsp;any&nbsp;bug&nbsp;report&nbsp;numbers,&nbsp;AFAICS:<br>
<br>
*&nbsp;Rearranged&nbsp;address&nbsp;space&nbsp;layout&nbsp;relative&nbsp;to&nbsp;2.1.1,&nbsp;so&nbsp;that<br>
&nbsp;&nbsp;Valgrind/tools&nbsp;will&nbsp;run&nbsp;out&nbsp;of&nbsp;memory&nbsp;later&nbsp;than&nbsp;currently&nbsp;in&nbsp;many<br>
&nbsp;&nbsp;circumstances.&nbsp;&nbsp;This&nbsp;is&nbsp;good&nbsp;news&nbsp;esp.&nbsp;for&nbsp;Calltree.&nbsp;&nbsp;It&nbsp;should<br>
&nbsp;&nbsp;be&nbsp;possible&nbsp;for&nbsp;client&nbsp;programs&nbsp;to&nbsp;allocate&nbsp;over&nbsp;800MB&nbsp;of<br>
&nbsp;&nbsp;memory&nbsp;when&nbsp;using&nbsp;memcheck&nbsp;now.<br>
<br>
*&nbsp;Improved&nbsp;checking&nbsp;when&nbsp;laying&nbsp;out&nbsp;memory.&nbsp;&nbsp;Should&nbsp;hopefully&nbsp;avoid<br>
&nbsp;&nbsp;the&nbsp;random&nbsp;segmentation&nbsp;faults&nbsp;that&nbsp;2.1.1&nbsp;sometimes&nbsp;caused.<br>
<br>
*&nbsp;Support&nbsp;for&nbsp;Fedora&nbsp;Core&nbsp;2&nbsp;and&nbsp;SuSE&nbsp;9.1.&nbsp;&nbsp;Improvements&nbsp;to&nbsp;NPTL<br>
&nbsp;&nbsp;support&nbsp;to&nbsp;the&nbsp;extent&nbsp;that&nbsp;V&nbsp;now&nbsp;works&nbsp;properly&nbsp;on&nbsp;NPTL-only&nbsp;setups.<br>
<br>
*&nbsp;Renamed&nbsp;the&nbsp;following&nbsp;options:<br>
&nbsp;&nbsp;--logfile-fd&nbsp;&nbsp;--&gt;&nbsp;&nbsp;--log-fd<br>
&nbsp;&nbsp;--logfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;--&gt;&nbsp;&nbsp;--log-file<br>
&nbsp;&nbsp;--logsocket&nbsp;&nbsp;&nbsp;--&gt;&nbsp;&nbsp;--log-socket<br>
&nbsp;&nbsp;to&nbsp;be&nbsp;consistent&nbsp;with&nbsp;each&nbsp;other&nbsp;and&nbsp;other&nbsp;options&nbsp;(esp.&nbsp;--input-fd).<br>
<br>
*&nbsp;Add&nbsp;support&nbsp;for&nbsp;SIOCGMIIPHY,&nbsp;SIOCGMIIREG&nbsp;and&nbsp;SIOCSMIIREG&nbsp;ioctls&nbsp;and<br>
&nbsp;&nbsp;improve&nbsp;the&nbsp;checking&nbsp;of&nbsp;other&nbsp;interface&nbsp;related&nbsp;ioctls.<br>
<br>
*&nbsp;Fix&nbsp;building&nbsp;with&nbsp;gcc-3.4.1.<br>
<br>
*&nbsp;Remove&nbsp;limit&nbsp;on&nbsp;number&nbsp;of&nbsp;semaphores&nbsp;supported.<br>
<br>
*&nbsp;Add&nbsp;support&nbsp;for&nbsp;syscalls:&nbsp;set_tid_address&nbsp;(258),&nbsp;acct&nbsp;(51).<br>
<br>
*&nbsp;Support&nbsp;instruction&nbsp;"repne&nbsp;movs"&nbsp;--&nbsp;not&nbsp;official&nbsp;but&nbsp;seems&nbsp;to&nbsp;occur.<br>
<br>
*&nbsp;Implement&nbsp;an&nbsp;emulated&nbsp;soft&nbsp;limit&nbsp;for&nbsp;file&nbsp;descriptors&nbsp;in&nbsp;addition&nbsp;to<br>
&nbsp;&nbsp;the&nbsp;current&nbsp;reserved&nbsp;area,&nbsp;which&nbsp;effectively&nbsp;acts&nbsp;as&nbsp;a&nbsp;hard&nbsp;limit.&nbsp;The<br>
&nbsp;&nbsp;setrlimit&nbsp;system&nbsp;call&nbsp;now&nbsp;simply&nbsp;updates&nbsp;the&nbsp;emulated&nbsp;limits&nbsp;as&nbsp;best<br>
&nbsp;&nbsp;as&nbsp;possible&nbsp;-&nbsp;the&nbsp;hard&nbsp;limit&nbsp;is&nbsp;not&nbsp;allowed&nbsp;to&nbsp;move&nbsp;at&nbsp;all&nbsp;and&nbsp;just<br>
&nbsp;&nbsp;returns&nbsp;EPERM&nbsp;if&nbsp;you&nbsp;try&nbsp;and&nbsp;change&nbsp;it.&nbsp;&nbsp;This&nbsp;should&nbsp;stop&nbsp;reductions<br>
&nbsp;&nbsp;in&nbsp;the&nbsp;soft&nbsp;limit&nbsp;causing&nbsp;assertions&nbsp;when&nbsp;valgrind&nbsp;tries&nbsp;to&nbsp;allocate<br>
&nbsp;&nbsp;descriptors&nbsp;from&nbsp;the&nbsp;reserved&nbsp;area.<br>
&nbsp;&nbsp;(This&nbsp;actually&nbsp;came&nbsp;from&nbsp;bug&nbsp;#83998).<br>
<br>
*&nbsp;Major&nbsp;overhaul&nbsp;of&nbsp;Cachegrind&nbsp;implementation.&nbsp;&nbsp;First&nbsp;user-visible&nbsp;change<br>
&nbsp;&nbsp;is&nbsp;that&nbsp;cachegrind.out&nbsp;files&nbsp;are&nbsp;now&nbsp;typically&nbsp;90%&nbsp;smaller&nbsp;than&nbsp;they<br>
&nbsp;&nbsp;used&nbsp;to&nbsp;be;&nbsp;&nbsp;code&nbsp;annotation&nbsp;times&nbsp;are&nbsp;correspondingly&nbsp;much&nbsp;smaller.<br>
&nbsp;&nbsp;Second&nbsp;user-visible&nbsp;change&nbsp;is&nbsp;that&nbsp;hit/miss&nbsp;counts&nbsp;for&nbsp;code&nbsp;that&nbsp;is<br>
&nbsp;&nbsp;unloaded&nbsp;at&nbsp;run-time&nbsp;is&nbsp;no&nbsp;longer&nbsp;dumped&nbsp;into&nbsp;a&nbsp;single&nbsp;"discard"&nbsp;pile,<br>
&nbsp;&nbsp;but&nbsp;accurately&nbsp;preserved.<br>
<br>
*&nbsp;Client&nbsp;requests&nbsp;for&nbsp;telling&nbsp;valgrind&nbsp;about&nbsp;memory&nbsp;pools.<br>
<br>
<br>
<br>
Developer&nbsp;(cvs&nbsp;head)&nbsp;release&nbsp;2.1.1&nbsp;(12&nbsp;March&nbsp;2004)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
2.1.1&nbsp;contains&nbsp;some&nbsp;internal&nbsp;structural&nbsp;changes&nbsp;needed&nbsp;for&nbsp;V's<br>
long-term&nbsp;future.&nbsp;&nbsp;These&nbsp;don't&nbsp;affect&nbsp;end-users.&nbsp;&nbsp;Most&nbsp;notable<br>
user-visible&nbsp;changes&nbsp;are:<br>
<br>
*&nbsp;Greater&nbsp;isolation&nbsp;between&nbsp;Valgrind&nbsp;and&nbsp;the&nbsp;program&nbsp;being&nbsp;run,&nbsp;so<br>
&nbsp;&nbsp;the&nbsp;program&nbsp;is&nbsp;less&nbsp;likely&nbsp;to&nbsp;inadvertently&nbsp;kill&nbsp;Valgrind&nbsp;by<br>
&nbsp;&nbsp;doing&nbsp;wild&nbsp;writes.<br>
<br>
*&nbsp;Massif:&nbsp;a&nbsp;new&nbsp;space&nbsp;profiling&nbsp;tool.&nbsp;&nbsp;Try&nbsp;it!&nbsp;&nbsp;It's&nbsp;cool,&nbsp;and&nbsp;it'll<br>
&nbsp;&nbsp;tell&nbsp;you&nbsp;in&nbsp;detail&nbsp;where&nbsp;and&nbsp;when&nbsp;your&nbsp;C/C++&nbsp;code&nbsp;is&nbsp;allocating&nbsp;heap.<br>
&nbsp;&nbsp;Draws&nbsp;pretty&nbsp;.ps&nbsp;pictures&nbsp;of&nbsp;memory&nbsp;use&nbsp;against&nbsp;time.&nbsp;&nbsp;A&nbsp;potentially<br>
&nbsp;&nbsp;powerful&nbsp;tool&nbsp;for&nbsp;making&nbsp;sense&nbsp;of&nbsp;your&nbsp;program's&nbsp;space&nbsp;use.<br>
<br>
*&nbsp;Fixes&nbsp;for&nbsp;many&nbsp;bugs,&nbsp;including&nbsp;support&nbsp;for&nbsp;more&nbsp;SSE2/SSE3&nbsp;instructions,<br>
&nbsp;&nbsp;various&nbsp;signal/syscall&nbsp;things,&nbsp;and&nbsp;various&nbsp;problems&nbsp;with&nbsp;debug<br>
&nbsp;&nbsp;info&nbsp;readers.<br>
<br>
*&nbsp;Support&nbsp;for&nbsp;glibc-2.3.3&nbsp;based&nbsp;systems.<br>
<br>
We&nbsp;are&nbsp;now&nbsp;doing&nbsp;automatic&nbsp;overnight&nbsp;build-and-test&nbsp;runs&nbsp;on&nbsp;a&nbsp;variety<br>
of&nbsp;distros.&nbsp;&nbsp;As&nbsp;a&nbsp;result,&nbsp;we&nbsp;believe&nbsp;2.1.1&nbsp;builds&nbsp;and&nbsp;runs&nbsp;on:<br>
Red&nbsp;Hat&nbsp;7.2,&nbsp;7.3,&nbsp;8.0,&nbsp;9,&nbsp;Fedora&nbsp;Core&nbsp;1,&nbsp;SuSE&nbsp;8.2,&nbsp;SuSE&nbsp;9.<br>
<br>
<br>
The&nbsp;following&nbsp;bugs,&nbsp;and&nbsp;probably&nbsp;many&nbsp;more,&nbsp;have&nbsp;been&nbsp;fixed.&nbsp;&nbsp;These<br>
are&nbsp;listed&nbsp;at&nbsp;http://bugs.kde.org.&nbsp;&nbsp;Reporting&nbsp;a&nbsp;bug&nbsp;for&nbsp;valgrind&nbsp;in<br>
the&nbsp;http://bugs.kde.org&nbsp;is&nbsp;much&nbsp;more&nbsp;likely&nbsp;to&nbsp;get&nbsp;you&nbsp;a&nbsp;fix&nbsp;than<br>
mailing&nbsp;developers&nbsp;directly,&nbsp;so&nbsp;please&nbsp;continue&nbsp;to&nbsp;keep&nbsp;sending&nbsp;bugs<br>
there.<br>
<br>
69616&nbsp;&nbsp;&nbsp;glibc&nbsp;2.3.2&nbsp;w/NPTL&nbsp;is&nbsp;massively&nbsp;different&nbsp;than&nbsp;what&nbsp;valgrind&nbsp;expects&nbsp;<br>
69856&nbsp;&nbsp;&nbsp;I&nbsp;don't&nbsp;know&nbsp;how&nbsp;to&nbsp;instrument&nbsp;MMXish&nbsp;stuff&nbsp;(Helgrind)<br>
73892&nbsp;&nbsp;&nbsp;valgrind&nbsp;segfaults&nbsp;starting&nbsp;with&nbsp;Objective-C&nbsp;debug&nbsp;info&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fix&nbsp;for&nbsp;S-type&nbsp;stabs)<br>
73145&nbsp;&nbsp;&nbsp;Valgrind&nbsp;complains&nbsp;too&nbsp;much&nbsp;about&nbsp;close(&lt;reserved&nbsp;fd&gt;)&nbsp;<br>
73902&nbsp;&nbsp;&nbsp;Shadow&nbsp;memory&nbsp;allocation&nbsp;seems&nbsp;to&nbsp;fail&nbsp;on&nbsp;RedHat&nbsp;8.0&nbsp;<br>
68633&nbsp;&nbsp;&nbsp;VG_N_SEMAPHORES&nbsp;too&nbsp;low&nbsp;(V&nbsp;itself&nbsp;was&nbsp;leaking&nbsp;semaphores)<br>
75099&nbsp;&nbsp;&nbsp;impossible&nbsp;to&nbsp;trace&nbsp;multiprocess&nbsp;programs&nbsp;<br>
76839&nbsp;&nbsp;&nbsp;the&nbsp;`impossible'&nbsp;happened:&nbsp;disInstr:&nbsp;INT&nbsp;but&nbsp;not&nbsp;0x80&nbsp;!&nbsp;<br>
76762&nbsp;&nbsp;&nbsp;vg_to_ucode.c:3748&nbsp;(dis_push_segreg):&nbsp;Assertion&nbsp;`sz&nbsp;==&nbsp;4'&nbsp;failed.&nbsp;<br>
76747&nbsp;&nbsp;&nbsp;cannot&nbsp;include&nbsp;valgrind.h&nbsp;in&nbsp;c++&nbsp;program&nbsp;<br>
76223&nbsp;&nbsp;&nbsp;parsing&nbsp;B(3,10)&nbsp;gave&nbsp;NULL&nbsp;type&nbsp;=&gt;&nbsp;impossible&nbsp;happens&nbsp;<br>
75604&nbsp;&nbsp;&nbsp;shmdt&nbsp;handling&nbsp;problem&nbsp;<br>
76416&nbsp;&nbsp;&nbsp;Problems&nbsp;with&nbsp;gcc&nbsp;3.4&nbsp;snap&nbsp;20040225&nbsp;<br>
75614&nbsp;&nbsp;&nbsp;using&nbsp;-gstabs&nbsp;when&nbsp;building&nbsp;your&nbsp;programs&nbsp;the&nbsp;`impossible'&nbsp;happened<br>
75787&nbsp;&nbsp;&nbsp;Patch&nbsp;for&nbsp;some&nbsp;CDROM&nbsp;ioctls&nbsp;CDORM_GET_MCN,&nbsp;CDROM_SEND_PACKET,<br>
75294&nbsp;&nbsp;&nbsp;gcc&nbsp;3.4&nbsp;snapshot's&nbsp;libstdc++&nbsp;have&nbsp;unsupported&nbsp;instructions.&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(REP&nbsp;RET)<br>
73326&nbsp;&nbsp;&nbsp;vg_symtab2.c:272&nbsp;(addScopeRange):&nbsp;Assertion&nbsp;`range-&gt;size&nbsp;&gt;&nbsp;0'&nbsp;failed.&nbsp;<br>
72596&nbsp;&nbsp;&nbsp;not&nbsp;recognizing&nbsp;__libc_malloc&nbsp;<br>
69489&nbsp;&nbsp;&nbsp;Would&nbsp;like&nbsp;to&nbsp;attach&nbsp;ddd&nbsp;to&nbsp;running&nbsp;program&nbsp;<br>
72781&nbsp;&nbsp;&nbsp;Cachegrind&nbsp;crashes&nbsp;with&nbsp;kde&nbsp;programs&nbsp;<br>
73055&nbsp;&nbsp;&nbsp;Illegal&nbsp;operand&nbsp;at&nbsp;DXTCV11CompressBlockSSE2&nbsp;(more&nbsp;SSE&nbsp;opcodes)<br>
73026&nbsp;&nbsp;&nbsp;Descriptor&nbsp;leak&nbsp;check&nbsp;reports&nbsp;port&nbsp;numbers&nbsp;wrongly&nbsp;<br>
71705&nbsp;&nbsp;&nbsp;README_MISSING_SYSCALL_OR_IOCTL&nbsp;out&nbsp;of&nbsp;date&nbsp;<br>
72643&nbsp;&nbsp;&nbsp;Improve&nbsp;support&nbsp;for&nbsp;SSE/SSE2&nbsp;instructions&nbsp;<br>
72484&nbsp;&nbsp;&nbsp;valgrind&nbsp;leaves&nbsp;it's&nbsp;own&nbsp;signal&nbsp;mask&nbsp;in&nbsp;place&nbsp;when&nbsp;execing&nbsp;<br>
72650&nbsp;&nbsp;&nbsp;Signal&nbsp;Handling&nbsp;always&nbsp;seems&nbsp;to&nbsp;restart&nbsp;system&nbsp;calls&nbsp;<br>
72006&nbsp;&nbsp;&nbsp;The&nbsp;mmap&nbsp;system&nbsp;call&nbsp;turns&nbsp;all&nbsp;errors&nbsp;in&nbsp;ENOMEM&nbsp;<br>
71781&nbsp;&nbsp;&nbsp;gdb&nbsp;attach&nbsp;is&nbsp;pretty&nbsp;useless&nbsp;<br>
71180&nbsp;&nbsp;&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0xF&nbsp;0xAE&nbsp;0x85&nbsp;0xE8&nbsp;<br>
69886&nbsp;&nbsp;&nbsp;writes&nbsp;to&nbsp;zero&nbsp;page&nbsp;cause&nbsp;valgrind&nbsp;to&nbsp;assert&nbsp;on&nbsp;exit&nbsp;<br>
71791&nbsp;&nbsp;&nbsp;crash&nbsp;when&nbsp;valgrinding&nbsp;gimp&nbsp;1.3&nbsp;(stabs&nbsp;reader&nbsp;problem)<br>
69783&nbsp;&nbsp;&nbsp;unhandled&nbsp;syscall:&nbsp;218&nbsp;<br>
69782&nbsp;&nbsp;&nbsp;unhandled&nbsp;instruction&nbsp;bytes:&nbsp;0x66&nbsp;0xF&nbsp;0x2B&nbsp;0x80&nbsp;<br>
70385&nbsp;&nbsp;&nbsp;valgrind&nbsp;fails&nbsp;if&nbsp;the&nbsp;soft&nbsp;file&nbsp;descriptor&nbsp;limit&nbsp;is&nbsp;less&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;than&nbsp;about&nbsp;828<br>
69529&nbsp;&nbsp;&nbsp;"rep;&nbsp;nop"&nbsp;should&nbsp;do&nbsp;a&nbsp;yield&nbsp;<br>
70827&nbsp;&nbsp;&nbsp;programs&nbsp;with&nbsp;lots&nbsp;of&nbsp;shared&nbsp;libraries&nbsp;report&nbsp;"mmap&nbsp;failed"&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;some&nbsp;of&nbsp;them&nbsp;when&nbsp;reading&nbsp;symbols&nbsp;<br>
71028&nbsp;&nbsp;&nbsp;glibc's&nbsp;strnlen&nbsp;is&nbsp;optimised&nbsp;enough&nbsp;to&nbsp;confuse&nbsp;valgrind&nbsp;<br>
<br>
<br>
<br>
<br>
Unstable&nbsp;(cvs&nbsp;head)&nbsp;release&nbsp;2.1.0&nbsp;(15&nbsp;December&nbsp;2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
For&nbsp;whatever&nbsp;it's&nbsp;worth,&nbsp;2.1.0&nbsp;actually&nbsp;seems&nbsp;pretty&nbsp;darn&nbsp;stable&nbsp;to&nbsp;me<br>
(Julian).&nbsp;&nbsp;It&nbsp;looks&nbsp;eminently&nbsp;usable,&nbsp;and&nbsp;given&nbsp;that&nbsp;it&nbsp;fixes&nbsp;some<br>
significant&nbsp;bugs,&nbsp;may&nbsp;well&nbsp;be&nbsp;worth&nbsp;using&nbsp;on&nbsp;a&nbsp;day-to-day&nbsp;basis.<br>
2.1.0&nbsp;is&nbsp;known&nbsp;to&nbsp;build&nbsp;and&nbsp;pass&nbsp;regression&nbsp;tests&nbsp;on:&nbsp;SuSE&nbsp;9,&nbsp;SuSE<br>
8.2,&nbsp;RedHat&nbsp;8.<br>
<br>
2.1.0&nbsp;most&nbsp;notably&nbsp;includes&nbsp;Jeremy&nbsp;Fitzhardinge's&nbsp;complete&nbsp;overhaul&nbsp;of<br>
handling&nbsp;of&nbsp;system&nbsp;calls&nbsp;and&nbsp;signals,&nbsp;and&nbsp;their&nbsp;interaction&nbsp;with<br>
threads.&nbsp;&nbsp;In&nbsp;general,&nbsp;the&nbsp;accuracy&nbsp;of&nbsp;the&nbsp;system&nbsp;call,&nbsp;thread&nbsp;and<br>
signal&nbsp;simulations&nbsp;is&nbsp;much&nbsp;improved.&nbsp;&nbsp;Specifically:<br>
<br>
-&nbsp;Blocking&nbsp;system&nbsp;calls&nbsp;behave&nbsp;exactly&nbsp;as&nbsp;they&nbsp;do&nbsp;when&nbsp;running<br>
&nbsp;&nbsp;natively&nbsp;(not&nbsp;on&nbsp;valgrind).&nbsp;&nbsp;That&nbsp;is,&nbsp;if&nbsp;a&nbsp;syscall&nbsp;blocks&nbsp;only&nbsp;the<br>
&nbsp;&nbsp;calling&nbsp;thread&nbsp;when&nbsp;running&nbsp;natively,&nbsp;than&nbsp;it&nbsp;behaves&nbsp;the&nbsp;same&nbsp;on<br>
&nbsp;&nbsp;valgrind.&nbsp;&nbsp;No&nbsp;more&nbsp;mysterious&nbsp;hangs&nbsp;because&nbsp;V&nbsp;doesn't&nbsp;know&nbsp;that&nbsp;some<br>
&nbsp;&nbsp;syscall&nbsp;or&nbsp;other,&nbsp;should&nbsp;block&nbsp;only&nbsp;the&nbsp;calling&nbsp;thread.<br>
<br>
-&nbsp;Interrupted&nbsp;syscalls&nbsp;should&nbsp;now&nbsp;give&nbsp;more&nbsp;faithful&nbsp;results.<br>
<br>
-&nbsp;Finally,&nbsp;signal&nbsp;contexts&nbsp;in&nbsp;signal&nbsp;handlers&nbsp;are&nbsp;supported.&nbsp;&nbsp;As&nbsp;a<br>
&nbsp;&nbsp;result,&nbsp;konqueror&nbsp;on&nbsp;SuSE&nbsp;9&nbsp;no&nbsp;longer&nbsp;segfaults&nbsp;when&nbsp;notified&nbsp;of<br>
&nbsp;&nbsp;file&nbsp;changes&nbsp;in&nbsp;directories&nbsp;it&nbsp;is&nbsp;watching.<br>
<br>
Other&nbsp;changes:<br>
<br>
-&nbsp;Robert&nbsp;Walsh's&nbsp;file&nbsp;descriptor&nbsp;leakage&nbsp;checks.&nbsp;&nbsp;When&nbsp;enabled,<br>
&nbsp;&nbsp;Valgrind&nbsp;will&nbsp;print&nbsp;out&nbsp;a&nbsp;list&nbsp;of&nbsp;open&nbsp;file&nbsp;descriptors&nbsp;on<br>
&nbsp;&nbsp;exit.&nbsp;&nbsp;Along&nbsp;with&nbsp;each&nbsp;file&nbsp;descriptor,&nbsp;Valgrind&nbsp;prints&nbsp;out&nbsp;a&nbsp;stack<br>
&nbsp;&nbsp;backtrace&nbsp;of&nbsp;where&nbsp;the&nbsp;file&nbsp;was&nbsp;opened&nbsp;and&nbsp;any&nbsp;details&nbsp;relating&nbsp;to&nbsp;the<br>
&nbsp;&nbsp;file&nbsp;descriptor&nbsp;such&nbsp;as&nbsp;the&nbsp;file&nbsp;name&nbsp;or&nbsp;socket&nbsp;details.<br>
&nbsp;&nbsp;To&nbsp;use,&nbsp;give:&nbsp;--track-fds=yes<br>
<br>
-&nbsp;Implemented&nbsp;a&nbsp;few&nbsp;more&nbsp;SSE/SSE2&nbsp;instructions.<br>
<br>
-&nbsp;Less&nbsp;crud&nbsp;on&nbsp;the&nbsp;stack&nbsp;when&nbsp;you&nbsp;do&nbsp;'where'&nbsp;inside&nbsp;a&nbsp;GDB&nbsp;attach.<br>
<br>
-&nbsp;Fixed&nbsp;the&nbsp;following&nbsp;bugs:<br>
&nbsp;&nbsp;68360:&nbsp;Valgrind&nbsp;does&nbsp;not&nbsp;compile&nbsp;against&nbsp;2.6.0-testX&nbsp;kernels<br>
&nbsp;&nbsp;68525:&nbsp;CVS&nbsp;head&nbsp;doesn't&nbsp;compile&nbsp;on&nbsp;C90&nbsp;compilers<br>
&nbsp;&nbsp;68566:&nbsp;pkgconfig&nbsp;support&nbsp;(wishlist)<br>
&nbsp;&nbsp;68588:&nbsp;Assertion&nbsp;`sz&nbsp;==&nbsp;4'&nbsp;failed&nbsp;in&nbsp;vg_to_ucode.c&nbsp;(disInstr)<br>
&nbsp;&nbsp;69140:&nbsp;valgrind&nbsp;not&nbsp;able&nbsp;to&nbsp;explicitly&nbsp;specify&nbsp;a&nbsp;path&nbsp;to&nbsp;a&nbsp;binary.&nbsp;<br>
&nbsp;&nbsp;69432:&nbsp;helgrind&nbsp;asserts&nbsp;encountering&nbsp;a&nbsp;MutexErr&nbsp;when&nbsp;there&nbsp;are&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EraserErr&nbsp;suppressions<br>
<br>
-&nbsp;Increase&nbsp;the&nbsp;max&nbsp;size&nbsp;of&nbsp;the&nbsp;translation&nbsp;cache&nbsp;from&nbsp;200k&nbsp;average&nbsp;bbs<br>
&nbsp;&nbsp;to&nbsp;300k&nbsp;average&nbsp;bbs.&nbsp;&nbsp;Programs&nbsp;on&nbsp;the&nbsp;size&nbsp;of&nbsp;OOo&nbsp;(680m17)&nbsp;are<br>
&nbsp;&nbsp;thrashing&nbsp;the&nbsp;cache&nbsp;at&nbsp;the&nbsp;smaller&nbsp;size,&nbsp;creating&nbsp;large&nbsp;numbers&nbsp;of<br>
&nbsp;&nbsp;retranslations&nbsp;and&nbsp;wasting&nbsp;significant&nbsp;time&nbsp;as&nbsp;a&nbsp;result.<br>
<br>
<br>
<br>
Stable&nbsp;release&nbsp;2.0.0&nbsp;(5&nbsp;Nov&nbsp;2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
2.0.0&nbsp;improves&nbsp;SSE/SSE2&nbsp;support,&nbsp;fixes&nbsp;some&nbsp;minor&nbsp;bugs,&nbsp;and<br>
improves&nbsp;support&nbsp;for&nbsp;SuSE&nbsp;9&nbsp;and&nbsp;the&nbsp;Red&nbsp;Hat&nbsp;"Severn"&nbsp;beta.<br>
<br>
-&nbsp;Further&nbsp;improvements&nbsp;to&nbsp;SSE/SSE2&nbsp;support.&nbsp;&nbsp;The&nbsp;entire&nbsp;test&nbsp;suite&nbsp;of<br>
&nbsp;&nbsp;the&nbsp;GNU&nbsp;Scientific&nbsp;Library&nbsp;(gsl-1.4)&nbsp;compiled&nbsp;with&nbsp;Intel&nbsp;Icc&nbsp;7.1<br>
&nbsp;&nbsp;20030307Z&nbsp;'-g&nbsp;-O&nbsp;-xW'&nbsp;now&nbsp;works.&nbsp;&nbsp;I&nbsp;think&nbsp;this&nbsp;gives&nbsp;pretty&nbsp;good<br>
&nbsp;&nbsp;coverage&nbsp;of&nbsp;SSE/SSE2&nbsp;floating&nbsp;point&nbsp;instructions,&nbsp;or&nbsp;at&nbsp;least&nbsp;the<br>
&nbsp;&nbsp;subset&nbsp;emitted&nbsp;by&nbsp;Icc.<br>
<br>
-&nbsp;Also&nbsp;added&nbsp;support&nbsp;for&nbsp;the&nbsp;following&nbsp;instructions:<br>
&nbsp;&nbsp;&nbsp;&nbsp;MOVNTDQ&nbsp;UCOMISD&nbsp;UNPCKLPS&nbsp;UNPCKHPS&nbsp;SQRTSS<br>
&nbsp;&nbsp;&nbsp;&nbsp;PUSH/POP&nbsp;%{FS,GS},&nbsp;and&nbsp;PUSH&nbsp;%CS&nbsp;(Nb:&nbsp;there&nbsp;is&nbsp;no&nbsp;POP&nbsp;%CS).<br>
<br>
-&nbsp;CFI&nbsp;support&nbsp;for&nbsp;GDB&nbsp;version&nbsp;6.&nbsp;&nbsp;Needed&nbsp;to&nbsp;enable&nbsp;newer&nbsp;GDBs<br>
&nbsp;&nbsp;to&nbsp;figure&nbsp;out&nbsp;where&nbsp;they&nbsp;are&nbsp;when&nbsp;using&nbsp;--gdb-attach=yes.<br>
<br>
-&nbsp;Fix&nbsp;this:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mc_translate.c:1091&nbsp;(memcheck_instrument):&nbsp;Assertion<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`u_in-&gt;size&nbsp;==&nbsp;4&nbsp;||&nbsp;u_in-&gt;size&nbsp;==&nbsp;16'&nbsp;failed.<br>
<br>
-&nbsp;Return&nbsp;an&nbsp;error&nbsp;rather&nbsp;than&nbsp;panicing&nbsp;when&nbsp;given&nbsp;a&nbsp;bad&nbsp;socketcall.<br>
<br>
-&nbsp;Fix&nbsp;checking&nbsp;of&nbsp;syscall&nbsp;rt_sigtimedwait().<br>
<br>
-&nbsp;Implement&nbsp;__NR_clock_gettime&nbsp;(syscall&nbsp;265).&nbsp;&nbsp;Needed&nbsp;on&nbsp;Red&nbsp;Hat&nbsp;Severn.<br>
<br>
-&nbsp;Fixed&nbsp;bug&nbsp;in&nbsp;overlap&nbsp;check&nbsp;in&nbsp;strncpy()&nbsp;--&nbsp;it&nbsp;was&nbsp;assuming&nbsp;the&nbsp;src&nbsp;was&nbsp;'n'<br>
&nbsp;&nbsp;bytes&nbsp;long,&nbsp;when&nbsp;it&nbsp;could&nbsp;be&nbsp;shorter,&nbsp;which&nbsp;could&nbsp;cause&nbsp;false<br>
&nbsp;&nbsp;positives.<br>
<br>
-&nbsp;Support&nbsp;use&nbsp;of&nbsp;select()&nbsp;for&nbsp;very&nbsp;large&nbsp;numbers&nbsp;of&nbsp;file&nbsp;descriptors.<br>
<br>
-&nbsp;Don't&nbsp;fail&nbsp;silently&nbsp;if&nbsp;the&nbsp;executable&nbsp;is&nbsp;statically&nbsp;linked,&nbsp;or&nbsp;is<br>
&nbsp;&nbsp;setuid/setgid.&nbsp;Print&nbsp;an&nbsp;error&nbsp;message&nbsp;instead.<br>
<br>
-&nbsp;Support&nbsp;for&nbsp;old&nbsp;DWARF-1&nbsp;format&nbsp;line&nbsp;number&nbsp;info.<br>
<br>
<br>
<br>
Snapshot&nbsp;20031012&nbsp;(12&nbsp;October&nbsp;2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
Three&nbsp;months&nbsp;worth&nbsp;of&nbsp;bug&nbsp;fixes,&nbsp;roughly.&nbsp;&nbsp;Most&nbsp;significant&nbsp;single<br>
change&nbsp;is&nbsp;improved&nbsp;SSE/SSE2&nbsp;support,&nbsp;mostly&nbsp;thanks&nbsp;to&nbsp;Dirk&nbsp;Mueller.<br>
<br>
20031012&nbsp;builds&nbsp;on&nbsp;Red&nbsp;Hat&nbsp;Fedora&nbsp;("Severn")&nbsp;but&nbsp;doesn't&nbsp;really&nbsp;work<br>
(curiously,&nbsp;mozilla&nbsp;runs&nbsp;OK,&nbsp;but&nbsp;a&nbsp;modest&nbsp;"ls&nbsp;-l"&nbsp;bombs).&nbsp;&nbsp;I&nbsp;hope&nbsp;to<br>
get&nbsp;a&nbsp;working&nbsp;version&nbsp;out&nbsp;soon.&nbsp;&nbsp;It&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;work&nbsp;ok&nbsp;on&nbsp;the<br>
forthcoming&nbsp;SuSE&nbsp;9;&nbsp;I&nbsp;hear&nbsp;positive&nbsp;noises&nbsp;about&nbsp;it&nbsp;but&nbsp;haven't&nbsp;been<br>
able&nbsp;to&nbsp;verify&nbsp;this&nbsp;myself&nbsp;(not&nbsp;until&nbsp;I&nbsp;get&nbsp;hold&nbsp;of&nbsp;a&nbsp;copy&nbsp;of&nbsp;9).<br>
<br>
A&nbsp;detailed&nbsp;list&nbsp;of&nbsp;changes,&nbsp;in&nbsp;no&nbsp;particular&nbsp;order:<br>
<br>
-&nbsp;Describe&nbsp;--gen-suppressions&nbsp;in&nbsp;the&nbsp;FAQ.<br>
<br>
-&nbsp;Syscall&nbsp;__NR_waitpid&nbsp;supported.<br>
<br>
-&nbsp;Minor&nbsp;MMX&nbsp;bug&nbsp;fix.<br>
<br>
-&nbsp;-v&nbsp;prints&nbsp;program's&nbsp;argv[]&nbsp;at&nbsp;startup.<br>
<br>
-&nbsp;More&nbsp;glibc-2.3&nbsp;suppressions.<br>
<br>
-&nbsp;Suppressions&nbsp;for&nbsp;stack&nbsp;underrun&nbsp;bug(s)&nbsp;in&nbsp;the&nbsp;c++&nbsp;support&nbsp;library<br>
&nbsp;&nbsp;distributed&nbsp;with&nbsp;Intel&nbsp;Icc&nbsp;7.0.<br>
<br>
-&nbsp;Fix&nbsp;problems&nbsp;reading&nbsp;/proc/self/maps.<br>
<br>
-&nbsp;Fix&nbsp;a&nbsp;couple&nbsp;of&nbsp;messages&nbsp;that&nbsp;should&nbsp;have&nbsp;been&nbsp;suppressed&nbsp;by&nbsp;-q,&nbsp;<br>
&nbsp;&nbsp;but&nbsp;weren't.<br>
<br>
-&nbsp;Make&nbsp;Addrcheck&nbsp;understand&nbsp;"Overlap"&nbsp;suppressions.<br>
<br>
-&nbsp;At&nbsp;startup,&nbsp;check&nbsp;if&nbsp;program&nbsp;is&nbsp;statically&nbsp;linked&nbsp;and&nbsp;bail&nbsp;out&nbsp;if&nbsp;so.<br>
<br>
-&nbsp;Cachegrind:&nbsp;Auto-detect&nbsp;Intel&nbsp;Pentium-M,&nbsp;also&nbsp;VIA&nbsp;Nehemiah<br>
<br>
-&nbsp;Memcheck/addrcheck:&nbsp;minor&nbsp;speed&nbsp;optimisations<br>
<br>
-&nbsp;Handle&nbsp;syscall&nbsp;__NR_brk&nbsp;more&nbsp;correctly&nbsp;than&nbsp;before.<br>
<br>
-&nbsp;Fixed&nbsp;incorrect&nbsp;allocate/free&nbsp;mismatch&nbsp;errors&nbsp;when&nbsp;using<br>
&nbsp;&nbsp;operator&nbsp;new(unsigned,&nbsp;std::nothrow_t&nbsp;const&amp;)<br>
&nbsp;&nbsp;operator&nbsp;new[](unsigned,&nbsp;std::nothrow_t&nbsp;const&amp;)<br>
<br>
-&nbsp;Support&nbsp;POSIX&nbsp;pthread&nbsp;spinlocks.<br>
<br>
-&nbsp;Fixups&nbsp;for&nbsp;clean&nbsp;compilation&nbsp;with&nbsp;gcc-3.3.1.<br>
<br>
-&nbsp;Implemented&nbsp;more&nbsp;opcodes:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;push&nbsp;%es<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;push&nbsp;%ds<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;pop&nbsp;%es<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;pop&nbsp;%ds<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;movntq<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;sfence<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;pshufw<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;pavgb<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;ucomiss<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;enter<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;mov&nbsp;imm32,&nbsp;%esp<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;all&nbsp;"in"&nbsp;and&nbsp;"out"&nbsp;opcodes<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;inc/dec&nbsp;%esp<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;A&nbsp;whole&nbsp;bunch&nbsp;of&nbsp;SSE/SSE2&nbsp;instructions<br>
<br>
-&nbsp;Memcheck:&nbsp;don't&nbsp;bomb&nbsp;on&nbsp;SSE/SSE2&nbsp;code.<br>
<br>
<br>
Snapshot&nbsp;20030725&nbsp;(25&nbsp;July&nbsp;2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
Fixes&nbsp;some&nbsp;minor&nbsp;problems&nbsp;in&nbsp;20030716.<br>
<br>
-&nbsp;Fix&nbsp;bugs&nbsp;in&nbsp;overlap&nbsp;checking&nbsp;for&nbsp;strcpy/memcpy&nbsp;etc.<br>
<br>
-&nbsp;Do&nbsp;overlap&nbsp;checking&nbsp;with&nbsp;Addrcheck&nbsp;as&nbsp;well&nbsp;as&nbsp;Memcheck.<br>
<br>
-&nbsp;Fix&nbsp;this:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Memcheck:&nbsp;the&nbsp;`impossible'&nbsp;happened:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get_error_name:&nbsp;unexpected&nbsp;type<br>
<br>
-&nbsp;Install&nbsp;headers&nbsp;needed&nbsp;to&nbsp;compile&nbsp;new&nbsp;skins.<br>
<br>
-&nbsp;Remove&nbsp;leading&nbsp;spaces&nbsp;and&nbsp;colon&nbsp;in&nbsp;the&nbsp;LD_LIBRARY_PATH&nbsp;/&nbsp;LD_PRELOAD<br>
&nbsp;&nbsp;passed&nbsp;to&nbsp;non-traced&nbsp;children.<br>
<br>
-&nbsp;Fix&nbsp;file&nbsp;descriptor&nbsp;leak&nbsp;in&nbsp;valgrind-listener.<br>
<br>
-&nbsp;Fix&nbsp;longstanding&nbsp;bug&nbsp;in&nbsp;which&nbsp;the&nbsp;allocation&nbsp;point&nbsp;of&nbsp;a&nbsp;<br>
&nbsp;&nbsp;block&nbsp;resized&nbsp;by&nbsp;realloc&nbsp;was&nbsp;not&nbsp;correctly&nbsp;set.&nbsp;&nbsp;This&nbsp;may<br>
&nbsp;&nbsp;have&nbsp;caused&nbsp;confusing&nbsp;error&nbsp;messages.<br>
<br>
<br>
Snapshot&nbsp;20030716&nbsp;(16&nbsp;July&nbsp;2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
20030716&nbsp;is&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;our&nbsp;current&nbsp;CVS&nbsp;head&nbsp;(development)&nbsp;branch.<br>
This&nbsp;is&nbsp;the&nbsp;branch&nbsp;which&nbsp;will&nbsp;become&nbsp;valgrind-2.0.&nbsp;&nbsp;It&nbsp;contains<br>
significant&nbsp;enhancements&nbsp;over&nbsp;the&nbsp;1.9.X&nbsp;branch.<br>
<br>
Despite&nbsp;this&nbsp;being&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;the&nbsp;CVS&nbsp;head,&nbsp;it&nbsp;is&nbsp;believed&nbsp;to&nbsp;be<br>
quite&nbsp;stable&nbsp;--&nbsp;at&nbsp;least&nbsp;as&nbsp;stable&nbsp;as&nbsp;1.9.6&nbsp;or&nbsp;1.0.4,&nbsp;if&nbsp;not&nbsp;more&nbsp;so<br>
--&nbsp;and&nbsp;therefore&nbsp;suitable&nbsp;for&nbsp;widespread&nbsp;use.&nbsp;&nbsp;Please&nbsp;let&nbsp;us&nbsp;know&nbsp;asap<br>
if&nbsp;it&nbsp;causes&nbsp;problems&nbsp;for&nbsp;you.<br>
<br>
Two&nbsp;reasons&nbsp;for&nbsp;releasing&nbsp;a&nbsp;snapshot&nbsp;now&nbsp;are:<br>
<br>
-&nbsp;It's&nbsp;been&nbsp;a&nbsp;while&nbsp;since&nbsp;1.9.6,&nbsp;and&nbsp;this&nbsp;snapshot&nbsp;fixes<br>
&nbsp;&nbsp;various&nbsp;problems&nbsp;that&nbsp;1.9.6&nbsp;has&nbsp;with&nbsp;threaded&nbsp;programs&nbsp;<br>
&nbsp;&nbsp;on&nbsp;glibc-2.3.X&nbsp;based&nbsp;systems.<br>
<br>
-&nbsp;So&nbsp;as&nbsp;to&nbsp;make&nbsp;available&nbsp;improvements&nbsp;in&nbsp;the&nbsp;2.0&nbsp;line.<br>
<br>
Major&nbsp;changes&nbsp;in&nbsp;20030716,&nbsp;as&nbsp;compared&nbsp;to&nbsp;1.9.6:<br>
<br>
-&nbsp;More&nbsp;fixes&nbsp;to&nbsp;threading&nbsp;support&nbsp;on&nbsp;glibc-2.3.1&nbsp;and&nbsp;2.3.2-based<br>
&nbsp;&nbsp;systems&nbsp;(SuSE&nbsp;8.2,&nbsp;Red&nbsp;Hat&nbsp;9).&nbsp;&nbsp;If&nbsp;you&nbsp;have&nbsp;had&nbsp;problems<br>
&nbsp;&nbsp;with&nbsp;inconsistent/illogical&nbsp;behaviour&nbsp;of&nbsp;errno,&nbsp;h_errno&nbsp;or&nbsp;the&nbsp;DNS<br>
&nbsp;&nbsp;resolver&nbsp;functions&nbsp;in&nbsp;threaded&nbsp;programs,&nbsp;20030716&nbsp;should&nbsp;improve<br>
&nbsp;&nbsp;matters.&nbsp;&nbsp;This&nbsp;snapshot&nbsp;seems&nbsp;stable&nbsp;enough&nbsp;to&nbsp;run&nbsp;OpenOffice.org<br>
&nbsp;&nbsp;1.1rc&nbsp;on&nbsp;Red&nbsp;Hat&nbsp;7.3,&nbsp;SuSE&nbsp;8.2&nbsp;and&nbsp;Red&nbsp;Hat&nbsp;9,&nbsp;and&nbsp;that's&nbsp;a&nbsp;big<br>
&nbsp;&nbsp;threaded&nbsp;app&nbsp;if&nbsp;ever&nbsp;I&nbsp;saw&nbsp;one.<br>
<br>
-&nbsp;Automatic&nbsp;generation&nbsp;of&nbsp;suppression&nbsp;records;&nbsp;you&nbsp;no&nbsp;longer<br>
&nbsp;&nbsp;need&nbsp;to&nbsp;write&nbsp;them&nbsp;by&nbsp;hand.&nbsp;&nbsp;Use&nbsp;--gen-suppressions=yes.<br>
<br>
-&nbsp;strcpy/memcpy/etc&nbsp;check&nbsp;their&nbsp;arguments&nbsp;for&nbsp;overlaps,&nbsp;when<br>
&nbsp;&nbsp;running&nbsp;with&nbsp;the&nbsp;Memcheck&nbsp;or&nbsp;Addrcheck&nbsp;skins.<br>
<br>
-&nbsp;malloc_usable_size()&nbsp;is&nbsp;now&nbsp;supported.<br>
<br>
-&nbsp;new&nbsp;client&nbsp;requests:<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;VALGRIND_COUNT_ERRORS,&nbsp;VALGRIND_COUNT_LEAKS:&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;useful&nbsp;with&nbsp;regression&nbsp;testing<br>
&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;VALGRIND_NON_SIMD_CALL[0123]:&nbsp;for&nbsp;running&nbsp;arbitrary&nbsp;functions&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;real&nbsp;CPU&nbsp;(use&nbsp;with&nbsp;caution!)<br>
<br>
-&nbsp;The&nbsp;GDB&nbsp;attach&nbsp;mechanism&nbsp;is&nbsp;more&nbsp;flexible.&nbsp;&nbsp;Allow&nbsp;the&nbsp;GDB&nbsp;to<br>
&nbsp;&nbsp;be&nbsp;run&nbsp;to&nbsp;be&nbsp;specified&nbsp;by&nbsp;--gdb-path=/path/to/gdb,&nbsp;and&nbsp;specify<br>
&nbsp;&nbsp;which&nbsp;file&nbsp;descriptor&nbsp;V&nbsp;will&nbsp;read&nbsp;its&nbsp;input&nbsp;from&nbsp;with<br>
&nbsp;&nbsp;--input-fd=&lt;number&gt;.<br>
<br>
-&nbsp;Cachegrind&nbsp;gives&nbsp;more&nbsp;accurate&nbsp;results&nbsp;(wasn't&nbsp;tracking&nbsp;instructions&nbsp;in<br>
&nbsp;&nbsp;malloc()&nbsp;and&nbsp;friends&nbsp;previously,&nbsp;is&nbsp;now).<br>
<br>
-&nbsp;Complete&nbsp;support&nbsp;for&nbsp;the&nbsp;MMX&nbsp;instruction&nbsp;set.<br>
<br>
-&nbsp;Partial&nbsp;support&nbsp;for&nbsp;the&nbsp;SSE&nbsp;and&nbsp;SSE2&nbsp;instruction&nbsp;sets.&nbsp;&nbsp;Work&nbsp;for&nbsp;this<br>
&nbsp;&nbsp;is&nbsp;ongoing.&nbsp;&nbsp;About&nbsp;half&nbsp;the&nbsp;SSE/SSE2&nbsp;instructions&nbsp;are&nbsp;done,&nbsp;so<br>
&nbsp;&nbsp;some&nbsp;SSE&nbsp;based&nbsp;programs&nbsp;may&nbsp;work.&nbsp;&nbsp;Currently&nbsp;you&nbsp;need&nbsp;to&nbsp;specify<br>
&nbsp;&nbsp;--skin=addrcheck.&nbsp;&nbsp;Basically&nbsp;not&nbsp;suitable&nbsp;for&nbsp;real&nbsp;use&nbsp;yet.<br>
<br>
-&nbsp;Significant&nbsp;speedups&nbsp;(10%-20%)&nbsp;for&nbsp;standard&nbsp;memory&nbsp;checking.<br>
<br>
-&nbsp;Fix&nbsp;assertion&nbsp;failure&nbsp;in&nbsp;pthread_once().<br>
<br>
-&nbsp;Fix&nbsp;this:<br>
&nbsp;&nbsp;&nbsp;&nbsp;valgrind:&nbsp;vg_intercept.c:598&nbsp;(vgAllRoadsLeadToRome_select):&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Assertion&nbsp;`ms_end&nbsp;&gt;=&nbsp;ms_now'&nbsp;failed.<br>
<br>
-&nbsp;Implement&nbsp;pthread_mutexattr_setpshared.<br>
<br>
-&nbsp;Understand&nbsp;Pentium&nbsp;4&nbsp;branch&nbsp;hints.&nbsp;&nbsp;Also&nbsp;implemented&nbsp;a&nbsp;couple&nbsp;more<br>
&nbsp;&nbsp;obscure&nbsp;x86&nbsp;instructions.<br>
<br>
-&nbsp;Lots&nbsp;of&nbsp;other&nbsp;minor&nbsp;bug&nbsp;fixes.<br>
<br>
-&nbsp;We&nbsp;have&nbsp;a&nbsp;decent&nbsp;regression&nbsp;test&nbsp;system,&nbsp;for&nbsp;the&nbsp;first&nbsp;time.<br>
&nbsp;&nbsp;This&nbsp;doesn't&nbsp;help&nbsp;you&nbsp;directly,&nbsp;but&nbsp;it&nbsp;does&nbsp;make&nbsp;it&nbsp;a&nbsp;lot&nbsp;easier<br>
&nbsp;&nbsp;for&nbsp;us&nbsp;to&nbsp;track&nbsp;the&nbsp;quality&nbsp;of&nbsp;the&nbsp;system,&nbsp;especially&nbsp;across<br>
&nbsp;&nbsp;multiple&nbsp;linux&nbsp;distributions.&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;You&nbsp;can&nbsp;run&nbsp;the&nbsp;regression&nbsp;tests&nbsp;with&nbsp;'make&nbsp;regtest'&nbsp;after&nbsp;'make<br>
&nbsp;&nbsp;install'&nbsp;completes.&nbsp;&nbsp;On&nbsp;SuSE&nbsp;8.2&nbsp;and&nbsp;Red&nbsp;Hat&nbsp;9&nbsp;I&nbsp;get&nbsp;this:<br>
&nbsp;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;84&nbsp;tests,&nbsp;0&nbsp;stderr&nbsp;failures,&nbsp;0&nbsp;stdout&nbsp;failures&nbsp;==<br>
<br>
&nbsp;&nbsp;On&nbsp;Red&nbsp;Hat&nbsp;8,&nbsp;I&nbsp;get&nbsp;this:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;84&nbsp;tests,&nbsp;2&nbsp;stderr&nbsp;failures,&nbsp;1&nbsp;stdout&nbsp;failure&nbsp;==<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corecheck/tests/res_search&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stdout)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcheck/tests/sigaltstack&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stderr)<br>
<br>
&nbsp;&nbsp;sigaltstack&nbsp;is&nbsp;probably&nbsp;harmless.&nbsp;&nbsp;res_search&nbsp;doesn't&nbsp;work<br>
&nbsp;&nbsp;on&nbsp;R&nbsp;H&nbsp;8&nbsp;even&nbsp;running&nbsp;natively,&nbsp;so&nbsp;I'm&nbsp;not&nbsp;too&nbsp;worried.&nbsp;&nbsp;&nbsp;<br>
<br>
&nbsp;&nbsp;On&nbsp;Red&nbsp;Hat&nbsp;7.3,&nbsp;a&nbsp;glibc-2.2.5&nbsp;system,&nbsp;I&nbsp;get&nbsp;these&nbsp;harmless&nbsp;failures:<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;==&nbsp;84&nbsp;tests,&nbsp;2&nbsp;stderr&nbsp;failures,&nbsp;1&nbsp;stdout&nbsp;failure&nbsp;==<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corecheck/tests/pth_atfork1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stdout)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;corecheck/tests/pth_atfork1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stderr)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;memcheck/tests/sigaltstack&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(stderr)<br>
<br>
&nbsp;&nbsp;You&nbsp;need&nbsp;to&nbsp;run&nbsp;on&nbsp;a&nbsp;PII&nbsp;system,&nbsp;at&nbsp;least,&nbsp;since&nbsp;some&nbsp;tests<br>
&nbsp;&nbsp;contain&nbsp;P6-specific&nbsp;instructions,&nbsp;and&nbsp;the&nbsp;test&nbsp;machine&nbsp;needs<br>
&nbsp;&nbsp;access&nbsp;to&nbsp;the&nbsp;internet&nbsp;so&nbsp;that&nbsp;corecheck/tests/res_search<br>
&nbsp;&nbsp;(a&nbsp;test&nbsp;that&nbsp;the&nbsp;DNS&nbsp;resolver&nbsp;works)&nbsp;can&nbsp;function.<br>
<br>
As&nbsp;ever,&nbsp;thanks&nbsp;for&nbsp;the&nbsp;vast&nbsp;amount&nbsp;of&nbsp;feedback&nbsp;:)&nbsp;and&nbsp;bug&nbsp;reports&nbsp;:(<br>
We&nbsp;may&nbsp;not&nbsp;answer&nbsp;all&nbsp;messages,&nbsp;but&nbsp;we&nbsp;do&nbsp;at&nbsp;least&nbsp;look&nbsp;at&nbsp;all&nbsp;of<br>
them,&nbsp;and&nbsp;tend&nbsp;to&nbsp;fix&nbsp;the&nbsp;most&nbsp;frequently&nbsp;reported&nbsp;bugs.<br>
<br>
<br>
<br>
Version&nbsp;1.9.6&nbsp;(7&nbsp;May&nbsp;2003&nbsp;or&nbsp;thereabouts)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
Major&nbsp;changes&nbsp;in&nbsp;1.9.6:<br>
<br>
-&nbsp;Improved&nbsp;threading&nbsp;support&nbsp;for&nbsp;glibc&nbsp;&gt;=&nbsp;2.3.2&nbsp;(SuSE&nbsp;8.2,<br>
&nbsp;&nbsp;RedHat&nbsp;9,&nbsp;to&nbsp;name&nbsp;but&nbsp;two&nbsp;...)&nbsp;&nbsp;It&nbsp;turned&nbsp;out&nbsp;that&nbsp;1.9.5<br>
&nbsp;&nbsp;had&nbsp;problems&nbsp;with&nbsp;threading&nbsp;support&nbsp;on&nbsp;glibc&nbsp;&gt;=&nbsp;2.3.2,<br>
&nbsp;&nbsp;usually&nbsp;manifested&nbsp;by&nbsp;threaded&nbsp;programs&nbsp;deadlocking&nbsp;in&nbsp;system&nbsp;calls,<br>
&nbsp;&nbsp;or&nbsp;running&nbsp;unbelievably&nbsp;slowly.&nbsp;&nbsp;Hopefully&nbsp;these&nbsp;are&nbsp;fixed&nbsp;now.&nbsp;&nbsp;1.9.6<br>
&nbsp;&nbsp;is&nbsp;the&nbsp;first&nbsp;valgrind&nbsp;which&nbsp;gives&nbsp;reasonable&nbsp;support&nbsp;for<br>
&nbsp;&nbsp;glibc-2.3.2.&nbsp;&nbsp;Also&nbsp;fixed&nbsp;a&nbsp;2.3.2&nbsp;problem&nbsp;with&nbsp;pthread_atfork().<br>
<br>
-&nbsp;Majorly&nbsp;expanded&nbsp;FAQ.txt.&nbsp;&nbsp;We've&nbsp;added&nbsp;workarounds&nbsp;for&nbsp;all<br>
&nbsp;&nbsp;common&nbsp;problems&nbsp;for&nbsp;which&nbsp;a&nbsp;workaround&nbsp;is&nbsp;known.<br>
<br>
Minor&nbsp;changes&nbsp;in&nbsp;1.9.6:<br>
<br>
-&nbsp;Fix&nbsp;identification&nbsp;of&nbsp;the&nbsp;main&nbsp;thread's&nbsp;stack.&nbsp;&nbsp;Incorrect<br>
&nbsp;&nbsp;identification&nbsp;of&nbsp;it&nbsp;was&nbsp;causing&nbsp;some&nbsp;on-stack&nbsp;addresses&nbsp;to&nbsp;not&nbsp;get<br>
&nbsp;&nbsp;identified&nbsp;as&nbsp;such.&nbsp;&nbsp;This&nbsp;only&nbsp;affected&nbsp;the&nbsp;usefulness&nbsp;of&nbsp;some&nbsp;error<br>
&nbsp;&nbsp;messages;&nbsp;the&nbsp;correctness&nbsp;of&nbsp;the&nbsp;checks&nbsp;made&nbsp;is&nbsp;unchanged.<br>
<br>
-&nbsp;Support&nbsp;for&nbsp;kernels&nbsp;&gt;=&nbsp;2.5.68.<br>
<br>
-&nbsp;Dummy&nbsp;implementations&nbsp;of&nbsp;__libc_current_sigrtmin,&nbsp;<br>
&nbsp;&nbsp;__libc_current_sigrtmax&nbsp;and&nbsp;__libc_allocate_rtsig,&nbsp;hopefully<br>
&nbsp;&nbsp;good&nbsp;enough&nbsp;to&nbsp;keep&nbsp;alive&nbsp;programs&nbsp;which&nbsp;previously&nbsp;died&nbsp;for&nbsp;lack&nbsp;of<br>
&nbsp;&nbsp;them.<br>
<br>
-&nbsp;Fix&nbsp;bug&nbsp;in&nbsp;the&nbsp;VALGRIND_DISCARD_TRANSLATIONS&nbsp;client&nbsp;request.<br>
<br>
-&nbsp;Fix&nbsp;bug&nbsp;in&nbsp;the&nbsp;DWARF2&nbsp;debug&nbsp;line&nbsp;info&nbsp;loader,&nbsp;when&nbsp;instructions&nbsp;<br>
&nbsp;&nbsp;following&nbsp;each&nbsp;other&nbsp;have&nbsp;source&nbsp;lines&nbsp;far&nbsp;from&nbsp;each&nbsp;other&nbsp;<br>
&nbsp;&nbsp;(e.g.&nbsp;with&nbsp;inlined&nbsp;functions).<br>
<br>
-&nbsp;Debug&nbsp;info&nbsp;reading:&nbsp;read&nbsp;symbols&nbsp;from&nbsp;both&nbsp;"symtab"&nbsp;and&nbsp;"dynsym"<br>
&nbsp;&nbsp;sections,&nbsp;rather&nbsp;than&nbsp;merely&nbsp;from&nbsp;the&nbsp;one&nbsp;that&nbsp;comes&nbsp;last&nbsp;in&nbsp;the<br>
&nbsp;&nbsp;file.<br>
<br>
-&nbsp;New&nbsp;syscall&nbsp;support:&nbsp;prctl(),&nbsp;creat(),&nbsp;lookup_dcookie().<br>
<br>
-&nbsp;When&nbsp;checking&nbsp;calls&nbsp;to&nbsp;accept(),&nbsp;recvfrom(),&nbsp;getsocketopt(),<br>
&nbsp;&nbsp;don't&nbsp;complain&nbsp;if&nbsp;buffer&nbsp;values&nbsp;are&nbsp;NULL.<br>
<br>
-&nbsp;Try&nbsp;and&nbsp;avoid&nbsp;assertion&nbsp;failures&nbsp;in<br>
&nbsp;&nbsp;mash_LD_PRELOAD_and_LD_LIBRARY_PATH.<br>
<br>
-&nbsp;Minor&nbsp;bug&nbsp;fixes&nbsp;in&nbsp;cg_annotate.<br>
<br>
<br>
<br>
Version&nbsp;1.9.5&nbsp;(7&nbsp;April&nbsp;2003)<br>
~~~~~~~~~~~~~~~~~~~~~~~~~~~~<br>
<br>
It&nbsp;occurs&nbsp;to&nbsp;me&nbsp;that&nbsp;it&nbsp;would&nbsp;be&nbsp;helpful&nbsp;for&nbsp;valgrind&nbsp;users&nbsp;to&nbsp;record<br>
in&nbsp;the&nbsp;source&nbsp;distribution&nbsp;the&nbsp;changes&nbsp;in&nbsp;each&nbsp;release.&nbsp;&nbsp;So&nbsp;I&nbsp;now<br>
attempt&nbsp;to&nbsp;mend&nbsp;my&nbsp;errant&nbsp;ways&nbsp;:-)&nbsp;&nbsp;Changes&nbsp;in&nbsp;this&nbsp;and&nbsp;future&nbsp;releases<br>
will&nbsp;be&nbsp;documented&nbsp;in&nbsp;the&nbsp;NEWS&nbsp;file&nbsp;in&nbsp;the&nbsp;source&nbsp;distribution.<br>
<br>
Major&nbsp;changes&nbsp;in&nbsp;1.9.5:<br>
<br>
-&nbsp;(Critical&nbsp;bug&nbsp;fix):&nbsp;Fix&nbsp;a&nbsp;bug&nbsp;in&nbsp;the&nbsp;FPU&nbsp;simulation.&nbsp;&nbsp;This&nbsp;was<br>
&nbsp;&nbsp;causing&nbsp;some&nbsp;floating&nbsp;point&nbsp;conditional&nbsp;tests&nbsp;not&nbsp;to&nbsp;work&nbsp;right.<br>
&nbsp;&nbsp;Several&nbsp;people&nbsp;reported&nbsp;this.&nbsp;&nbsp;If&nbsp;you&nbsp;had&nbsp;floating&nbsp;point&nbsp;code&nbsp;which<br>
&nbsp;&nbsp;didn't&nbsp;work&nbsp;right&nbsp;on&nbsp;1.9.1&nbsp;to&nbsp;1.9.4,&nbsp;it's&nbsp;worth&nbsp;trying&nbsp;1.9.5.<br>
<br>
-&nbsp;Partial&nbsp;support&nbsp;for&nbsp;Red&nbsp;Hat&nbsp;9.&nbsp;&nbsp;RH9&nbsp;uses&nbsp;the&nbsp;new&nbsp;Native&nbsp;Posix&nbsp;<br>
&nbsp;&nbsp;Threads&nbsp;Library&nbsp;(NPTL),&nbsp;instead&nbsp;of&nbsp;the&nbsp;older&nbsp;LinuxThreads.&nbsp;&nbsp;<br>
&nbsp;&nbsp;This&nbsp;potentially&nbsp;causes&nbsp;problems&nbsp;with&nbsp;V&nbsp;which&nbsp;will&nbsp;take&nbsp;some<br>
&nbsp;&nbsp;time&nbsp;to&nbsp;correct.&nbsp;&nbsp;In&nbsp;the&nbsp;meantime&nbsp;we&nbsp;have&nbsp;partially&nbsp;worked&nbsp;around<br>
&nbsp;&nbsp;this,&nbsp;and&nbsp;so&nbsp;1.9.5&nbsp;works&nbsp;on&nbsp;RH9.&nbsp;&nbsp;Threaded&nbsp;programs&nbsp;still&nbsp;work,<br>
&nbsp;&nbsp;but&nbsp;they&nbsp;may&nbsp;deadlock,&nbsp;because&nbsp;some&nbsp;system&nbsp;calls&nbsp;(accept,&nbsp;read,<br>
&nbsp;&nbsp;write,&nbsp;etc)&nbsp;which&nbsp;should&nbsp;be&nbsp;nonblocking,&nbsp;in&nbsp;fact&nbsp;do&nbsp;block.&nbsp;&nbsp;This<br>
&nbsp;&nbsp;is&nbsp;a&nbsp;known&nbsp;bug&nbsp;which&nbsp;we&nbsp;are&nbsp;looking&nbsp;into.<br>
<br>
&nbsp;&nbsp;If&nbsp;you&nbsp;can,&nbsp;your&nbsp;best&nbsp;bet&nbsp;(unfortunately)&nbsp;is&nbsp;to&nbsp;avoid&nbsp;using&nbsp;<br>
&nbsp;&nbsp;1.9.5&nbsp;on&nbsp;a&nbsp;Red&nbsp;Hat&nbsp;9&nbsp;system,&nbsp;or&nbsp;on&nbsp;any&nbsp;NPTL-based&nbsp;distribution.<br>
&nbsp;&nbsp;If&nbsp;your&nbsp;glibc&nbsp;is&nbsp;2.3.1&nbsp;or&nbsp;earlier,&nbsp;you're&nbsp;almost&nbsp;certainly&nbsp;OK.<br>
<br>
Minor&nbsp;changes&nbsp;in&nbsp;1.9.5:<br>
<br>
-&nbsp;Added&nbsp;some&nbsp;#errors&nbsp;to&nbsp;valgrind.h&nbsp;to&nbsp;ensure&nbsp;people&nbsp;don't&nbsp;include<br>
&nbsp;&nbsp;it&nbsp;accidentally&nbsp;in&nbsp;their&nbsp;sources.&nbsp;&nbsp;This&nbsp;is&nbsp;a&nbsp;change&nbsp;from&nbsp;1.0.X<br>
&nbsp;&nbsp;which&nbsp;was&nbsp;never&nbsp;properly&nbsp;documented.&nbsp;&nbsp;The&nbsp;right&nbsp;thing&nbsp;to&nbsp;include<br>
&nbsp;&nbsp;is&nbsp;now&nbsp;memcheck.h.&nbsp;&nbsp;Some&nbsp;people&nbsp;reported&nbsp;problems&nbsp;and&nbsp;strange<br>
&nbsp;&nbsp;behaviour&nbsp;when&nbsp;(incorrectly)&nbsp;including&nbsp;valgrind.h&nbsp;in&nbsp;code&nbsp;with&nbsp;<br>
&nbsp;&nbsp;1.9.1&nbsp;--&nbsp;1.9.4.&nbsp;&nbsp;This&nbsp;is&nbsp;no&nbsp;longer&nbsp;possible.<br>
<br>
-&nbsp;Add&nbsp;some&nbsp;__extension__&nbsp;bits&nbsp;and&nbsp;pieces&nbsp;so&nbsp;that&nbsp;gcc&nbsp;configured<br>
&nbsp;&nbsp;for&nbsp;valgrind-checking&nbsp;compiles&nbsp;even&nbsp;with&nbsp;-Werror.&nbsp;&nbsp;If&nbsp;you<br>
&nbsp;&nbsp;don't&nbsp;understand&nbsp;this,&nbsp;ignore&nbsp;it.&nbsp;&nbsp;Of&nbsp;interest&nbsp;to&nbsp;gcc&nbsp;developers<br>
&nbsp;&nbsp;only.<br>
<br>
-&nbsp;Removed&nbsp;a&nbsp;pointless&nbsp;check&nbsp;which&nbsp;caused&nbsp;problems&nbsp;interworking&nbsp;<br>
&nbsp;&nbsp;with&nbsp;Clearcase.&nbsp;&nbsp;V&nbsp;would&nbsp;complain&nbsp;about&nbsp;shared&nbsp;objects&nbsp;whose<br>
&nbsp;&nbsp;names&nbsp;did&nbsp;not&nbsp;end&nbsp;".so",&nbsp;and&nbsp;refuse&nbsp;to&nbsp;run.&nbsp;&nbsp;This&nbsp;is&nbsp;now&nbsp;fixed.<br>
&nbsp;&nbsp;In&nbsp;fact&nbsp;it&nbsp;was&nbsp;fixed&nbsp;in&nbsp;1.9.4&nbsp;but&nbsp;not&nbsp;documented.<br>
<br>
-&nbsp;Fixed&nbsp;a&nbsp;bug&nbsp;causing&nbsp;an&nbsp;assertion&nbsp;failure&nbsp;of&nbsp;"waiters&nbsp;==&nbsp;1"<br>
&nbsp;&nbsp;somewhere&nbsp;in&nbsp;vg_scheduler.c,&nbsp;when&nbsp;running&nbsp;large&nbsp;threaded&nbsp;apps,<br>
&nbsp;&nbsp;notably&nbsp;MySQL.<br>
<br>
-&nbsp;Add&nbsp;support&nbsp;for&nbsp;the&nbsp;munlock&nbsp;system&nbsp;call&nbsp;(124).<br>
<br>
Some&nbsp;comments&nbsp;about&nbsp;future&nbsp;releases:<br>
<br>
1.9.5&nbsp;is,&nbsp;we&nbsp;hope,&nbsp;the&nbsp;most&nbsp;stable&nbsp;Valgrind&nbsp;so&nbsp;far.&nbsp;&nbsp;It&nbsp;pretty&nbsp;much<br>
supersedes&nbsp;the&nbsp;1.0.X&nbsp;branch.&nbsp;&nbsp;If&nbsp;you&nbsp;are&nbsp;a&nbsp;valgrind&nbsp;packager,&nbsp;please<br>
consider&nbsp;making&nbsp;1.9.5&nbsp;available&nbsp;to&nbsp;your&nbsp;users.&nbsp;&nbsp;You&nbsp;can&nbsp;regard&nbsp;the<br>
1.0.X&nbsp;branch&nbsp;as&nbsp;obsolete:&nbsp;1.9.5&nbsp;is&nbsp;stable&nbsp;and&nbsp;vastly&nbsp;superior.&nbsp;&nbsp;There<br>
are&nbsp;no&nbsp;plans&nbsp;at&nbsp;all&nbsp;for&nbsp;further&nbsp;releases&nbsp;of&nbsp;the&nbsp;1.0.X&nbsp;branch.<br>
<br>
If&nbsp;you&nbsp;want&nbsp;a&nbsp;leading-edge&nbsp;valgrind,&nbsp;consider&nbsp;building&nbsp;the&nbsp;cvs&nbsp;head<br>
(from&nbsp;SourceForge),&nbsp;or&nbsp;getting&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;it.&nbsp;&nbsp;Current&nbsp;cool&nbsp;stuff<br>
going&nbsp;in&nbsp;includes&nbsp;MMX&nbsp;support&nbsp;(done);&nbsp;SSE/SSE2&nbsp;support&nbsp;(in&nbsp;progress),<br>
a&nbsp;significant&nbsp;(10-20%)&nbsp;performance&nbsp;improvement&nbsp;(done),&nbsp;and&nbsp;the&nbsp;usual<br>
large&nbsp;collection&nbsp;of&nbsp;minor&nbsp;changes.&nbsp;&nbsp;Hopefully&nbsp;we&nbsp;will&nbsp;be&nbsp;able&nbsp;to<br>
improve&nbsp;our&nbsp;NPTL&nbsp;support,&nbsp;but&nbsp;no&nbsp;promises.<br>
<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;</p></div>
</div>
<div>
<br><table class="nav" width="100%" cellspacing="3" cellpadding="2" border="0" summary="Navigation footer">
<tr>
<td rowspan="2" width="40%" align="left">
<a accesskey="p" href="dist.news.html">&lt;&lt;&nbsp;2.&nbsp;NEWS</a>&nbsp;</td>
<td width="20%" align="center"><a accesskey="u" href="dist.html">Up</a></td>
<td rowspan="2" width="40%" align="right">&nbsp;<a accesskey="n" href="dist.readme.html">4.&nbsp;README&nbsp;&gt;&gt;</a>
</td>
</tr>
<tr><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td></tr>
</table>
</div>
</body>
</html>
